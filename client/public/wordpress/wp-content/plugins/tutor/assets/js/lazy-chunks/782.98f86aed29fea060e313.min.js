"use strict";(self["webpackChunktutor"]=self["webpackChunktutor"]||[]).push([[782],{3226:(t,e,r)=>{r.r(e);r.d(e,{default:()=>Qc});var n=r(9752);var i=r(2339);var o=r(5587);var a=r(917);var u=r(8003);var s=r(7363);var c=r(1533);var l=r(9250);var d=r(74);var f=r(5033);var p=r(6595);var v=r(96);var h=r(4285);var y=r(2329);var g=r(202);var m=r(7536);var _=r(2798);var b=r(3389);var w=r(9592);var Z=r(4900);var x=r(8877);var O=r(9612);var E=r(7619);var k=r(932);var q=r(7100);var S=r(7941);var j=r(5453);var P=r(9768);var A=r(1162);var T=r(8777);var C=r(6764);var I=r(9528);var D=r(178);var L=r(5589);var W=r(7034);var z=r(8305);var N=r(6413);var U=r(1537);var J=r(5460);var Q=r(2377);var F=r(5219);var M=r(9169);var B=r(7363);function G(t){"@babel/helpers - typeof";return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function R(){R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return R.apply(this,arguments)}function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){K(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function K(t,e,r){e=Y(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Y(t){var e=$(t,"string");return G(e)==="symbol"?e:String(e)}function $(t,e){if(G(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(G(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */X=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==G(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function tt(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function et(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){tt(o,n,i,a,u,"next",t)}function u(t){tt(o,n,i,a,u,"throw",t)}a(undefined)}))}}var rt=(0,W.zs)();var nt=[{label:(0,u.__)("Weeks","tutor"),value:"weeks"},{label:(0,u.__)("Days","tutor"),value:"days"},{label:(0,u.__)("Hours","tutor"),value:"hours"}];var it=function t(e){var r;var n=e.assignmentId,i=n===void 0?"":n,o=e.topicId,c=e.closeModal,l=e.icon,v=e.title,h=e.subtitle,y=e.contentDripType;var _=!!z.y.tutor_pro_url;var b=((r=z.y.settings)===null||r===void 0?void 0:r.chatgpt_enable)==="on";var w=(0,L.T3)(i,o);var x=(0,L.CR)(rt);var O=(0,g.NL)();var E=w.data;var k=O.getQueryData(["Topic",rt]);var q=(0,Q.O)({defaultValues:{title:"",summary:"",attachments:[],time_duration:{value:"0",time:"weeks"},total_mark:10,pass_mark:5,upload_files_limit:1,upload_file_size_limit:2,content_drip_settings:{unlock_date:"",after_xdays_of_enroll:"",prerequisites:[]}},shouldFocusError:true,mode:"onChange"});var W=q.formState.isDirty;(0,s.useEffect)((function(){if(E){var t,e,r;q.reset({title:E.post_title||"",summary:(0,F.qH)(E.post_content)||"",attachments:E.attachments||[],time_duration:{value:E.assignment_option.time_duration.value||"0",time:E.assignment_option.time_duration.time||"weeks"},total_mark:E.assignment_option.total_mark||10,pass_mark:E.assignment_option.pass_mark||5,upload_files_limit:E.assignment_option.upload_files_limit||1,upload_file_size_limit:E.assignment_option.upload_file_size_limit||2,content_drip_settings:{unlock_date:(E===null||E===void 0?void 0:(t=E.content_drip_settings)===null||t===void 0?void 0:t.unlock_date)||"",after_xdays_of_enroll:(E===null||E===void 0?void 0:(e=E.content_drip_settings)===null||e===void 0?void 0:e.after_xdays_of_enroll)||"",prerequisites:(E===null||E===void 0?void 0:(r=E.content_drip_settings)===null||r===void 0?void 0:r.prerequisites)||[]}},{keepDirty:false})}var n=setTimeout((function(){q.setFocus("title")}),0);return function(){clearTimeout(n)}}),[E]);var U=function(){var t=et(X().mark((function t(e){var r,n;return X().wrap((function t(a){while(1)switch(a.prev=a.next){case 0:r=(0,L.iL)(e,i,o,y);a.next=3;return x.mutateAsync(r);case 3:n=a.sent;if(n.status_code===200||n.status_code===201){c({action:"CONFIRM"})}case 5:case"end":return a.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();return(0,a.tZ)(D.Z,{onClose:function t(){return c({action:"CLOSE"})},icon:W?(0,a.tZ)(p.Z,{name:"warning",width:24,height:24}):l,title:W?N.iM.isAboveDesktop?(0,u.__)("Unsaved Changes","tutor"):"":v,subtitle:N.iM.isAboveSmallMobile?h:"",maxWidth:1070,actions:W&&(0,a.tZ)(B.Fragment,null,(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){if(i){q.reset()}else{c({action:"CLOSE"})}}},i?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{loading:x.isPending,variant:"primary",size:"small",onClick:q.handleSubmit(U)},i?(0,u.__)("Update","tutor"):(0,u.__)("Save","tutor")))},(0,a.tZ)("div",{css:at.wrapper},(0,a.tZ)(Z.Z,{when:!w.isLoading,fallback:(0,a.tZ)(f.fz,null)},(0,a.tZ)("div",null,(0,a.tZ)("div",{css:at.assignmentInfo},(0,a.tZ)(m.Qr,{name:"title",control:q.control,rules:H({required:(0,u.__)("Assignment title is required","tutor")},(0,M.T9)(255)),render:function t(e){return(0,a.tZ)(P.Z,R({},e,{label:(0,u.__)("Title","tutor"),placeholder:(0,u.__)("Enter Assignment Title","tutor"),generateWithAi:!_||b,isClearable:true,selectOnFocus:true}))}}),(0,a.tZ)(m.Qr,{name:"summary",control:q.control,render:function t(e){return(0,a.tZ)(I.Z,R({},e,{label:(0,u.__)("Content","tutor"),placeholder:(0,u.__)("Enter Assignment Content","tutor"),generateWithAi:!_||b}))}}))),(0,a.tZ)("div",{css:at.rightPanel},(0,a.tZ)(m.Qr,{name:"attachments",control:q.control,render:function t(e){return(0,a.tZ)(j.Z,R({},e,{label:(0,u.__)("Attachments","tutor"),buttonText:(0,u.__)("Upload Attachment","tutor"),selectMultiple:true}))}}),(0,a.tZ)(Z.Z,{when:(0,F.ro)(N.AO.CONTENT_DRIP)},(0,a.tZ)(Z.Z,{when:y==="specific_days"},(0,a.tZ)(m.Qr,{name:"content_drip_settings.after_xdays_of_enroll",control:q.control,render:function t(e){return(0,a.tZ)(P.Z,R({},e,{type:"number",label:(0,a.tZ)("div",{css:at.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This assignment will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.tZ)(Z.Z,{when:y==="unlock_by_date"},(0,a.tZ)(m.Qr,{name:"content_drip_settings.unlock_date",control:q.control,render:function t(e){return(0,a.tZ)(S.Z,R({},e,{label:(0,a.tZ)("div",{css:at.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This assignment will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.tZ)(Z.Z,{when:y==="after_finishing_prerequisites"},(0,a.tZ)(m.Qr,{name:"content_drip_settings.prerequisites",control:q.control,render:function t(e){return(0,a.tZ)(C.Z,R({},e,{label:(0,a.tZ)("div",{css:at.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:k.reduce((function(t,e){if(e.id===o){t.push(H(H({},e),{},{contents:e.contents.filter((function(t){return t.ID!==i}))}))}else{t.push(e)}return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))),(0,a.tZ)("div",{css:at.timeLimit},(0,a.tZ)(m.Qr,{name:"time_duration.value",control:q.control,render:function t(e){return(0,a.tZ)(P.Z,R({},e,{type:"number",label:(0,u.__)("Time Limit","tutor"),placeholder:"0",dataAttribute:"data-time-limit",selectOnFocus:true}))}}),(0,a.tZ)(m.Qr,{name:"time_duration.time",control:q.control,render:function t(e){return(0,a.tZ)(T.Z,R({},e,{options:nt,removeOptionsMinWidth:true,dataAttribute:"data-time-limit-unit"}))}})),(0,a.tZ)(m.Qr,{name:"total_mark",control:q.control,render:function t(e){return(0,a.tZ)(P.Z,R({},e,{type:"number",label:(0,u.__)("Total Points","tutor"),placeholder:"0",selectOnFocus:true}))}}),(0,a.tZ)(m.Qr,{name:"pass_mark",control:q.control,rules:{validate:function t(e){if(Number(e)>Number(q.getValues("total_mark"))){return(0,u.__)("Pass mark cannot be greater than total mark","tutor")}return true}},render:function t(e){return(0,a.tZ)(P.Z,R({},e,{type:"number",label:(0,u.__)("Minimum Pass Points","tutor"),placeholder:"0",selectOnFocus:true}))}}),(0,a.tZ)(m.Qr,{name:"upload_files_limit",control:q.control,render:function t(e){return(0,a.tZ)(P.Z,R({},e,{placeholder:"0",type:"number",label:(0,u.__)("File Upload Limit","tutor"),helpText:(0,u.__)("Define the number of files that a student can upload in this assignment. Input 0 to disable the option to upload.","tutor"),selectOnFocus:true}))}}),(0,a.tZ)(m.Qr,{name:"upload_file_size_limit",control:q.control,render:function t(e){return(0,a.tZ)(A.Z,R({},e,{type:"number",label:(0,u.__)("Maximum File Size Limit","tutor"),placeholder:"0",content:(0,u.__)("MB","tutor"),contentPosition:"right"}))}})))))};const ot=it;var at={wrapper:(0,a.iv)("margin:0 auto;display:grid;grid-template-columns:1fr 338px;width:100%;height:100%;padding-inline:",U.W0[32],";",U.Uo.smallTablet,"{grid-template-columns:1fr;padding-inline:",U.W0[24],";}",U.Uo.mobile,"{padding-inline:",U.W0[16],";}"+(true?"":0),true?"":0),assignmentInfo:(0,a.iv)("padding-block:",U.W0[24],";padding-right:",U.W0[32],";display:flex;flex-direction:column;gap:",U.W0[24],";position:sticky;top:0;z-index:",U.W5.positive,";",U.Uo.smallTablet,"{position:unset;padding-right:0;}"+(true?"":0),true?"":0),rightPanel:(0,a.iv)("border-left:1px solid ",U.Jv.stroke.divider,";display:flex;flex-direction:column;gap:",U.W0[16],";padding-block:",U.W0[24],";padding-left:",U.W0[32],";",U.Uo.smallTablet,"{border-left:none;padding-left:0;}"+(true?"":0),true?"":0),timeLimit:(0,a.iv)("display:grid;align-items:end;grid-template-columns:1fr 100px;& input{border:1px solid ",U.Jv.stroke["default"],";&[data-time-limit]{border-radius:",U.E0[6]," 0 0 ",U.E0[6],";border-right:none;&:focus{border-right:1px solid ",U.Jv.stroke["default"],";z-index:",U.W5.positive,";}}&[data-time-limit-unit]{border-radius:0 ",U.E0[6]," ",U.E0[6]," 0;}}"+(true?"":0),true?"":0),uploadAttachment:(0,a.iv)("display:flex;flex-direction:column;gap:",U.W0[8],";"+(true?"":0),true?"":0),uploadLabel:(0,a.iv)(J.c.body()," color:",U.Jv.text.title,";"+(true?"":0),true?"":0),contentDripLabel:(0,a.iv)("display:flex;align-items:center;svg{margin-right:",U.W0[4],";color:",U.Jv.icon.success,";}"+(true?"":0),true?"":0)};var ut=r(5043);var st=r(4857);var ct=r(830);var lt=r(4436);var dt=r(125);var ft=r(9546);var pt=r(1060);var vt=r(5056);var ht=r(249);var yt=r(8551);var gt=r(7307);var mt=r(3603);function _t(t){"@babel/helpers - typeof";return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function bt(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=wt(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function t(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,a=false,u;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();o=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!o&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function wt(t,e){if(!t)return;if(typeof t==="string")return Zt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zt(t,e)}function Zt(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(r),!0).forEach((function(e){Et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Et(t,e,r){e=kt(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function kt(t){var e=qt(t,"string");return _t(e)==="symbol"?e:String(e)}function qt(t,e){if(_t(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(_t(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var St={NEW:"new",UPDATE:"update",NO_CHANGE:"no_change"};var jt=function t(e){var r=function t(e){if(e.image_url){return e.answer_view_format==="text_image"?St.NO_CHANGE:St.UPDATE}return e.answer_view_format==="text"?St.NO_CHANGE:St.UPDATE};var n=function t(e){if(e.question_settings){e.question_settings.answer_required=!!Number(e.question_settings.answer_required);e.question_settings.show_question_mark=!!Number(e.question_settings.show_question_mark);e.question_settings.randomize_options=!!Number(e.question_settings.randomize_options)}e.question_answers=e.question_answers.map((function(t){return Ot(Ot({},t),{},{_data_status:r(t),is_saved:true,answer_view_format:t.image_url?"text_image":"text"})}));e.question_description=(0,F.qH)(e.question_description)||"";e.answer_explanation=e.answer_explanation==='<p><br data-mce-bogus="1"></p>'?"":(0,F.qH)(e.answer_explanation)||"";switch(e.question_type){case"single_choice":{return Ot(Ot({},e),{},{_data_status:St.UPDATE,question_type:"multiple_choice",question_answers:e.question_answers.map((function(t){return Ot(Ot({},t),{},{_data_status:St.UPDATE})})),question_settings:Ot(Ot({},e.question_settings),{},{question_type:"multiple_choice",has_multiple_correct_answer:false})})}case"multiple_choice":{return Ot(Ot({},e),{},{_data_status:e.question_settings.has_multiple_correct_answer?St.NO_CHANGE:St.UPDATE,question_settings:Ot(Ot({},e.question_settings),{},{has_multiple_correct_answer:e.question_settings.has_multiple_correct_answer?!!Number(e.question_settings.has_multiple_correct_answer):true})})}case"matching":{return Ot(Ot({},e),{},{_data_status:e.question_settings.is_image_matching?St.NO_CHANGE:St.UPDATE,question_settings:Ot(Ot({},e.question_settings),{},{is_image_matching:e.question_settings.is_image_matching?!!Number(e.question_settings.is_image_matching):false})})}case"image_matching":{return Ot(Ot({},e),{},{_data_status:St.UPDATE,question_type:"matching",question_answers:e.question_answers.map((function(t){return Ot(Ot({},t),{},{_data_status:St.UPDATE})})),question_settings:Ot(Ot({},e.question_settings),{},{question_type:"matching",is_image_matching:true})})}default:return Ot(Ot({},e),{},{_data_status:St.NO_CHANGE})}};return{ID:e.ID,_data_status:St.NO_CHANGE,quiz_title:e.post_title||"",quiz_description:e.post_content||"",quiz_option:{time_limit:{time_value:e.quiz_option.time_limit.time_value||0,time_type:e.quiz_option.time_limit.time_type||"minutes"},hide_quiz_time_display:e.quiz_option.hide_quiz_time_display==="1",feedback_mode:e.quiz_option.feedback_mode||"retry",attempts_allowed:e.quiz_option.attempts_allowed||10,pass_is_required:e.quiz_option.pass_is_required==="1",passing_grade:e.quiz_option.passing_grade||80,max_questions_for_answer:e.quiz_option.max_questions_for_answer||10,quiz_auto_start:e.quiz_option.quiz_auto_start==="1",question_layout_view:e.quiz_option.question_layout_view||"",questions_order:e.quiz_option.questions_order||"rand",hide_question_number_overview:e.quiz_option.hide_question_number_overview==="1",short_answer_characters_limit:e.quiz_option.short_answer_characters_limit||200,open_ended_answer_characters_limit:e.quiz_option.open_ended_answer_characters_limit||500,content_drip_settings:e.quiz_option.content_drip_settings||{unlock_date:"",after_xdays_of_enroll:0,prerequisites:[]}},questions:(e.questions||[]).map((function(t){return n(t)})),deleted_question_ids:[],deleted_answer_ids:[]}};var Pt=function t(e,r,n,i){return Ot(Ot(Ot({course_id:i,topic_id:r,payload:{ID:e.ID,_data_status:e._data_status,post_title:e.quiz_title,post_content:e.quiz_description,quiz_option:Ot(Ot(Ot({attempts_allowed:e.quiz_option.attempts_allowed,feedback_mode:e.quiz_option.feedback_mode,hide_question_number_overview:e.quiz_option.hide_question_number_overview?"1":"0",hide_quiz_time_display:e.quiz_option.hide_quiz_time_display?"1":"0",max_questions_for_answer:(0,F.ro)(N.AO.H5P_INTEGRATION)&&e.questions.every((function(t){return t.question_type==="h5p"}))?e.questions.length:e.quiz_option.max_questions_for_answer,open_ended_answer_characters_limit:e.quiz_option.open_ended_answer_characters_limit,pass_is_required:e.quiz_option.pass_is_required?"1":"0",passing_grade:e.quiz_option.passing_grade,question_layout_view:e.quiz_option.question_layout_view,questions_order:e.quiz_option.questions_order,quiz_auto_start:e.quiz_option.quiz_auto_start?"1":"0",short_answer_characters_limit:e.quiz_option.short_answer_characters_limit,time_limit:{time_type:e.quiz_option.time_limit.time_type,time_value:e.quiz_option.time_limit.time_value}},(0,F.ro)(N.AO.CONTENT_DRIP)&&n==="unlock_sequentially"&&e.quiz_option.feedback_mode==="retry"&&{pass_is_required:e.quiz_option.pass_is_required?"1":"0"}),(0,F.ro)(N.AO.CONTENT_DRIP)&&{content_drip_settings:Ot(Ot(Ot({},n==="unlock_by_date"&&{unlock_date:e.quiz_option.content_drip_settings.unlock_date}),n==="specific_days"&&{after_xdays_of_enroll:e.quiz_option.content_drip_settings.after_xdays_of_enroll}),n==="after_finishing_prerequisites"&&{prerequisites:e.quiz_option.content_drip_settings.prerequisites})}),(0,F.ro)(N.AO.H5P_INTEGRATION)&&e.questions.every((function(t){return t.question_type==="h5p"}))&&{quiz_type:"tutor_h5p_quiz"}),questions:e.questions.map((function(t){return Ot(Ot({_data_status:t._data_status,question_id:t.question_id,question_title:t.question_title,question_description:t.question_description,question_mark:t.question_settings.question_mark},!!z.y.tutor_pro_url&&{answer_explanation:t.answer_explanation}),{},{question_type:t.question_type,question_order:t.question_order,question_settings:Ot(Ot({answer_required:t.question_settings.answer_required?"1":"0",question_mark:t.question_settings.question_mark,question_type:t.question_type,randomize_options:t.question_settings.randomize_options?"1":"0",show_question_mark:t.question_settings.show_question_mark?"1":"0"},t.question_type==="multiple_choice"&&{has_multiple_correct_answer:t.question_settings.has_multiple_correct_answer?"1":"0"}),t.question_type==="matching"&&{is_image_matching:t.question_settings.is_image_matching?"1":"0"}),question_answers:t.question_answers.map((function(e){return{_data_status:e._data_status,answer_id:e.answer_id,belongs_question_id:t.question_id,belongs_question_type:t.question_type,answer_title:e.answer_title,is_correct:e.is_correct,image_id:t.question_type==="matching"&&!t.question_settings.is_image_matching?"":e.image_id,image_url:t.question_type==="matching"&&!t.question_settings.is_image_matching?"":e.image_url,answer_two_gap_match:e.answer_two_gap_match,answer_view_format:e.answer_view_format,answer_order:e.answer_order}}))})}))},deleted_question_ids:e.deleted_question_ids,deleted_answer_ids:e.deleted_answer_ids},(0,F.ro)(N.AO.CONTENT_DRIP)&&n==="unlock_by_date"&&{"content_drip_settings[unlock_date]":e.quiz_option.content_drip_settings.unlock_date}),(0,F.ro)(N.AO.CONTENT_DRIP)&&n==="specific_days"&&{"content_drip_settings[after_xdays_of_enroll]":e.quiz_option.content_drip_settings.after_xdays_of_enroll}),(0,F.ro)(N.AO.CONTENT_DRIP)&&n==="after_finishing_prerequisites"&&{"content_drip_settings[prerequisites]":e.quiz_option.content_drip_settings.prerequisites})};var At=function t(e){return{question_id:e.question_id,question_title:e.question_title,question_description:e.question_description,question_type:e.question_type,question_mark:e.question_mark,answer_explanation:e.answer_explanation,"question_settings[question_type]":e.question_type,"question_settings[answer_required]":e.question_settings.answer_required?1:0,"question_settings[question_mark]":e.question_mark}};var Tt=function t(e){return gt.R.post(mt.Z.QUIZ_IMPORT_DATA,e)};var Ct=function t(){var e=(0,g.NL)();var r=(0,b.p)(),n=r.showToast;return(0,ht.D)({mutationFn:Tt,onSuccess:function t(r){if(r.success){e.invalidateQueries({queryKey:["Topic"]});n({message:(0,u.__)("Quiz imported successfully","tutor"),type:"success"})}else{n({message:r.data.message,type:"danger"})}},onError:function t(e){n({message:(0,F.Mo)(e),type:"danger"})}})};var It=function t(e){return gt.R.post(mt.Z.QUIZ_EXPORT_DATA,{quiz_id:e})};var Dt=function t(){var e=(0,b.p)(),r=e.showToast;return(0,ht.D)({mutationFn:It,onSuccess:function t(e){if(!e.success){r({message:(0,u.__)("Something went wrong.","tutor"),type:"danger"});return}var n="";var i=bt(e.data.output_quiz_data),o;try{for(i.s();!(o=i.n()).done;){var a=o.value;var s=a.join(",");n+="".concat(s,"\r\n")}}catch(t){i.e(t)}finally{i.f()}var c=new Blob([n],{type:"text/csv"});var l=window.webkitURL.createObjectURL(c);var d=document.createElement("a");d.setAttribute("href",l);d.setAttribute("download","tutor-quiz-".concat(e.data.title,".csv"));document.body.appendChild(d);d.click()},onError:function t(e){r({message:(0,F.Mo)(e),type:"danger"})}})};var Lt=function t(e){return gt.R.post(mt.Z.SAVE_QUIZ,e)};var Wt=function t(){var e=(0,g.NL)();var r=(0,b.p)(),n=r.showToast;return(0,ht.D)({mutationFn:Lt,onSuccess:function t(r){if(r.data){e.setQueryData(["Quiz",r.data.ID],r.data);e.invalidateQueries({queryKey:["Topic"]});n({message:(0,u.__)(r.message,"tutor"),type:"success"})}},onError:function t(e){n({message:(0,F.Mo)(e),type:"danger"})}})};var zt=function t(e){return gt.R.get(mt.Z.GET_QUIZ_DETAILS,{params:{quiz_id:e}})};var Nt=function t(e){return(0,yt.a)({queryKey:["Quiz",e],queryFn:function t(){return zt(e).then((function(t){return t.data}))},enabled:!!e})};var Ut=function t(e,r){if(r===e){return null}if(e===St.NEW){return St.NEW}if((e===St.UPDATE||e===St.NO_CHANGE)&&r===St.UPDATE){return St.UPDATE}return St.NO_CHANGE};var Jt=function t(e){return gt.R.post(mt.Z.GET_H5P_QUIZ_CONTENT,{search_filter:e})};var Qt=function t(e,r){return(0,yt.a)({queryKey:["H5PQuizContents",e],queryFn:function t(){return Jt(e).then((function(t){return t.data}))},enabled:r==="tutor_h5p_quiz"})};var Ft=function t(e){return wpAjaxInstance.post(endpoints.GET_H5P_QUIZ_CONTENT_BY_ID,{content_id:e}).then((function(t){return t.data}))};var Mt=function t(e,r){return useQuery({queryKey:["H5PQuizContent",e],queryFn:function t(){return Ft(e)},enabled:!!e&&r==="tutor_h5p_quiz"})};var Bt=function t(e){return gt.R.post(mt.Z.DELETE_QUIZ,{quiz_id:e})};var Gt=function t(){var e=(0,g.NL)();var r=(0,b.p)(),n=r.showToast;return(0,ht.D)({mutationFn:Bt,onSuccess:function t(r){if(r.status_code===200){n({message:(0,u.__)(r.message,"tutor"),type:"success"});e.invalidateQueries({queryKey:["Topic"]})}},onError:function t(e){n({message:(0,F.Mo)(e),type:"danger"})}})};var Rt=r(6074);var Vt=r(5340);function Ht(){Ht=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Ht.apply(this,arguments)}function Kt(t){return Xt(t)||$t(t)||re(t)||Yt()}function Yt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $t(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xt(t){if(Array.isArray(t))return ne(t)}function te(t,e){return oe(t)||ie(t,e)||re(t,e)||ee()}function ee(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function re(t,e){if(!t)return;if(typeof t==="string")return ne(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ne(t,e)}function ne(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ie(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function oe(t){if(Array.isArray(t))return t}var ae=function t(e){var r=e.title,n=e.closeModal,i=e.onAddContent,o=e.contentType,c=e.addedContentIds,l=c===void 0?[]:c;var f=(0,Q.O)({defaultValues:{search:""}});var v=(0,Vt.N)(f.watch("search"),300);var h=Qt(v,o);var y=(0,L.ri)(v,o);var g=(0,s.useState)([]),_=te(g,2),b=_[0],w=_[1];var x=o==="tutor_h5p_quiz"?h.data:y.data;var O=x===null||x===void 0?void 0:x.output.filter((function(t){return!l.includes(String(t.id))}));var E=[{Header:(0,a.tZ)("div",{"data-index":true,css:se.tableLabel},O!==null&&O!==void 0&&O.length?(0,a.tZ)(Rt.Z,{onChange:function t(e){if(e){w((O===null||O===void 0?void 0:O.filter((function(t){return!l.includes(String(t.id))})))||[])}else{w([])}},checked:b.length===((O===null||O===void 0?void 0:O.filter((function(t){return!l.includes(String(t.id))})))||[]).length,isIndeterminate:b.length>0&&b.length<((O===null||O===void 0?void 0:O.filter((function(t){return!l.includes(String(t.id))})))||[]).length}):"#"),Cell:function t(e){return(0,a.tZ)("div",{css:J.c.caption()},(0,a.tZ)(Rt.Z,{onChange:function t(r){if(r){w([].concat(Kt(b),[e]))}else{w(b.filter((function(t){return t.id!==e.id})))}},checked:b.map((function(t){return t.id})).includes(e.id)&&!l.includes(String(e.id))}))}},{Header:(0,a.tZ)("div",{css:se.tableLabel},(0,u.__)("Title","tutor")),Cell:function t(e){return(0,a.tZ)("div",{css:se.title},e.title)}},{Header:(0,a.tZ)("div",{css:se.tableLabel},(0,u.__)("Content Type","tutor")),Cell:function t(e){return(0,a.tZ)("div",{css:J.c.caption()},e.content_type)}},{Header:(0,a.tZ)("div",{css:se.tableLabel},(0,u.__)("Created At","tutor")),Cell:function t(e){return(0,a.tZ)("div",{css:J.c.caption()},(0,ft["default"])(new Date(e.updated_at),N.E_.yearMonthDayHourMinuteSecond))}}];(0,s.useEffect)((function(){document.body.style.overflow="hidden";return function(){document.body.style.overflow="auto"}}),[]);return(0,a.tZ)(vt.Z,{title:b.length>0?(0,u.sprintf)((0,u.__)("%s  selected","tutor"),b.length):r,onClose:function t(){return n({action:"CLOSE"})},maxWidth:920},(0,a.tZ)("div",{css:se.searchWrapper},(0,a.tZ)(m.Qr,{control:f.control,name:"search",render:function t(e){return(0,a.tZ)(A.Z,Ht({},e,{placeholder:(0,u.__)("Search by title","tutor"),showVerticalBar:false,content:(0,a.tZ)(p.Z,{name:"search",width:24,height:24})}))}})),(0,a.tZ)("div",{css:se.tableWrapper},(0,a.tZ)(pt.Z,{columns:E,data:O||[],loading:h.isLoading||y.isLoading})),(0,a.tZ)(Z.Z,{when:O===null||O===void 0?void 0:O.length},(0,a.tZ)("div",{css:se.footer},(0,a.tZ)(d.Z,{size:"small",variant:"text",onClick:function t(){return n({action:"CLOSE"})}},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{type:"submit",size:"small",variant:"primary",onClick:function t(){i(b);n({action:"CONFIRM"})},disabled:!b.length},(0,u.__)("Add","tutor")))))};const ue=ae;var se={searchWrapper:(0,a.iv)("display:flex;padding:",U.W0[20],";"+(true?"":0),true?"":0),tableWrapper:(0,a.iv)("max-height:calc(100vh - 350px);overflow:auto;tr{td:first-of-type{padding-left:",U.W0[20],";}td:last-of-type{padding-right:",U.W0[20],";}}"+(true?"":0),true?"":0),tableLabel:(0,a.iv)(J.c.body("medium"),";text-align:left;color:",U.Jv.text.primary,";&[data-index]{padding-left:",U.W0[4],";}"+(true?"":0),true?"":0),title:(0,a.iv)(dt.i.text.ellipsis(2)," width:100%;text-align:left;",J.c.caption(),";min-width:340px;max-width:400px;"+(true?"":0),true?"":0),footer:(0,a.iv)("box-shadow:",U.AF.dividerTop,";height:56px;display:flex;align-items:center;justify-content:end;gap:",U.W0[16],";padding-inline:",U.W0[16],";"+(true?"":0),true?"":0)};var ce=r(7363);function le(t){"@babel/helpers - typeof";return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function de(){de=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return de.apply(this,arguments)}function fe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(r),!0).forEach((function(e){ve(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ve(t,e,r){e=he(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function he(t){var e=ye(t,"string");return le(e)==="symbol"?e:String(e)}function ye(t,e){if(le(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(le(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ge(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ge=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==le(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function me(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function _e(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){me(o,n,i,a,u,"next",t)}function u(t){me(o,n,i,a,u,"throw",t)}a(undefined)}))}}function be(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var we=(0,W.zs)();var Ze=function t(e){var r,n;var i=e.lessonId,o=i===void 0?"":i,c=e.topicId,l=e.closeModal,v=e.icon,h=e.title,y=e.subtitle,b=e.contentDripType;var x=!!z.y.tutor_pro_url;var O=((r=z.y.settings)===null||r===void 0?void 0:r.chatgpt_enable)==="on";var E=z.y.enable_lesson_classic_editor==="1";var k=((n=z.y.settings)===null||n===void 0?void 0:n.hide_admin_bar_for_users)==="off";var q=z.y.current_user.roles.includes(N.er.ADMINISTRATOR);var T=z.y.current_user.roles.includes(N.er.TUTOR_INSTRUCTOR);var W=E&&(q||T&&k);var U=(0,L.yO)(o,c);var J=(0,L.G4)(we);var B=(0,g.NL)();var G=(0,w.d)(),R=G.showModal;var V=U.data,H=U.isLoading;var K=B.getQueryData(["Topic",we]);var Y=(0,Q.O)({defaultValues:{title:"",description:"",thumbnail:null,tutor_attachments:[],lesson_preview:false,video:null,duration:{hour:0,minute:0,second:0},content_drip_settings:{unlock_date:"",after_xdays_of_enroll:"",prerequisites:[]}},shouldFocusError:true,mode:"onChange"});var $=Y.formState.isDirty;(0,s.useEffect)((function(){if(V&&!H){var t,e,r,n,i,o;Y.reset({title:V.post_title||"",description:(0,F.qH)(V.post_content)||"",thumbnail:{id:V.thumbnail_id?Number(V.thumbnail_id):0,title:"",url:V.thumbnail||""},tutor_attachments:V.attachments||[],lesson_preview:V.is_preview||false,video:V.video||null,duration:{hour:((t=V.video.runtime)===null||t===void 0?void 0:t.hours)||0,minute:((e=V.video.runtime)===null||e===void 0?void 0:e.minutes)||0,second:((r=V.video.runtime)===null||r===void 0?void 0:r.seconds)||0},content_drip_settings:{unlock_date:(V===null||V===void 0?void 0:(n=V.content_drip_settings)===null||n===void 0?void 0:n.unlock_date)||"",after_xdays_of_enroll:(V===null||V===void 0?void 0:(i=V.content_drip_settings)===null||i===void 0?void 0:i.after_xdays_of_enroll)||"",prerequisites:(V===null||V===void 0?void 0:(o=V.content_drip_settings)===null||o===void 0?void 0:o.prerequisites)||[]}})}var a=document.querySelector(".button.insert-media.add_media");var u=document.querySelector(".add-h5p-content-button");if(a&&u){a.after(u)}var s=setTimeout((function(){Y.setFocus("title")}),0);return function(){clearTimeout(s)}}),[V,H]);var X=function(){var t=_e(ge().mark((function t(e){var r,n;return ge().wrap((function t(i){while(1)switch(i.prev=i.next){case 0:r=(0,L.SF)(e,o,c,b);i.next=3;return J.mutateAsync(r);case 3:n=i.sent;if(n.data){l({action:"CONFIRM"})}case 5:case"end":return i.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();var tt=function t(){var e=Y.getValues("description");var r=e.match(/\[h5p id="(\d+)"\]/g)||[];var n=r.map((function(t){var e;var r=((e=t.match(/\[h5p id="(\d+)"\]/))===null||e===void 0?void 0:e[1])||"";return String(r)}));var i=function t(r){var n=function t(e){return'[h5p id="'.concat(e.id,'"]')};var i=r.map(n);Y.setValue("description","".concat(e,"\n").concat(i.join("\n")),{shouldDirty:true})};R({component:ue,props:{title:(0,u.__)("Select H5P Content","tutor"),onAddContent:i,contentType:"lesson",addedContentIds:n}})};return(0,a.tZ)(D.Z,{onClose:function t(){return l({action:"CLOSE"})},icon:$?(0,a.tZ)(p.Z,{name:"warning",width:24,height:24}):v,title:$?N.iM.isAboveDesktop?(0,u.__)("Unsaved Changes","tutor"):"":h,subtitle:N.iM.isAboveSmallMobile?y:"",maxWidth:1070,actions:$&&(0,a.tZ)(ce.Fragment,null,(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){if(o){Y.reset()}else{l({action:"CLOSE"})}}},o?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{loading:J.isPending,variant:"primary",size:"small",onClick:Y.handleSubmit(X)},o?(0,u.__)("Update","tutor"):(0,u.__)("Save","tutor")))},(0,a.tZ)("div",{css:Oe.wrapper},(0,a.tZ)(Z.Z,{when:!U.isLoading,fallback:(0,a.tZ)(f.fz,null)},(0,a.tZ)("div",null,(0,a.tZ)("div",{css:Oe.lessonInfo},(0,a.tZ)(m.Qr,{name:"title",control:Y.control,rules:pe({required:(0,u.__)("Lesson title is required.","tutor")},(0,M.T9)(255)),render:function t(e){return(0,a.tZ)(P.Z,de({},e,{label:(0,u.__)("Name","tutor"),placeholder:(0,u.__)("Enter Lesson Name","tutor"),generateWithAi:!x||O,selectOnFocus:true,isClearable:true}))}}),(0,a.tZ)("div",{css:Oe.description},(0,a.tZ)(m.Qr,{name:"description",control:Y.control,render:function t(e){return(0,a.tZ)(I.Z,de({},e,{label:(0,a.tZ)("div",{css:Oe.descriptionLabel},(0,u.__)("Content","tutor"),(0,a.tZ)(Z.Z,{when:W},(0,a.tZ)(ut.Z,{content:(0,u.__)("Save the lesson first to use the WP Editor.","tutor"),delay:200,disabled:!!o},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){window.open("".concat(z.y.site_url,"/wp-admin/post.php?post=").concat(o,"&action=edit"),"_blank","noopener")},icon:(0,a.tZ)(p.Z,{name:"edit",width:24,height:24}),buttonCss:Oe.wpEditorButton,disabled:!o},(0,u.__)("WP Editor","tutor"))))),placeholder:(0,u.__)("Enter Lesson Description","tutor"),generateWithAi:!x||O}))}}),(0,a.tZ)(Z.Z,{when:x&&(0,F.ro)(N.AO.H5P_INTEGRATION),fallback:(0,a.tZ)(Z.Z,{when:!x},(0,a.tZ)("button",{css:Oe.addH5PContentButton({isPro:false}),type:"reset",className:"add-h5p-content-button",disabled:true},(0,a.tZ)(_.Z,null,(0,a.tZ)("div",{"data-button-text":true},(0,u.__)("Add H5P Content","tutor")))))},(0,a.tZ)("button",{className:"add-h5p-content-button",css:Oe.addH5PContentButton,type:"button",onClick:tt},(0,u.__)("Add H5P Content","tutor")))))),(0,a.tZ)("div",{css:Oe.rightPanel},(0,a.tZ)(m.Qr,{name:"thumbnail",control:Y.control,render:function t(e){return(0,a.tZ)(st.Z,de({},e,{label:(0,u.__)("Featured Image","tutor"),buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.sprintf)((0,u.__)("JPEG, PNG, GIF, and WebP formats, up to %s","tutor"),z.y.max_upload_size)}))}}),(0,a.tZ)(m.Qr,{name:"video",control:Y.control,render:function t(e){return(0,a.tZ)(lt.Z,de({},e,{label:(0,u.__)("Video","tutor"),buttonText:(0,u.__)("Upload Video","tutor"),infoText:(0,u.sprintf)((0,u.__)("MP4, and WebM formats, up to %s","tutor"),z.y.max_upload_size),onGetDuration:function t(e){Y.setValue("duration.hour",e.hours);Y.setValue("duration.minute",e.minutes);Y.setValue("duration.second",e.seconds)}}))}}),(0,a.tZ)("div",{css:Oe.durationWrapper},(0,a.tZ)("span",{css:Oe.additionLabel},(0,u.__)("Video Playback Time","tutor")),(0,a.tZ)("div",{css:Oe.duration},(0,a.tZ)(m.Qr,{name:"duration.hour",control:Y.control,render:function t(e){return(0,a.tZ)(A.Z,de({},e,{type:"number",content:(0,a.tZ)("span",{css:Oe.durationContent},(0,u.__)("hour","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false}))}}),(0,a.tZ)(m.Qr,{name:"duration.minute",control:Y.control,render:function t(e){return(0,a.tZ)(A.Z,de({},e,{type:"number",content:(0,a.tZ)("span",{css:Oe.durationContent},(0,u.__)("min","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false}))}}),(0,a.tZ)(m.Qr,{name:"duration.second",control:Y.control,render:function t(e){return(0,a.tZ)(A.Z,de({},e,{type:"number",content:(0,a.tZ)("span",{css:Oe.durationContent},(0,u.__)("sec","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false}))}}))),(0,a.tZ)(Z.Z,{when:(0,F.ro)(N.AO.CONTENT_DRIP)},(0,a.tZ)(Z.Z,{when:b==="specific_days"},(0,a.tZ)(m.Qr,{name:"content_drip_settings.after_xdays_of_enroll",control:Y.control,render:function t(e){return(0,a.tZ)(P.Z,de({},e,{type:"number",label:(0,a.tZ)("div",{css:Oe.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This lesson will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.tZ)(Z.Z,{when:b==="unlock_by_date"},(0,a.tZ)(m.Qr,{name:"content_drip_settings.unlock_date",control:Y.control,render:function t(e){return(0,a.tZ)(S.Z,de({},e,{label:(0,a.tZ)("div",{css:Oe.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This lesson will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.tZ)(Z.Z,{when:b==="after_finishing_prerequisites"},(0,a.tZ)(m.Qr,{name:"content_drip_settings.prerequisites",control:Y.control,render:function t(e){return(0,a.tZ)(C.Z,de({},e,{label:(0,a.tZ)("div",{css:Oe.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:K.reduce((function(t,e){if(e.id===c){t.push(pe(pe({},e),{},{contents:e.contents.filter((function(t){return t.ID!==o}))}))}else{t.push(e)}return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))),(0,a.tZ)(m.Qr,{name:"tutor_attachments",control:Y.control,render:function t(e){return(0,a.tZ)(j.Z,de({},e,{label:(0,u.__)("Exercise Files","tutor"),buttonText:(0,u.__)("Upload Attachment","tutor"),selectMultiple:true}))}}),(0,a.tZ)(Z.Z,{when:!x||(0,F.ro)(N.AO.TUTOR_COURSE_PREVIEW)},(0,a.tZ)("div",{css:Oe.lessonPreview},(0,a.tZ)(m.Qr,{name:"lesson_preview",control:Y.control,render:function t(e){return(0,a.tZ)(ct.Z,de({},e,{disabled:!x,label:(0,a.tZ)("div",{css:Oe.previewLabel},(0,u.__)("Lesson Preview","tutor"),!x&&(0,a.tZ)(_.Z,{size:"small",content:(0,u.__)("Pro","tutor")})),helpText:(0,u.__)("If checked, any user/guest can view this lesson without enrolling in the course.","tutor")}))}}),(0,a.tZ)(Z.Z,{when:Y.watch("lesson_preview")},(0,a.tZ)("div",{css:Oe.previewInfo},(0,u.__)("This lesson is now available for preview. Users and guests can view it without enrolling in the course.","tutor")))))))))};const xe=Ze;var Oe={wrapper:(0,a.iv)("margin:0 auto;display:grid;grid-template-columns:1fr 338px;height:100%;width:100%;padding-inline:",U.W0[32],";",U.Uo.smallTablet,"{grid-template-columns:1fr;padding-inline:",U.W0[24],";}",U.Uo.mobile,"{padding-inline:",U.W0[16],";}"+(true?"":0),true?"":0),lessonInfo:(0,a.iv)("padding-block:",U.W0[20],";padding-right:",U.W0[32],";display:flex;flex-direction:column;gap:",U.W0[24],";position:sticky;top:0;z-index:",U.W5.positive,";",U.Uo.smallTablet,"{position:unset;padding-right:0;}"+(true?"":0),true?"":0),description:true?{name:"bjn8wh",styles:"position:relative"}:0,descriptionLabel:true?{name:"188e2n4",styles:"display:flex;align-items:center;justify-content:space-between;height:32px"}:0,addH5PContentButton:function t(e){var r=e.isPro,n=r===void 0?true:r;return(0,a.iv)("text-decoration:none;font-size:13px;line-height:2.15384615;min-height:30px;margin:0;padding:",!n?"0px":"0 10px",";cursor:pointer;border:1px solid #3e64de;border-radius:3px;white-space:nowrap;box-sizing:border-box;color:#3e64de;border-color:#3e64de;background:transparent;[data-button-text]{",dt.i.flexCenter(),";padding:0 10px;}:hover:not(:disabled){background:",U.Jv.background.white,";}:disabled{cursor:not-allowed;position:relative;top:auto;left:auto;opacity:0.5;}"+(true?"":0),true?"":0)},rightPanel:(0,a.iv)("border-left:1px solid ",U.Jv.stroke.divider,";display:flex;flex-direction:column;gap:",U.W0[16],";padding-block:",U.W0[20],";padding-left:",U.W0[32],";",U.Uo.smallTablet,"{border-left:none;padding-left:0;}"+(true?"":0),true?"":0),durationWrapper:(0,a.iv)("display:flex;flex-direction:column;gap:",U.W0[8],";"+(true?"":0),true?"":0),duration:(0,a.iv)("display:flex;align-items:flex-end;gap:",U.W0[8],";"+(true?"":0),true?"":0),durationContent:(0,a.iv)(J.c.small(),";color:",U.Jv.text.hints,";"+(true?"":0),true?"":0),additionLabel:(0,a.iv)(J.c.body()," color:",U.Jv.text.title,";"+(true?"":0),true?"":0),lessonPreview:(0,a.iv)("background-color:",U.Jv.background.white,";padding:",U.W0[12],";border:1px solid ",U.Jv.stroke["default"],";border-radius:",U.E0[8],";"+(true?"":0),true?"":0),previewLabel:(0,a.iv)("display:flex;align-items:center;gap:",U.W0[4],";"+(true?"":0),true?"":0),contentDripLabel:(0,a.iv)("display:flex;align-items:center;svg{margin-right:",U.W0[4],";color:",U.Jv.icon.success,";}"+(true?"":0),true?"":0),previewInfo:(0,a.iv)(J.c.small(),";text-align:center;color:",U.Jv.text.title,";padding:",U.W0[8]," ",U.W0[24],";background:",U.Jv.background.status.success,";border-radius:",U.E0[4],";margin-top:",U.W0[12],";"+(true?"":0),true?"":0),wpEditorButton:(0,a.iv)("margin-left:",U.W0[4],";color:",U.Jv.text.brand,";svg{color:",U.Jv.icon.brand,";}&:hover:not(:disabled){text-decoration:underline;}"+(true?"":0),true?"":0)};var Ee=r(8898);var ke=r(1933);var qe=r(6895);function Se(t,e){return Ce(t)||Te(t,e)||Pe(t,e)||je()}function je(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pe(t,e){if(!t)return;if(typeof t==="string")return Ae(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(t,e)}function Ae(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Te(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Ce(t){if(Array.isArray(t))return t}var Ie=(0,s.createContext)(null);var De=function t(){var e=(0,s.useContext)(Ie);if(!e){throw new Error("useQuizModalContext must be used within a QuizModalContextProvider")}return e};var Le=function t(e){var r=e.children,n=e.quizId,i=e.contentType,o=e.validationError;var u=(0,s.useState)(""),c=Se(u,2),l=c[0],d=c[1];var f=(0,m.Gc)();var p=f.watch("questions")||[];var v=(0,s.useRef)(p);var h=(0,s.useState)(o||null),y=Se(h,2),g=y[0],_=y[1];var b=p.findIndex((function(t){return t.question_id===l}));(0,s.useEffect)((function(){if(p.length===0){d("")}else if(v.current.length!==0&&v.current.length<p.length){var t=p.find((function(t){return!v.current.some((function(e){return String(e.question_id)===String(t.question_id)}))}));d((t===null||t===void 0?void 0:t.question_id)||"")}else if(b===-1){d(p[0].question_id)}v.current=p}),[p.length]);(0,s.useEffect)((function(){if(b===-1&&l){d("")}}),[b,l]);return(0,a.tZ)(Ie.Provider,{value:{activeQuestionIndex:b,activeQuestionId:l,setActiveQuestionId:d,quizId:n,validationError:g,setValidationError:_,contentType:i}},typeof r==="function"?r({activeQuestionIndex:b,activeQuestionId:l,setActiveQuestionId:d,setValidationError:_}):r)};function We(t){"@babel/helpers - typeof";return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function ze(){ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return ze.apply(this,arguments)}function Ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ue(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(r),!0).forEach((function(e){Je(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Je(t,e,r){e=Qe(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Qe(t){var e=Fe(t,"string");return We(e)==="symbol"?e:String(e)}function Fe(t,e){if(We(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(We(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Me(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Be={true_false:{label:(0,u.__)("True/False","tutor"),icon:"quizTrueFalse"},multiple_choice:{label:(0,u.__)("Multiple Choice","tutor"),icon:"quizMultiChoice"},open_ended:{label:(0,u.__)("Open Ended/ Essay","tutor"),icon:"quizEssay"},fill_in_the_blank:{label:(0,u.__)("Fill in the Blanks","tutor"),icon:"quizFillInTheBlanks"},short_answer:{label:(0,u.__)("Short Answer","tutor"),icon:"quizShortAnswer"},matching:{label:(0,u.__)("Matching","tutor"),icon:"quizImageMatching"},image_answering:{label:(0,u.__)("Image Answering","tutor"),icon:"quizImageAnswer"},ordering:{label:(0,u.__)("Ordering","tutor"),icon:"quizOrdering"},h5p:{label:(0,u.__)("H5P","tutor"),icon:"quizTrueFalse"}};var Ge=true?{name:"z33n32",styles:"max-width:80px"}:0;var Re=function t(){var e=De(),r=e.activeQuestionIndex,n=e.activeQuestionId,i=e.validationError,o=e.setValidationError;var s=(0,m.Gc)();var c=s.watch("questions.".concat(r,".question_type"));var l=s.watch("questions.".concat(r,"._data_status"));if(!n){return(0,a.tZ)("p",{css:He.emptyQuestions},(0,u.__)("Create/Select a question to view details","tutor"))}return(0,a.tZ)("div",{key:"".concat(n,"-").concat(r)},(0,a.tZ)("div",{css:He.questionTypeWrapper},(0,a.tZ)("div",{css:J.c.caption("medium")},(0,u.__)("Question Type","tutor")),(0,a.tZ)("div",{css:He.questionType},(0,a.tZ)(p.Z,{name:c?Be[c].icon:"quizTrueFalse",width:32,height:32}),(0,a.tZ)("span",null,c?Be[c].label:""))),(0,a.tZ)("div",{css:He.conditions},(0,a.tZ)("p",null,(0,u.__)("Conditions:","tutor")),(0,a.tZ)("div",{css:He.conditionControls},(0,a.tZ)(Z.Z,{when:c==="multiple_choice"},(0,a.tZ)(m.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.has_multiple_correct_answer"),render:function t(e){return(0,a.tZ)(ct.Z,ze({},e,{label:(0,u.__)("Multiple Correct Answer","tutor"),onChange:function t(e){if(Ut(l,St.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Ut(l,St.UPDATE))}if(!e){s.setValue("questions.".concat(r,".question_answers"),s.getValues("questions.".concat(r,".question_answers")).map((function(t){return Ue(Ue({},t),{},{is_correct:"0"})})))}}}))}})),(0,a.tZ)(Z.Z,{when:c==="matching"},(0,a.tZ)(m.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.is_image_matching"),render:function t(e){return(0,a.tZ)(ct.Z,ze({},e,{label:(0,u.__)("Image Matching","tutor"),onChange:function t(e){if(Ut(l,St.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Ut(l,St.UPDATE))}if((i===null||i===void 0?void 0:i.type)==="question"&&!e){o(null)}}}))}})),(0,a.tZ)(m.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.answer_required"),render:function t(e){return(0,a.tZ)(ct.Z,ze({},e,{label:(0,u.__)("Answer Required","tutor"),onChange:function t(){if(Ut(l,St.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Ut(l,St.UPDATE))}}}))}}),(0,a.tZ)(m.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.randomize_options"),render:function t(e){return(0,a.tZ)(ct.Z,ze({},e,{label:(0,u.__)("Randomize Choice","tutor"),onChange:function t(){if(Ut(l,St.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Ut(l,St.UPDATE))}}}))}}),(0,a.tZ)(m.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.question_mark"),rules:{min:0},render:function t(e){return(0,a.tZ)(P.Z,ze({},e,{label:(0,u.__)("Point For This Question","tutor"),type:"number",isInlineLabel:true,placeholder:"0",selectOnFocus:true,style:Ge,onChange:function t(){if(Ut(l,St.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Ut(l,St.UPDATE))}}}))}}),(0,a.tZ)(m.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.show_question_mark"),render:function t(e){return(0,a.tZ)(ct.Z,ze({},e,{label:(0,u.__)("Display Points","tutor"),onChange:function t(){if(Ut(l,St.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Ut(l,St.UPDATE))}}}))}}))))};const Ve=Re;var He={emptyQuestions:(0,a.iv)("padding:",U.W0[12]," ",U.W0[32]," ",U.W0[24]," ",U.W0[24],";",J.c.caption("medium"),";"+(true?"":0),true?"":0),questionTypeWrapper:(0,a.iv)(dt.i.display.flex("column"),";padding:",U.W0[8]," ",U.W0[32]," ",U.W0[24]," ",U.W0[24],";gap:",U.W0[10],";border-bottom:1px solid ",U.Jv.stroke.divider,";"+(true?"":0),true?"":0),questionType:(0,a.iv)("display:flex;align-items:center;gap:",U.W0[10],";"+(true?"":0),true?"":0),conditions:(0,a.iv)("padding:",U.W0[8]," ",U.W0[32]," ",U.W0[24]," ",U.W0[24],";p{",J.c.body("medium"),";color:",U.Jv.text.primary,";}"+(true?"":0),true?"":0),conditionControls:(0,a.iv)(dt.i.display.flex("column"),";gap:",U.W0[16],";margin-top:",U.W0[16],";"+(true?"":0),true?"":0)};var Ke=r(4063);function Ye(t,e){return rr(t)||er(t,e)||Xe(t,e)||$e()}function $e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xe(t,e){if(!t)return;if(typeof t==="string")return tr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tr(t,e)}function tr(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function er(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function rr(t){if(Array.isArray(t))return t}function nr(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ir=function t(e){var r;var n=e.label,i=e.field,o=e.fieldState,c=e.disabled,l=e.loading,f=e.placeholder,p=e.helpText,v=e.onChange;var h=(r=i.value)!==null&&r!==void 0?r:"";var y=(0,s.useState)(false),g=Ye(y,2),m=g[0],_=g[1];var b=(0,s.useState)(h),w=Ye(b,2),x=w[0],O=w[1];return(0,a.tZ)("div",{css:dr.wrapper({hasValue:!!h&&!m})},(0,a.tZ)(Z.Z,{when:m||h},(0,a.tZ)("label",{css:dr.answerLabel},n)),(0,a.tZ)("div",{css:dr.editorWrapper({isEdit:m})},(0,a.tZ)("div",{css:dr.container({isEdit:m||!!h})},(0,a.tZ)(Z.Z,{when:!h&&!m,fallback:(0,a.tZ)(I.Z,{field:i,fieldState:o,disabled:c,helpText:p,loading:l,readOnly:!m,onChange:v,placeholder:f,autoFocus:true,isMinimal:true})},(0,a.tZ)("div",{css:dr.placeholder},f)),(0,a.tZ)(Z.Z,{when:m},(0,a.tZ)("div",{"data-action-buttons":true,css:dr.actionButtonWrapper({isEdit:m})},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){i.onChange(x);_(false)}},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{variant:"secondary",size:"small",onClick:function t(){var e;O((e=i.value)!==null&&e!==void 0?e:"");_(false)},disabled:i.value===x},(0,u.__)("Ok","tutor")))),(0,a.tZ)(Z.Z,{when:!m},(0,a.tZ)("div",{onClick:function t(){if(!m&&!c){_(true)}},onKeyDown:function t(e){if((e.key==="Enter"||e.key===" ")&&!m){_(true)}},"data-overlay":true,tabIndex:0,role:"button"})))))};const or=ir;var ar=true?{name:"3ix1vd",styles:"opacity:1"}:0;var ur=true?{name:"1dz94pb",styles:"resize:vertical"}:0;var sr=true?{name:"1peqg37",styles:"background-color:transparent"}:0;var cr=true?{name:"1hcx8jb",styles:"padding:0"}:0;var lr=true?{name:"11j83c5",styles:"padding-inline:0;max-height:unset;overflow:unset"}:0;var dr={wrapper:function t(e){var r=e.hasValue;return(0,a.iv)(dt.i.display.flex("column")," gap:",U.W0[10],";border-radius:",U.E0.card,";",r&&(0,a.iv)("background-color:",U.Jv.color.success[30],";padding:",U.W0[12]," ",U.W0[24],";&:hover{background-color:",U.Jv.color.success[40],";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},editorWrapper:function t(e){var r=e.isEdit;return(0,a.iv)("position:relative;max-height:400px;overflow-y:scroll;",r&&lr,";"+(true?"":0),true?"":0)},container:function t(e){var r=e.isEdit;return(0,a.iv)("position:relative;display:flex;flex-direction:column;gap:",U.W0[16],";min-height:48px;height:100%;width:100%;inset:0;border-radius:",U.E0[6],";transition:background 0.15s ease-in-out;[data-overlay]{position:absolute;inset:0;opacity:1;:focus-visible{outline:2px solid ",U.Jv.stroke.brand,";outline-offset:-2px;border-radius:",U.E0.card,";}}& label{",J.c.caption()," margin-bottom:",U.W0[6],";color:",U.Jv.text.title,";}",r&&cr," &:hover{background-color:",U.Jv.background.white,";color:",U.Jv.text.subdued,";cursor:text;",r&&sr,";[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)},inputContainer:function t(e){return(0,a.iv)("position:relative;display:flex;& textarea{",J.c.caption()," color:",U.Jv.text.title,";height:auto;padding:",U.W0[8]," ",U.W0[12],";resize:none;",e&&ur,";}"+(true?"":0),true?"":0)},clearButton:(0,a.iv)("position:absolute;right:",U.W0[2],";top:",U.W0[2],";width:36px;height:36px;border-radius:",U.E0[2],";background:transparent;button{padding:",U.W0[10],";}"+(true?"":0),true?"":0),placeholder:(0,a.iv)("padding:",U.W0[12]," ",U.W0[24],";",J.c.caption()," color:",U.Jv.text.hints,";display:flex;align-items:center;height:100%;"+(true?"":0),true?"":0),actionButtonWrapper:function t(e){var r=e.isEdit;return(0,a.iv)("display:flex;justify-content:flex-end;gap:",U.W0[8],";opacity:0;transition:opacity 0.15s ease-in-out;",r&&ar,";"+(true?"":0),true?"":0)},answer:(0,a.iv)("padding:",U.W0[12]," ",U.W0[24],";border-radius:",U.E0.card,";display:flex;flex-direction:column;gap:",U.W0[16],";background-color:",U.Jv.background.success.fill30,";color:",U.Jv.text.title,";transition:background 0.15s ease-in-out;&:hover{background-color:",U.Jv.background.success.fill40,";}"+(true?"":0),true?"":0),answerLabel:(0,a.iv)(J.c.caption()," color:",U.Jv.text.title,";"+(true?"":0),true?"":0),answerParagraph:(0,a.iv)("pre{",dt.i.overflowXAuto,";}"+(true?"":0),true?"":0)};function fr(t,e){return gr(t)||yr(t,e)||vr(t,e)||pr()}function pr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vr(t,e){if(!t)return;if(typeof t==="string")return hr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hr(t,e)}function hr(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yr(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function gr(t){if(Array.isArray(t))return t}function mr(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var _r=!!z.y.tutor_pro_url;var br=function t(e){var r;var n=e.label,i=e.field,o=e.fieldState,c=e.disabled,l=c===void 0?false:c,f=e.loading,p=e.placeholder,v=e.helpText,h=e.onChange;var y=(r=i.value)!==null&&r!==void 0?r:"";var g=(0,s.useState)(false),m=fr(g,2),_=m[0],b=m[1];var w=(0,s.useState)(y),x=fr(w,2),O=x[0],E=x[1];return(0,a.tZ)("div",{css:Er.editorWrapper({isEdit:_})},(0,a.tZ)("div",{css:Er.container({isEdit:_,isDisabled:l})},(0,a.tZ)(Z.Z,{when:!_&&(!_r||!y),fallback:(0,a.tZ)(Z.Z,{when:_r,fallback:(0,a.tZ)(Ee.Z,{field:i,fieldState:o,label:n,disabled:l,helpText:v,loading:f,readOnly:!_,onChange:h,placeholder:p,autoResize:true,maxHeight:400})},(0,a.tZ)(I.Z,{field:i,fieldState:o,label:n,disabled:l,helpText:v,loading:f,readOnly:!_,onChange:h,placeholder:p,min_height:100,max_height:400}))},(0,a.tZ)("div",{css:Er.placeholder,dangerouslySetInnerHTML:{__html:y||p||""}})),(0,a.tZ)(Z.Z,{when:_},(0,a.tZ)("div",{"data-action-buttons":true,css:Er.actionButtonWrapper({isEdit:_})},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){i.onChange(O);b(false)}},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{variant:"secondary",size:"small",onClick:function t(){b(false);E(i.value||"")},disabled:y===O},(0,u.__)("Ok","tutor")))),(0,a.tZ)(Z.Z,{when:!_},(0,a.tZ)("div",{onClick:function t(){if(!_&&!l){b(true)}},onKeyDown:function t(e){if((e.key==="Enter"||e.key===" ")&&!_){b(true)}},"data-overlay":true,tabIndex:0,role:"button"}))))};const wr=br;var Zr=true?{name:"3ix1vd",styles:"opacity:1"}:0;var xr=true?{name:"gv9h2n",styles:"padding-inline:0"}:0;var Or=true?{name:"11j83c5",styles:"padding-inline:0;max-height:unset;overflow:unset"}:0;var Er={editorWrapper:function t(e){var r=e.isEdit;return(0,a.iv)("position:relative;max-height:400px;overflow-y:auto;border-radius:",U.E0[6],";",r&&Or,";"+(true?"":0),true?"":0)},container:function t(e){var r=e.isEdit,n=e.isDisabled;return(0,a.iv)("position:relative;display:flex;flex-direction:column;gap:",U.W0[16],";min-height:64px;height:100%;width:100%;inset:0;padding-inline:",U.W0[8]," ",U.W0[16],";border-radius:",U.E0[6],";transition:background-color 0.15s ease-in-out;[data-overlay]{position:absolute;inset:0;opacity:1;&:focus-visible{outline:2px solid ",U.Jv.stroke.brand,";outline-offset:-2px;border-radius:",U.E0.card,";}}& label{",J.c.caption(),";margin-bottom:",U.W0[6],";color:",U.Jv.text.title,";}",!n&&(0,a.iv)("&:hover{background-color:",!r&&U.Jv.background.white,";color:",U.Jv.text.subdued,";[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)," ",r&&xr,";"+(true?"":0),true?"":0)},placeholder:(0,a.iv)(J.c.caption()," color:",U.Jv.text.hints,";height:100%;inset:0;padding-block:",U.W0[8],";overflow-x:hidden;"+(true?"":0),true?"":0),actionButtonWrapper:function t(e){var r=e.isEdit;return(0,a.iv)("display:flex;justify-content:flex-end;gap:",U.W0[8],";opacity:0;transition:opacity 0.15s ease-in-out;",r&&Zr,";"+(true?"":0),true?"":0)},overlay:true?{name:"b98nv4",styles:"position:absolute;inset:0"}:0};var kr=r(8402);var qr=r(7151);var Sr=r(7363);function jr(t){"@babel/helpers - typeof";return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function Pr(){Pr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Pr.apply(this,arguments)}function Ar(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ar(Object(r),!0).forEach((function(e){Cr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Cr(t,e,r){e=Ir(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Ir(t){var e=Dr(t,"string");return jr(e)==="symbol"?e:String(e)}function Dr(t,e){if(jr(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(jr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lr(t,e){return Jr(t)||Ur(t,e)||zr(t,e)||Wr()}function Wr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zr(t,e){if(!t)return;if(typeof t==="string")return Nr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nr(t,e)}function Nr(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ur(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Jr(t){if(Array.isArray(t))return t}function Qr(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Fr=function t(e){var r;var n=e.maxLimit,i=e.field,o=e.fieldState,u=e.disabled,c=e.readOnly,l=e.loading,f=e.placeholder,v=e.helpText,h=e.onChange,y=e.onKeyDown,g=e.isHidden,m=e.isSecondary,_=m===void 0?false:m,b=e.removeBorder,w=e.dataAttribute,x=e.isInlineLabel,O=x===void 0?false:x,E=e.style,k=e.selectOnFocus,q=k===void 0?false:k;var S=(r=i.value)!==null&&r!==void 0?r:"";var j=(0,s.useRef)(null);var P=(0,s.useState)(false),A=Lr(P,2),T=A[0],C=A[1];var I=(0,s.useState)(S),D=Lr(I,2),L=D[0],W=D[1];var z=undefined;if(n){z={maxLimit:n,inputCharacter:S.toString().length}}var N=Tr({},(0,qr.$K)(w)&&Cr({},w,true));(0,s.useEffect)((function(){if((0,qr.$K)(j.current)){j.current.focus();W(S)}}),[T,j.current]);return(0,a.tZ)("div",{role:"button",tabIndex:0,css:Gr.container({isEdit:T,isDisabled:u||false})},(0,a.tZ)(Z.Z,{when:!T},(0,a.tZ)("div",{css:Gr.placeholder,onClick:function t(){return!u&&C(true)},onKeyDown:function t(e){if(e.key==="Enter"||e.key===" "){C(true)}}},i.value||f)),(0,a.tZ)(Z.Z,{when:T},(0,a.tZ)(kr.Z,{field:i,fieldState:o,disabled:u,readOnly:c,loading:l,helpText:v,isHidden:g,characterCount:z,isSecondary:_,removeBorder:b,isInlineLabel:O,inputStyle:E},(function(t){return(0,a.tZ)(Sr.Fragment,null,(0,a.tZ)("div",{css:Gr.inputContainer(false)},(0,a.tZ)("input",Pr({},i,t,N,{className:"tutor-input-field",type:"text",ref:j,value:S,onChange:function t(e){var r=e.target.value;i.onChange(r);if(h){h(r)}},onKeyDown:function t(e){if(e.key==="Enter"){C(false)}if(e.key==="Escape"){i.onChange(L);C(false)}y===null||y===void 0?void 0:y(e.key)},onFocus:function t(e){if(q){e.target.select()}},autoComplete:"off"}))))}))),(0,a.tZ)("div",{"data-action-buttons":true,css:Gr.actionButtonWrapper({isEdit:T})},(0,a.tZ)(Z.Z,{when:T,fallback:(0,a.tZ)(d.Z,{buttonCss:Gr.actionButton,variant:"text",size:"small",onClick:function t(){return C(true)}},(0,a.tZ)(p.Z,{name:"edit",height:24,width:24}))},(0,a.tZ)(Sr.Fragment,null,(0,a.tZ)(Z.Z,{when:i.value!==L},(0,a.tZ)(d.Z,{buttonCss:Gr.actionButton,variant:"text",size:"small",onClick:function t(){C(false)},disabled:i.value===L},(0,a.tZ)(p.Z,{name:"checkMark",height:24,width:24}))),(0,a.tZ)(d.Z,{buttonCss:Gr.actionButton,variant:"text",size:"small",onClick:function t(){i.onChange(L);C(false)}},(0,a.tZ)(p.Z,{name:"lineCross",height:24,width:24}))))))};const Mr=Fr;var Br=true?{name:"3ix1vd",styles:"opacity:1"}:0;var Gr={container:function t(e){var r=e.isEdit,n=e.isDisabled;return(0,a.iv)("position:relative;display:grid;grid-template-columns:1fr auto;align-items:center;gap:",U.W0[8],";min-height:50px;height:100%;width:100%;cursor:text;padding-inline:",U.W0[8]," ",U.W0[16],";padding-block:",U.W0[8],";border-radius:",U.E0[6],";transition:box-shadow 0.15s ease-in-out;border:1px solid transparent;",!n&&(0,a.iv)("&:hover{background-color:",U.Jv.background.white,";color:",U.Jv.text.subdued,";[data-action-buttons]{opacity:",!n?1:0,";}}&:focus-within{",r&&dt.i.inputFocus," [data-action-buttons]{opacity:1;}}&:focus-visible{outline:2px solid ",U.Jv.stroke.brand,";}"+(true?"":0),true?"":0)," ",r&&(0,a.iv)("background-color:",U.Jv.background.white,";color:",U.Jv.text.subdued,";padding-block:",U.W0[4],";border:1px solid ",U.Jv.stroke["default"],";cursor:default;"+(true?"":0),true?"":0)," ",U.Uo.smallTablet,"{[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)},inputContainer:function t(e){return(0,a.iv)("position:relative;display:flex;transition:background 0.15s ease-in-out;& input{",J.c.heading6()," color:",U.Jv.text.primary,";border:none;background:none;padding:0;",e&&"padding-right: ".concat(U.W0[36],";"),";width:100%;&.tutor-input-field{border:none;box-shadow:none;padding-inline:0;&:focus{border:none;box-shadow:none;outline:none;}}}"+(true?"":0),true?"":0)},clearButton:(0,a.iv)("position:absolute;right:",U.W0[2],";top:",U.W0[2],";width:36px;height:36px;border-radius:",U.E0[2],";background:transparent;button{padding:",U.W0[10],";}"+(true?"":0),true?"":0),placeholder:(0,a.iv)(J.c.heading6()," color:",U.Jv.text.hints,";border-radius:",U.E0[6],";"+(true?"":0),true?"":0),actionButtonWrapper:function t(e){var r=e.isEdit;return(0,a.iv)("display:flex;align-items:center;gap:",U.W0[8],";opacity:0;transition:opacity 0.15s ease-in-out;",r&&Br,";"+(true?"":0),true?"":0)},actionButton:(0,a.iv)("padding:0;color:",U.Jv.icon.subdued,";"+(true?"":0),true?"":0)};var Rr=r(7583);function Vr(t){"@babel/helpers - typeof";return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(t)}function Hr(){Hr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Hr.apply(this,arguments)}function Kr(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Kr=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==Vr(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function Yr(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function $r(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Yr(o,n,i,a,u,"next",t)}function u(t){Yr(o,n,i,a,u,"throw",t)}a(undefined)}))}}function Xr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xr(Object(r),!0).forEach((function(e){en(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function en(t,e,r){e=rn(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function rn(t){var e=nn(t,"string");return Vr(e)==="symbol"?e:String(e)}function nn(t,e){if(Vr(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Vr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function on(t,e){return ln(t)||cn(t,e)||un(t,e)||an()}function an(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function un(t,e){if(!t)return;if(typeof t==="string")return sn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sn(t,e)}function sn(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cn(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function ln(t){if(Array.isArray(t))return t}function dn(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var fn=function t(e){var r,n,i,o,c;var l=e.field;var f=De(),v=f.activeQuestionId,h=f.validationError,y=f.setValidationError;var g=(r=l.value)!==null&&r!==void 0?r:{_data_status:St.NEW,is_saved:false,answer_id:(0,F.x0)(),answer_title:"",belongs_question_id:v,belongs_question_type:"fill_in_the_blank",answer_two_gap_match:"",answer_view_format:"text",answer_order:0,is_correct:"0"};var m=(0,s.useRef)(null);var _=(n=g.answer_two_gap_match)===null||n===void 0?void 0:n.split("|");var b=(0,s.useState)(!g.answer_title||!g.answer_two_gap_match),w=on(b,2),x=w[0],O=w[1];var E=(0,s.useState)(g),k=on(E,2),q=k[0],S=k[1];var j=((i=g.answer_title)===null||i===void 0?void 0:(o=i.match(/{dash}/g))===null||o===void 0?void 0:o.length)||0;var P=((c=g.answer_two_gap_match)===null||c===void 0?void 0:c.split("|").length)||0;var A=!!(g.answer_title&&g.answer_two_gap_match&&j!==P);(0,s.useEffect)((function(){if((0,qr.$K)(m.current)&&x){m.current.focus()}}),[x]);return(0,a.tZ)("div",{css:vn.option},(0,a.tZ)("div",{css:vn.optionLabel({isEditing:x})},(0,a.tZ)("div",{css:vn.optionHeader},(0,a.tZ)("div",{css:vn.optionTitle},(0,u.__)("Fill in the blanks","tutor")),(0,a.tZ)(Z.Z,{when:g.is_saved&&!x},(0,a.tZ)("div",{css:vn.optionActions},(0,a.tZ)(ut.Z,{content:(0,u.__)("Edit","tutor")},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,"data-edit-button":true,onClick:function t(e){e.stopPropagation();O(true)},"data-visually-hidden":true},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24})))))),(0,a.tZ)("div",{css:vn.optionBody},(0,a.tZ)(Z.Z,{when:x,fallback:(0,a.tZ)("div",{css:vn.placeholderWrapper},(0,a.tZ)("div",{css:vn.optionPlaceholder({isTitle:!!g.answer_title})},g.answer_title?g.answer_title.replace(/{dash}/g,"_____"):(0,u.__)("Question title...","tutor")),(0,a.tZ)("div",{css:vn.optionPlaceholder({isCorrectAnswer:_===null||_===void 0?void 0:_.length})},_&&_.length>0?(0,a.tZ)(Rr.Z,{each:_},(function(t,e){return(0,a.tZ)(s.Fragment,{key:e},t,(0,a.tZ)(Z.Z,{when:e<(_?_.length-1:0)},(0,a.tZ)("span",null,"|")))})):(0,u.__)("Correct Answer(s)...","tutor")))},(0,a.tZ)("div",{css:vn.optionInputWrapper},(0,a.tZ)("div",{css:vn.inputWithHints},(0,a.tZ)("input",Hr({},l,{ref:m,type:"text",placeholder:(0,u.__)("Question title...","tutor"),value:g.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){l.onChange(tn(tn(tn({},g),Ut(g._data_status,St.UPDATE)&&{_data_status:Ut(g._data_status,St.UPDATE)}),{},{answer_title:e.target.value}))},onKeyDown:function(){var t=$r(Kr().mark((function t(e){return Kr().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&g.answer_title){l.onChange(tn(tn({},g),Ut(g._data_status,St.UPDATE)&&{_data_status:Ut(g._data_status,St.UPDATE)}));O(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.tZ)("div",{css:vn.inputHints},(0,a.tZ)(p.Z,{name:"info",height:20,width:20}),(0,a.tZ)("p",null,(0,u.__)("Please make sure to use the variable {dash} in your question title to show the blanks in your question. You can use multiple {dash} variables in one question.","tutor")))),(0,a.tZ)("div",{css:vn.inputWithHints},(0,a.tZ)("input",Hr({},l,{type:"text",placeholder:(0,u.__)("Correct Answer(s)..."),value:_===null||_===void 0?void 0:_.join("|"),onClick:function t(e){e.stopPropagation()},onChange:function t(e){l.onChange(tn(tn(tn({},g),Ut(g._data_status,St.UPDATE)&&{_data_status:Ut(g._data_status,St.UPDATE)}),{},{answer_two_gap_match:e.target.value}))},onKeyDown:function(){var t=$r(Kr().mark((function t(e){return Kr().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&g.answer_two_gap_match){l.onChange(tn(tn({},g),Ut(g._data_status,St.UPDATE)&&{_data_status:Ut(g._data_status,St.UPDATE),is_saved:true}));if((h===null||h===void 0?void 0:h.type)==="save_option"){y(null)}O(false)}case 1:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.tZ)(Z.Z,{when:A},(0,a.tZ)("div",{css:vn.errorMessage},(0,a.tZ)(p.Z,{name:"info",height:20,width:20}),(0,a.tZ)("p",null,(0,u.__)("Match the number of answers to the number of blanks {dash} in your question.","tutor")))),(0,a.tZ)("div",{css:vn.inputHints},(0,a.tZ)(p.Z,{name:"info",height:20,width:20}),(0,a.tZ)("p",null,(0,u.__)("Separate multiple answers by a vertical bar |. 1 answer per {dash} variable is defined in the question. Example: Apple | Banana | Orange","tutor")))),(0,a.tZ)("div",{css:vn.optionInputButtons},(0,a.tZ)(Z.Z,{when:g.is_saved},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();O(false);l.onChange(q)}},(0,u.__)("Cancel","tutor"))),(0,a.tZ)(d.Z,{variant:"secondary",size:"small",onClick:function(){var t=$r(Kr().mark((function t(e){return Kr().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if(!A){r.next=3;break}return r.abrupt("return");case 3:l.onChange(tn(tn({},g),Ut(g._data_status,St.UPDATE)&&{_data_status:Ut(g._data_status,St.UPDATE),is_saved:true}));S(tn(tn({},g),Ut(g._data_status,St.UPDATE)&&{_data_status:Ut(g._data_status,St.UPDATE),is_saved:true}));if((h===null||h===void 0?void 0:h.type)==="save_option"){y(null)}O(false);case 7:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:!g.answer_title||!g.answer_two_gap_match||A},(0,u.__)("Ok","tutor"))))))))};const pn=fn;var vn={option:(0,a.iv)(dt.i.display.flex(),";",J.c.caption("medium"),";align-items:center;color:",U.Jv.text.subdued,";gap:",U.W0[10],";align-items:center;"+(true?"":0),true?"":0),optionLabel:function t(e){var r=e.isEditing;return(0,a.iv)("display:flex;flex-direction:column;gap:",U.W0[12],";width:100%;border-radius:",U.E0.card,";padding:",U.W0[12]," ",U.W0[16],";transition:box-shadow 0.15s ease-in-out;background-color:",U.Jv.background.white,";[data-visually-hidden]{opacity:0;}&:hover{box-shadow:0 0 0 1px ",U.Jv.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.iv)("background-color:",U.Jv.background.white,";box-shadow:0 0 0 1px ",U.Jv.stroke.brand,";&:hover{box-shadow:0 0 0 1px ",U.Jv.stroke.brand,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionHeader:true?{name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}:0,optionTitle:(0,a.iv)(J.c.caption("medium"),";color:",U.Jv.text.subdued,";"+(true?"":0),true?"":0),optionActions:(0,a.iv)("display:flex;gap:",U.W0[8],";align-items:center;"+(true?"":0),true?"":0),actionButton:(0,a.iv)(dt.i.resetButton,";color:",U.Jv.icon["default"],";display:flex;cursor:pointer;"+(true?"":0),true?"":0),optionBody:true?{name:"zjik7",styles:"display:flex"}:0,optionInputWrapper:(0,a.iv)(dt.i.optionInputWrapper,";gap:",U.W0[16],";"+(true?"":0),true?"":0),placeholderWrapper:true?{name:"1fttcpj",styles:"display:flex;flex-direction:column"}:0,optionPlaceholder:function t(e){var r=e.isTitle,n=e.isCorrectAnswer;return(0,a.iv)(J.c.body(),";color:",U.Jv.text.subdued,";padding-block:",U.W0[4],";display:flex;align-items:center;gap:",U.W0[4],";",r&&(0,a.iv)("color:",U.Jv.text.hints,";"+(true?"":0),true?"":0)," ",n&&(0,a.iv)("color:",U.Jv.text.success,";span{color:",U.Jv.stroke.border,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},inputWithHints:(0,a.iv)("display:flex;flex-direction:column;gap:",U.W0[8],";"+(true?"":0),true?"":0),inputHints:(0,a.iv)("display:flex;gap:",U.W0[4],";",J.c.small(),";color:",U.Jv.text.hints,";align-items:flex-start;svg{flex-shrink:0;}"+(true?"":0),true?"":0),errorMessage:(0,a.iv)("display:flex;gap:",U.W0[4],";",J.c.small(),";color:",U.Jv.text.error,";align-items:flex-start;color:",U.Jv.text.error,";svg{flex-shrink:0;color:",U.Jv.icon.error,";}"+(true?"":0),true?"":0),optionInputButtons:(0,a.iv)("display:flex;justify-content:flex-end;gap:",U.W0[8],";"+(true?"":0),true?"":0)};var hn=function t(){var e=(0,m.Gc)();var r=De(),n=r.activeQuestionIndex;var i=(0,m.Dq)({control:e.control,name:"questions.".concat(n,".question_answers")}),o=i.fields;return(0,a.tZ)("div",{css:gn.optionWrapper},(0,a.tZ)(m.Qr,{key:o.length?JSON.stringify(o[0]):"",control:e.control,name:"questions.".concat(n,".question_answers.0"),render:function t(e){return(0,a.tZ)(pn,e)}}))};const yn=hn;var gn={optionWrapper:(0,a.iv)(dt.i.display.flex("column"),";padding-left:",U.W0[40],";"+(true?"":0),true?"":0)};var mn=r(8507);var _n=r(8237);var bn=r(4215);function wn(t){"@babel/helpers - typeof";return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(t)}function Zn(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Zn=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==wn(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function xn(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function On(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){xn(o,n,i,a,u,"next",t)}function u(t){xn(o,n,i,a,u,"throw",t)}a(undefined)}))}}function En(){En=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return En.apply(this,arguments)}function kn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kn(Object(r),!0).forEach((function(e){Sn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sn(t,e,r){e=jn(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function jn(t){var e=Pn(t,"string");return wn(e)==="symbol"?e:String(e)}function Pn(t,e){if(wn(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(wn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function An(t,e){return Ln(t)||Dn(t,e)||Cn(t,e)||Tn()}function Tn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cn(t,e){if(!t)return;if(typeof t==="string")return In(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return In(t,e)}function In(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Dn(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Ln(t){if(Array.isArray(t))return t}function Wn(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var zn=!!z.y.tutor_pro_url;var Nn=function t(e){var r;var n=e.index,i=e.onDuplicateOption,c=e.onRemoveOption,l=e.field,f=e.isOverlay,v=f===void 0?false:f;var y=De(),g=y.activeQuestionId,m=y.validationError,b=y.setValidationError;var w=(r=l.value)!==null&&r!==void 0?r:{answer_id:(0,F.x0)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:"image_answering"};var x=(0,s.useRef)(null);var O=(0,s.useState)(!w.answer_title&&!w.image_id&&!w.image_url),E=An(O,2),k=E[0],q=E[1];var S=(0,s.useState)(w),j=An(S,2),P=j[0],A=j[1];var T=(0,o.nB)({id:l.value.answer_id||0,animateLayoutChanges:bn.h}),C=T.attributes,I=T.listeners,D=T.setNodeRef,L=T.transform,W=T.transition,z=T.isDragging;var N=(0,_n.Z)({options:{type:"image"},onChange:function t(e){if(e&&!Array.isArray(e)){var r=e.id,n=e.url;l.onChange(qn(qn(qn({},w),Ut(w._data_status,St.UPDATE)&&{_data_status:Ut(w._data_status,St.UPDATE)}),{},{image_id:r,image_url:n}))}},initialFiles:l.value.image_id?{id:Number(w.image_id),url:w.image_url||"",title:w.image_url||""}:null}),J=N.openMediaLibrary,Q=N.resetFiles;var M={transform:h.ux.Transform.toString(L),transition:W,opacity:z?.3:undefined};var B=function t(){l.onChange(qn(qn(qn({},w),Ut(w._data_status,St.UPDATE)&&{_data_status:Ut(w._data_status,St.UPDATE)}),{},{image_id:"",image_url:""}));Q()};(0,s.useEffect)((function(){if((0,qr.$K)(x.current)&&k){x.current.focus()}}),[k]);return(0,a.tZ)("div",En({},C,{css:Jn.option,ref:D,style:M,tabIndex:-1}),(0,a.tZ)("div",{css:Jn.optionLabel({isEditing:k,isOverlay:v,isDragging:z}),onClick:function t(){q(true)},onKeyDown:function t(e){e.stopPropagation();if(e.key==="Enter"||e.key===" "){q(true)}}},(0,a.tZ)("div",{css:Jn.optionHeader},(0,a.tZ)("div",{css:dt.i.optionCounter({isEditing:k})},String.fromCharCode(65+n)),(0,a.tZ)(Z.Z,{when:!k&&w.is_saved},(0,a.tZ)("button",En({},I,{type:"button",css:dt.i.optionDragButton({isOverlay:v}),"data-visually-hidden":true}),(0,a.tZ)(p.Z,{name:"dragVertical",height:24,width:24})),(0,a.tZ)("div",{css:Jn.optionActions,"data-visually-hidden":true},(0,a.tZ)(ut.Z,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:function t(e){e.stopPropagation();q(true)}},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24}))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.tZ)(Z.Z,{when:!zn,fallback:(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:function t(e){e.stopPropagation();i(w)}},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))},(0,a.tZ)(_.Z,{size:"tiny"},(0,a.tZ)("button",{disabled:true,type:"button",css:dt.i.actionButton,onClick:F.ZT},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:function t(e){e.stopPropagation();c()}},(0,a.tZ)(p.Z,{name:"delete",width:24,height:24})))))),(0,a.tZ)("div",{css:Jn.optionBody},(0,a.tZ)(Z.Z,{when:k,fallback:(0,a.tZ)("div",{css:Jn.placeholderWrapper},(0,a.tZ)(Z.Z,{when:w.image_url,fallback:(0,a.tZ)("div",{css:Jn.imagePlaceholder},(0,a.tZ)(p.Z,{name:"imagePreview",height:48,width:48}))},(function(){return(0,a.tZ)("div",{css:Jn.imagePlaceholder},(0,a.tZ)("img",{src:w.image_url,alt:w.image_url}))})),(0,a.tZ)("div",{css:Jn.optionPlaceholder},w.answer_title||(0,u.__)("Write answer option...","tutor")))},(0,a.tZ)("div",{css:dt.i.optionInputWrapper},(0,a.tZ)(mn.Z,{value:{id:Number(w.image_id),url:w.image_url||"",title:w.image_url||""},buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.__)("Standard Size: 700x430 pixels","tutor"),uploadHandler:J,clearHandler:B,emptyImageCss:Jn.emptyImageInput,previewImageCss:Jn.previewImageInput}),(0,a.tZ)("div",{css:Jn.inputWithHints},(0,a.tZ)("input",En({},l,{ref:x,type:"text",placeholder:(0,u.__)("Input answer here","tutor"),value:w.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){l.onChange(qn(qn(qn({},w),Ut(w._data_status,St.UPDATE)&&{_data_status:Ut(w._data_status,St.UPDATE)}),{},{answer_title:e.target.value}))},onKeyDown:function(){var t=On(Zn().mark((function t(e){return Zn().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&w.answer_title){l.onChange(qn(qn({},w),Ut(w._data_status,St.UPDATE)&&{_data_status:Ut(w._data_status,St.UPDATE),is_saved:true}));if((m===null||m===void 0?void 0:m.type)==="save_option"){b(null)}q(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.tZ)("div",{css:Jn.inputHints},(0,a.tZ)(p.Z,{name:"info",height:20,width:20}),(0,a.tZ)("p",null,(0,u.__)("Students need to type their answers exactly as you write them here. Use ","tutor"),(0,a.tZ)("span",{css:(0,a.iv)({fontWeight:U.Ue.semiBold},true?"":0,true?"":0)},(0,u.__)("small caps","tutor")),(0,u.__)(" when writing the answer.","tutor")))),(0,a.tZ)("div",{css:Jn.optionInputButtons},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();q(false);l.onChange(P);if(!w.is_saved){c();if((m===null||m===void 0?void 0:m.type)==="save_option"){b(null)}}}},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{variant:"secondary",size:"small",onClick:function(){var t=On(Zn().mark((function t(e){return Zn().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();l.onChange(qn(qn(qn({},w),Ut(w._data_status,St.UPDATE)&&{_data_status:Ut(w._data_status,St.UPDATE)}),{},{is_saved:true}));A(qn(qn(qn({},w),Ut(w._data_status,St.UPDATE)&&{_data_status:Ut(w._data_status,St.UPDATE)}),{},{is_saved:true}));if((m===null||m===void 0?void 0:m.type)==="save_option"){b(null)}q(false);case 5:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:!w.answer_title||!w.image_id},(0,u.__)("Ok","tutor"))))))))};const Un=Nn;var Jn={option:(0,a.iv)(dt.i.display.flex(),";",J.c.caption("medium"),";align-items:center;color:",U.Jv.text.subdued,";gap:",U.W0[10],";align-items:center;"+(true?"":0),true?"":0),optionLabel:function t(e){var r=e.isEditing,n=e.isOverlay,i=e.isDragging;return(0,a.iv)(dt.i.display.flex("column")," gap:",U.W0[20],";width:100%;border-radius:",U.E0.card,";padding:",U.W0[12]," ",U.W0[16],";background-color:",U.Jv.background.white,";[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",U.Jv.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.iv)("background-color:",U.Jv.background.white,";outline:1px solid ",U.Jv.stroke.brand,";&:hover{outline:1px solid ",U.Jv.stroke.brand,";}"+(true?"":0),true?"":0)," ",i&&(0,a.iv)("background-color:",U.Jv.stroke.hover,";"+(true?"":0),true?"":0)," ",n&&(0,a.iv)("box-shadow:",U.AF.drag,";"+(true?"":0),true?"":0)," ",U.Uo.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionHeader:true?{name:"ilv1kv",styles:"display:grid;grid-template-columns:1fr auto 1fr;align-items:center;:focus-within{[data-visually-hidden]{opacity:1;}}"}:0,optionActions:(0,a.iv)(dt.i.display.flex()," gap:",U.W0[8],";place-self:center end;"+(true?"":0),true?"":0),optionBody:(0,a.iv)(dt.i.display.flex(),";"+(true?"":0),true?"":0),placeholderWrapper:(0,a.iv)(dt.i.display.flex("column")," gap:",U.W0[12],";width:100%;"+(true?"":0),true?"":0),imagePlaceholder:(0,a.iv)(dt.i.flexCenter(),";height:210px;width:100%;background-color:",U.Jv.background["default"],";border-radius:",U.E0.card,";overflow:hidden;svg{color:",U.Jv.icon.hints,";}img{width:100%;height:100%;object-fit:cover;object-position:center;}"+(true?"":0),true?"":0),emptyImageInput:(0,a.iv)("background-color:",U.Jv.background["default"],";height:210px;"+(true?"":0),true?"":0),previewImageInput:true?{name:"be4gwm",styles:"height:210px"}:0,optionPlaceholder:(0,a.iv)(J.c.body(),";color:",U.Jv.text.subdued,";padding-block:",U.W0[4],";"+(true?"":0),true?"":0),inputWithHints:(0,a.iv)(dt.i.display.flex("column")," gap:",U.W0[8],";"+(true?"":0),true?"":0),inputHints:(0,a.iv)(dt.i.display.flex()," gap:",U.W0[4],";",J.c.small(),";color:",U.Jv.text.hints,";align-items:flex-start;svg{flex-shrink:0;}"+(true?"":0),true?"":0),optionInputButtons:(0,a.iv)(dt.i.display.flex()," justify-content:flex-end;gap:",U.W0[8],";"+(true?"":0),true?"":0)};function Qn(t){"@babel/helpers - typeof";return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(t)}function Fn(){Fn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Fn.apply(this,arguments)}function Mn(t){return Rn(t)||Gn(t)||ei(t)||Bn()}function Bn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gn(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rn(t){if(Array.isArray(t))return ri(t)}function Vn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Hn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vn(Object(r),!0).forEach((function(e){Kn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Kn(t,e,r){e=Yn(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Yn(t){var e=$n(t,"string");return Qn(e)==="symbol"?e:String(e)}function $n(t,e){if(Qn(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Qn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xn(t,e){return ii(t)||ni(t,e)||ei(t,e)||ti()}function ti(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ei(t,e){if(!t)return;if(typeof t==="string")return ri(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ri(t,e)}function ri(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ni(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function ii(t){if(Array.isArray(t))return t}var oi=function t(){var e=(0,s.useState)(null),r=Xn(e,2),l=r[0],f=r[1];var v=(0,m.Gc)();var h=De(),y=h.activeQuestionIndex,g=h.activeQuestionId,_=h.validationError,b=h.setValidationError;var w=(0,m.Dq)({control:v.control,name:"questions.".concat(y,".question_answers")}),x=w.fields,O=w.append,E=w.insert,k=w.remove,q=w.move;var S=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:o.is}));var j=(0,s.useMemo)((function(){if(!l){return null}return x.find((function(t){return t.answer_id===l}))}),[l,x]);var P=function t(){O({_data_status:St.NEW,is_saved:false,answer_id:(0,F.x0)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:"image_answering",answer_order:x.length,answer_two_gap_match:"",answer_view_format:""},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(x.length,".answer_title")});if((_===null||_===void 0?void 0:_.type)==="add_option"){b(null)}};var A=function t(e,r){var n=Hn(Hn({},r),{},{_data_status:St.NEW,is_saved:true,answer_id:(0,F.x0)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var i=e+1;E(i,n)};var T=function t(e,r){k(e);if(r._data_status!==St.NEW){v.setValue("deleted_answer_ids",[].concat(Mn(v.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.tZ)("div",{css:ui.optionWrapper},(0,a.tZ)(n.LB,{sensors:S,collisionDetection:n.pE,modifiers:[i.hg],onDragStart:function t(e){f(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var i=x.findIndex((function(t){return t.answer_id===r.id}));var o=x.findIndex((function(t){return t.answer_id===n.id}));q(i,o)}f(null)}},(0,a.tZ)(o.Fo,{items:x.map((function(t){return Hn(Hn({},t),{},{id:t.answer_id})})),strategy:o.qw},(0,a.tZ)(Rr.Z,{each:x},(function(t,e){return(0,a.tZ)(m.Qr,{key:"".concat(t.answer_id,"-").concat(e),control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.tZ)(Un,Fn({},n,{onDuplicateOption:function t(r){return A(e,r)},onRemoveOption:function r(){return T(e,t)},index:e}))}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(Z.Z,{when:j},(function(t){var e=x.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.tZ)(m.Qr,{key:l,control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.tZ)(Un,Fn({},r,{onDuplicateOption:F.ZT,onRemoveOption:F.ZT,index:e,isOverlay:true}))}})}))),document.body)),(0,a.tZ)("div",null,(0,a.tZ)(d.Z,{variant:"text",onClick:P,buttonContentCss:ui.addOptionButton,icon:(0,a.tZ)(p.Z,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const ai=oi;var ui={optionWrapper:(0,a.iv)(dt.i.display.flex("column"),";gap:",U.W0[12],";padding-left:",U.W0[40],";",U.Uo.smallMobile,"{padding-left:",U.W0[8],";}"+(true?"":0),true?"":0),addOptionButton:(0,a.iv)("color:",U.Jv.text.brand,";svg{color:",U.Jv.icon.brand,";}"+(true?"":0),true?"":0)};function si(t){"@babel/helpers - typeof";return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(t)}function ci(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ci=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==si(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function li(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function di(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){li(o,n,i,a,u,"next",t)}function u(t){li(o,n,i,a,u,"throw",t)}a(undefined)}))}}function fi(){fi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return fi.apply(this,arguments)}function pi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pi(Object(r),!0).forEach((function(e){hi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hi(t,e,r){e=yi(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function yi(t){var e=gi(t,"string");return si(e)==="symbol"?e:String(e)}function gi(t,e){if(si(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(si(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mi(t,e){return xi(t)||Zi(t,e)||bi(t,e)||_i()}function _i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bi(t,e){if(!t)return;if(typeof t==="string")return wi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wi(t,e)}function wi(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zi(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function xi(t){if(Array.isArray(t))return t}function Oi(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Ei=!!z.y.tutor_pro_url;var ki=function t(e){var r,n;var i=e.index,c=e.onDuplicateOption,l=e.onRemoveOption,f=e.field,v=e.isOverlay,y=v===void 0?false:v;var g=De(),b=g.activeQuestionId,w=g.activeQuestionIndex,x=g.validationError,O=g.setValidationError;var E=(0,m.Gc)();var k=(r=f.value)!==null&&r!==void 0?r:{answer_id:"",answer_title:"",answer_two_gap_match:"",is_correct:"0",belongs_question_id:b,belongs_question_type:"matching"};var q=(0,s.useRef)(null);var S=(0,m.qo)({control:E.control,name:"questions.".concat(w,".question_settings.is_image_matching"),defaultValue:false});var j=(0,s.useState)(!k.answer_title||S?!k.image_url:!k.answer_two_gap_match),P=mi(j,2),A=P[0],T=P[1];var C=(0,s.useState)(k),I=mi(C,2),D=I[0],L=I[1];var W=(0,o.nB)({id:f.value.answer_id||0,animateLayoutChanges:bn.h}),z=W.attributes,N=W.listeners,U=W.setNodeRef,J=W.transform,Q=W.transition,M=W.isDragging;var B=(0,_n.Z)({options:{type:"image"},onChange:function t(e){if(e&&!Array.isArray(e)){var r=e.id,n=e.url;f.onChange(vi(vi(vi({},k),Ut(k._data_status,St.UPDATE)&&{_data_status:Ut(k._data_status,St.UPDATE)}),{},{image_id:r,image_url:n}))}},initialFiles:(n=f.value)!==null&&n!==void 0&&n.image_id?{id:Number(f.value.image_id),url:f.value.image_url||"",title:""}:null}),G=B.openMediaLibrary,R=B.resetFiles;var V={transform:h.ux.Transform.toString(J),transition:Q,opacity:M?.3:undefined};var H=function t(){f.onChange(vi(vi(vi({},k),Ut(k._data_status,St.UPDATE)&&{_data_status:Ut(k._data_status,St.UPDATE)}),{},{image_id:"",image_url:""}));R()};(0,s.useEffect)((function(){if((0,qr.$K)(q.current)&&A){q.current.focus()}}),[A]);return(0,a.tZ)("div",fi({},z,{css:Si.option,ref:U,tabIndex:-1,style:V}),(0,a.tZ)("div",{css:Si.optionLabel({isEditing:A,isDragging:M,isOverlay:y}),onClick:function t(){T(true)},onKeyDown:function t(e){e.stopPropagation();if(e.key==="Enter"||e.key===" "){T(true)}}},(0,a.tZ)("div",{css:Si.optionHeader},(0,a.tZ)("div",{css:dt.i.optionCounter({isEditing:A})},String.fromCharCode(65+i)),(0,a.tZ)(Z.Z,{when:!A&&k.is_saved},(0,a.tZ)("button",fi({},N,{type:"button",css:dt.i.optionDragButton({isOverlay:y}),"data-visually-hidden":true}),(0,a.tZ)(p.Z,{name:"dragVertical",height:24,width:24})),(0,a.tZ)("div",{css:Si.optionActions,"data-visually-hidden":true},(0,a.tZ)(ut.Z,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,"data-edit-button":true,onClick:function t(e){e.stopPropagation();T(true)}},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24}))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.tZ)(Z.Z,{when:!Ei,fallback:(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:function t(e){e.stopPropagation();c(k)}},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))},(0,a.tZ)(_.Z,{size:"tiny"},(0,a.tZ)("button",{disabled:true,type:"button",css:dt.i.actionButton,onClick:F.ZT},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,"data-visually-hidden":true,onClick:function t(e){e.stopPropagation();l()}},(0,a.tZ)(p.Z,{name:"delete",width:24,height:24})))))),(0,a.tZ)("div",{css:Si.optionBody},(0,a.tZ)(Z.Z,{when:A,fallback:(0,a.tZ)("div",{css:Si.placeholderWrapper({isImageMatching:S})},(0,a.tZ)(Z.Z,{when:S,fallback:(0,a.tZ)("div",{css:Si.optionPlaceholder},k.answer_title||(0,u.__)("Answer title...","tutor"))},(0,a.tZ)(Z.Z,{when:k.image_url,fallback:(0,a.tZ)("div",{css:Si.imagePlaceholder},(0,a.tZ)(p.Z,{name:"imagePreview",height:48,width:48}))},(function(){return(0,a.tZ)("div",{css:Si.imagePlaceholder},(0,a.tZ)("img",{src:k.image_url,alt:k.image_url}))}))),(0,a.tZ)("div",{css:Si.optionPlaceholder},!S?k.answer_two_gap_match:k.answer_title))},(0,a.tZ)("div",{css:dt.i.optionInputWrapper},(0,a.tZ)(Z.Z,{when:S},(0,a.tZ)(mn.Z,{value:{id:Number(k.image_id),url:k.image_url||"",title:k.image_url||""},infoText:(0,u.__)("Standard Size: 700x430 pixels","tutor"),uploadHandler:G,clearHandler:H,emptyImageCss:Si.emptyImageInput,previewImageCss:Si.previewImageInput})),(0,a.tZ)("input",fi({},f,{type:"text",ref:q,placeholder:!S?(0,u.__)("Question","tutor"):(0,u.__)("Image matched text..","tutor"),value:k.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){f.onChange(vi(vi(vi({},k),Ut(k._data_status,St.UPDATE)&&{_data_status:Ut(k._data_status,St.UPDATE)}),{},{answer_title:e.target.value}))},onKeyDown:function(){var t=di(ci().mark((function t(e){return ci().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&k.answer_title&&k.answer_two_gap_match){f.onChange(vi(vi({},k),Ut(k._data_status,St.UPDATE)&&{_data_status:Ut(k._data_status,St.UPDATE)}));T(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.tZ)(Z.Z,{when:!S},(0,a.tZ)("input",fi({},f,{type:"text",placeholder:(0,u.__)("Matched option..","tutor"),value:k.answer_two_gap_match,onClick:function t(e){e.stopPropagation()},onChange:function t(e){f.onChange(vi(vi(vi({},k),Ut(k._data_status,St.UPDATE)&&{_data_status:Ut(k._data_status,St.UPDATE)}),{},{answer_two_gap_match:e.target.value}))},onKeyDown:function t(e){e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&k.answer_title&&k.answer_two_gap_match){f.onChange(vi(vi({},k),Ut(k._data_status,St.UPDATE)&&{_data_status:Ut(k._data_status,St.UPDATE),is_saved:true}));if((x===null||x===void 0?void 0:x.type)==="save_option"){O(null)}T(false)}}}))),(0,a.tZ)("div",{css:Si.optionInputButtons},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();T(false);f.onChange(D);if(!k.is_saved){if((x===null||x===void 0?void 0:x.type)==="save_option"){O(null)}l()}}},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{variant:"secondary",size:"small",onClick:function t(e){e.stopPropagation();f.onChange(vi(vi(vi({},k),Ut(k._data_status,St.UPDATE)&&{_data_status:Ut(k._data_status,St.UPDATE)}),{},{is_saved:true}));L(vi(vi(vi({},k),Ut(k._data_status,St.UPDATE)&&{_data_status:Ut(k._data_status,St.UPDATE)}),{},{is_saved:true}));if((x===null||x===void 0?void 0:x.type)==="save_option"){O(null)}T(false)},disabled:!k.answer_title||(S?!k.image_id:!k.answer_two_gap_match)},(0,u.__)("Ok","tutor"))))))))};const qi=ki;var Si={option:(0,a.iv)(dt.i.display.flex(),";",J.c.caption("medium"),";align-items:center;color:",U.Jv.text.subdued,";gap:",U.W0[10],";align-items:center;"+(true?"":0),true?"":0),optionLabel:function t(e){var r=e.isEditing,n=e.isDragging,i=e.isOverlay;return(0,a.iv)("display:flex;flex-direction:column;gap:",U.W0[12],";width:100%;border-radius:",U.E0.card,";padding:",U.W0[12]," ",U.W0[16],";background-color:",U.Jv.background.white,";[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",U.Jv.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.iv)("background-color:",U.Jv.background.white,";outline:1px solid ",U.Jv.stroke.brand,";&:hover{outline:1px solid ",U.Jv.stroke.brand,";}"+(true?"":0),true?"":0)," ",n&&(0,a.iv)("background-color:",U.Jv.stroke.hover,";"+(true?"":0),true?"":0)," ",i&&(0,a.iv)("box-shadow:",U.AF.drag,";"+(true?"":0),true?"":0)," ",U.Uo.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionHeader:true?{name:"1b8dd6m",styles:"display:grid;grid-template-columns:1fr auto 1fr;align-items:center;&:focus-within{[data-visually-hidden]{opacity:1;}}"}:0,optionActions:(0,a.iv)(dt.i.display.flex()," gap:",U.W0[8],";place-self:center end;"+(true?"":0),true?"":0),actionButton:(0,a.iv)(dt.i.resetButton,";",dt.i.display.flex()," color:",U.Jv.icon["default"],";cursor:pointer;&:disabled{cursor:not-allowed;color:",U.Jv.icon.disable.background,";}"+(true?"":0),true?"":0),optionBody:(0,a.iv)(dt.i.display.flex(),";"+(true?"":0),true?"":0),placeholderWrapper:function t(e){var r=e.isImageMatching;return(0,a.iv)(dt.i.display.flex("column")," width:100%;",r&&(0,a.iv)("gap:",U.W0[12],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},imagePlaceholder:(0,a.iv)(dt.i.flexCenter(),";height:210px;width:100%;background-color:",U.Jv.background["default"],";border-radius:",U.E0.card,";overflow:hidden;svg{color:",U.Jv.icon.hints,";}img{width:100%;height:100%;object-fit:cover;object-position:center;}"+(true?"":0),true?"":0),emptyImageInput:(0,a.iv)("background-color:",U.Jv.background["default"],";height:210px;"+(true?"":0),true?"":0),previewImageInput:true?{name:"be4gwm",styles:"height:210px"}:0,optionPlaceholder:(0,a.iv)(J.c.body(),";color:",U.Jv.text.subdued,";padding-block:",U.W0[4],";"+(true?"":0),true?"":0),optionInputWrapper:(0,a.iv)(dt.i.display.flex("column")," width:100%;gap:",U.W0[12],";"+(true?"":0),true?"":0),optionInputButtons:(0,a.iv)(dt.i.display.flex()," justify-content:flex-end;gap:",U.W0[8],";"+(true?"":0),true?"":0)};function ji(t){"@babel/helpers - typeof";return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(t)}function Pi(){Pi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Pi.apply(this,arguments)}function Ai(t){return Ii(t)||Ci(t)||Qi(t)||Ti()}function Ti(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ci(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ii(t){if(Array.isArray(t))return Fi(t)}function Di(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Li(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Di(Object(r),!0).forEach((function(e){Wi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Di(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wi(t,e,r){e=zi(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function zi(t){var e=Ni(t,"string");return ji(e)==="symbol"?e:String(e)}function Ni(t,e){if(ji(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(ji(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ui(t,e){return Bi(t)||Mi(t,e)||Qi(t,e)||Ji()}function Ji(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qi(t,e){if(!t)return;if(typeof t==="string")return Fi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fi(t,e)}function Fi(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mi(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Bi(t){if(Array.isArray(t))return t}var Gi=function t(){var e=(0,s.useState)(null),r=Ui(e,2),l=r[0],f=r[1];var v=(0,m.Gc)();var h=De(),y=h.activeQuestionIndex,g=h.activeQuestionId,_=h.validationError,b=h.setValidationError;var w=(0,m.Dq)({control:v.control,name:"questions.".concat(y,".question_answers")}),x=w.fields,O=w.append,E=w.insert,k=w.remove,q=w.move;var S=(0,m.qo)({control:v.control,name:"questions.".concat(y,".question_settings.is_image_matching"),defaultValue:false});var j=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:o.is}));var P=(0,s.useMemo)((function(){if(!l){return null}return x.find((function(t){return t.answer_id===l}))}),[l,x]);var A=function t(){O({_data_status:St.NEW,is_saved:false,answer_id:(0,F.x0)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:S?"image_matching":"matching",answer_order:x.length,answer_two_gap_match:"",answer_view_format:""},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(x.length,".answer_title")});if((_===null||_===void 0?void 0:_.type)==="add_option"){b(null)}};var T=function t(e,r){var n=Li(Li({},r),{},{_data_status:St.NEW,is_saved:true,answer_id:(0,F.x0)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var i=e+1;E(i,n)};var C=function t(e,r){k(e);if(r._data_status!==St.NEW){v.setValue("deleted_answer_ids",[].concat(Ai(v.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.tZ)("div",{css:Vi.optionWrapper},(0,a.tZ)(n.LB,{sensors:j,collisionDetection:n.pE,modifiers:[i.hg],onDragStart:function t(e){f(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var i=x.findIndex((function(t){return t.answer_id===r.id}));var o=x.findIndex((function(t){return t.answer_id===n.id}));q(i,o)}f(null)}},(0,a.tZ)(o.Fo,{items:x.map((function(t){return Li(Li({},t),{},{id:t.answer_id})})),strategy:o.qw},(0,a.tZ)(Rr.Z,{each:x},(function(t,e){return(0,a.tZ)(m.Qr,{key:"".concat(t.answer_id,"-").concat(e),control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.tZ)(qi,Pi({},n,{index:e,onDuplicateOption:function t(r){return T(e,r)},onRemoveOption:function r(){return C(e,t)}}))}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(Z.Z,{when:P},(function(t){var e=x.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.tZ)(m.Qr,{key:l,control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.tZ)(qi,Pi({},r,{index:e,onDuplicateOption:F.ZT,onRemoveOption:F.ZT,isOverlay:true}))}})}))),document.body)),(0,a.tZ)("div",null,(0,a.tZ)(d.Z,{variant:"text",onClick:A,buttonContentCss:Vi.addOptionButton,icon:(0,a.tZ)(p.Z,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const Ri=Gi;var Vi={optionWrapper:(0,a.iv)(dt.i.display.flex("column"),";gap:",U.W0[12],";padding-left:",U.W0[40],";",U.Uo.smallMobile,"{padding-left:",U.W0[8],";}"+(true?"":0),true?"":0),addOptionButton:(0,a.iv)("color:",U.Jv.text.brand,";svg{color:",U.Jv.icon.brand,";}"+(true?"":0),true?"":0)};function Hi(t){"@babel/helpers - typeof";return Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hi(t)}function Ki(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ki=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==Hi(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function Yi(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function $i(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Yi(o,n,i,a,u,"next",t)}function u(t){Yi(o,n,i,a,u,"throw",t)}a(undefined)}))}}function Xi(){Xi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Xi.apply(this,arguments)}function to(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function eo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?to(Object(r),!0).forEach((function(e){ro(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):to(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ro(t,e,r){e=no(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function no(t){var e=io(t,"string");return Hi(e)==="symbol"?e:String(e)}function io(t,e){if(Hi(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Hi(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oo(t,e){return lo(t)||co(t,e)||uo(t,e)||ao()}function ao(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uo(t,e){if(!t)return;if(typeof t==="string")return so(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return so(t,e)}function so(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function co(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function lo(t){if(Array.isArray(t))return t}function fo(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var po=!!z.y.tutor_pro_url;var vo=function t(e){var r,n,i;var c=e.field,l=e.onDuplicateOption,f=e.onRemoveOption,v=e.onCheckCorrectAnswer,y=e.index,g=e.isOverlay,b=g===void 0?false:g;var w=(0,m.Gc)();var x=De(),O=x.activeQuestionId,E=x.activeQuestionIndex,k=x.validationError,q=x.setValidationError;var S=(r=c.value)!==null&&r!==void 0?r:{answer_id:(0,F.x0)(),answer_title:"",is_correct:"0",belongs_question_id:O,belongs_question_type:"multiple_choice"};var j=(0,s.useRef)(null);var P=(0,m.qo)({control:w.control,name:"questions.".concat(E,".question_settings.has_multiple_correct_answer"),defaultValue:false});var A=w.watch("questions.".concat(E,".question_type"));var T=(0,s.useState)(!S.is_saved||!S.answer_title&&!S.image_url),C=oo(T,2),I=C[0],D=C[1];var L=(0,s.useState)((0,qr.$K)(S.image_id)&&(0,qr.$K)(S.image_url)),W=oo(L,2),z=W[0],N=W[1];var U=(0,s.useState)(S),J=oo(U,2),Q=J[0],M=J[1];var B=(0,o.nB)({id:((n=c.value)===null||n===void 0?void 0:n.answer_id)||0,animateLayoutChanges:bn.h}),G=B.attributes,R=B.listeners,V=B.setNodeRef,H=B.transform,K=B.transition,Y=B.isDragging;var $=(0,_n.Z)({options:{type:"image"},onChange:function t(e){if(e&&!Array.isArray(e)){var r=e.id,n=e.url;c.onChange(eo(eo(eo({},S),Ut(S._data_status,St.UPDATE)&&{_data_status:Ut(S._data_status,St.UPDATE)}),{},{image_id:r,image_url:n,answer_view_format:"text_image"}));N(true)}},initialFiles:(i=c.value)!==null&&i!==void 0&&i.image_id?{id:Number(c.value.image_id),url:c.value.image_url||"",title:""}:null}),X=$.openMediaLibrary,tt=$.resetFiles;var et={transform:h.ux.Transform.toString(H),transition:K,opacity:Y?.3:undefined};var rt=function t(){tt();c.onChange(eo(eo(eo({},S),Ut(S._data_status,St.UPDATE)&&{_data_status:Ut(S._data_status,St.UPDATE)}),{},{image_id:"",image_url:"",answer_view_format:"text"}));N(false)};(0,s.useEffect)((function(){if((0,qr.$K)(j.current)&&I){j.current.focus()}}),[I]);return(0,a.tZ)("div",Xi({},G,{css:go.option({isSelected:!!Number(S.is_correct),isMultipleChoice:P}),tabIndex:-1,ref:V,style:et}),(0,a.tZ)(Z.Z,{when:A==="multiple_choice"},(0,a.tZ)("button",{key:S.is_correct,css:dt.i.optionCheckButton,"data-check-button":true,type:"button",onClick:v},(0,a.tZ)(Z.Z,{when:P,fallback:(0,a.tZ)(p.Z,{name:Number(S.is_correct)?"checkFilled":"check",height:32,width:32})},(0,a.tZ)(p.Z,{name:Number(S.is_correct)?"checkSquareFilled":"checkSquare",height:32,width:32})))),(0,a.tZ)("div",{css:go.optionLabel({isSelected:!!Number(S.is_correct),isEditing:I,isDragging:Y,isOverlay:b}),onClick:function t(){D(true)},onKeyDown:function t(e){e.stopPropagation();if(e.key==="Enter"||e.key===" "){D(true)}}},(0,a.tZ)("div",{css:go.optionHeader({isEditing:I})},(0,a.tZ)("div",{css:go.optionCounterAndButton},(0,a.tZ)("div",{css:dt.i.optionCounter({isSelected:!!Number(S.is_correct),isEditing:I})},String.fromCharCode(65+y)),(0,a.tZ)(Z.Z,{when:I},(0,a.tZ)(Z.Z,{when:!z,fallback:(0,a.tZ)(d.Z,{variant:"text",icon:(0,a.tZ)(p.Z,{name:"removeImage",width:24,height:24}),onClick:function t(e){e.stopPropagation();rt()}},(0,u.__)("Remove Image","tutor"))},(0,a.tZ)(d.Z,{variant:"text",icon:(0,a.tZ)(p.Z,{name:"addImage",width:24,height:24}),onClick:function t(e){e.stopPropagation();X()}},(0,u.__)("Add Image","tutor"))))),(0,a.tZ)(Z.Z,{when:!I&&S.is_saved},(0,a.tZ)("button",Xi({},R,{type:"button",css:dt.i.optionDragButton({isOverlay:b}),"data-visually-hidden":true}),(0,a.tZ)(p.Z,{name:"dragVertical",height:24,width:24})),(0,a.tZ)("div",{css:go.optionActions,"data-visually-hidden":true},(0,a.tZ)(ut.Z,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:function t(e){e.stopPropagation();D(true)}},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24}))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.tZ)(Z.Z,{when:!po,fallback:(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:function t(e){e.stopPropagation();l(S)}},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))},(0,a.tZ)(_.Z,{size:"tiny"},(0,a.tZ)("button",{disabled:true,type:"button",css:dt.i.actionButton,onClick:F.ZT},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:function t(e){e.stopPropagation();f()}},(0,a.tZ)(p.Z,{name:"delete",width:24,height:24})))))),(0,a.tZ)("div",{css:go.optionBody},(0,a.tZ)(Z.Z,{when:I,fallback:(0,a.tZ)("div",{css:go.placeholderWrapper},(0,a.tZ)(Z.Z,{when:S.image_url},(0,a.tZ)("div",{css:go.imagePlaceholder},(0,a.tZ)("img",{src:S.image_url,alt:S.image_url}))),(0,a.tZ)("div",{css:go.optionPlaceholder},S.answer_title||(0,u.__)("Write answer option...","tutor")))},(0,a.tZ)("div",{css:dt.i.optionInputWrapper},(0,a.tZ)(Z.Z,{when:z},(0,a.tZ)(mn.Z,{value:{id:Number(S.image_id),url:S.image_url||"",title:(0,u.__)("Image","tutor")},buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.__)("Size: 700x430 pixels","tutor"),uploadHandler:X,clearHandler:rt,emptyImageCss:go.emptyImageInput,previewImageCss:go.previewImageInput})),(0,a.tZ)("textarea",Xi({},c,{ref:j,placeholder:(0,u.__)("Write option...","tutor"),value:S.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){var r=e.target.value;c.onChange(eo(eo(eo({},S),Ut(S._data_status,St.UPDATE)&&{_data_status:Ut(S._data_status,St.UPDATE)}),{},{answer_title:r}))},onKeyDown:function(){var t=$i(Ki().mark((function t(e){return Ki().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&S.answer_title){c.onChange(eo(eo({},S),Ut(S._data_status,St.UPDATE)&&{_data_status:Ut(S._data_status,St.UPDATE),is_saved:true}));if((k===null||k===void 0?void 0:k.type)==="save_option"){q(null)}D(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.tZ)("div",{css:go.optionInputButtons},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();D(false);c.onChange(Q);if(!S.is_saved){if((k===null||k===void 0?void 0:k.type)==="save_option"){q(null)}f()}}},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{variant:"secondary",size:"small",onClick:function(){var t=$i(Ki().mark((function t(e){return Ki().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();c.onChange(eo(eo(eo({},S),Ut(S._data_status,St.UPDATE)&&{_data_status:Ut(S._data_status,St.UPDATE)}),{},{is_saved:true}));M(eo(eo(eo({},S),Ut(S._data_status,St.UPDATE)&&{_data_status:Ut(S._data_status,St.UPDATE)}),{},{is_saved:true}));if((k===null||k===void 0?void 0:k.type)==="save_option"){q(null)}D(false);case 5:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:!S.answer_title&&!S.image_url},(0,u.__)("Ok","tutor"))))))))};const ho=vo;var yo=true?{name:"697o47",styles:"fill:none"}:0;var go={option:function t(e){var r=e.isSelected,n=e.isMultipleChoice;return(0,a.iv)(dt.i.display.flex(),";",J.c.caption("medium"),";align-items:center;color:",U.Jv.text.subdued,";gap:",U.W0[10],";align-items:center;[data-check-button]{color:",U.Jv.icon["default"],";",!n&&yo," &:focus-visible{opacity:1;}}&:hover{[data-check-button]{opacity:1;}}&:focus-within{[data-check-button]{opacity:1;}}",r&&(0,a.iv)("[data-check-button]{opacity:1;color:",U.Jv.bg.success,";",!n&&(0,a.iv)("fill:",U.Jv.bg.success,";"+(true?"":0),true?"":0),";}"+(true?"":0),true?"":0)," ",U.Uo.smallTablet,"{[data-check-button]{opacity:1;}}"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected,n=e.isEditing,i=e.isDragging,o=e.isOverlay;return(0,a.iv)("display:flex;flex-direction:column;gap:",U.W0[12],";width:100%;border-radius:",U.E0.card,";padding:",U.W0[12]," ",U.W0[16],";background-color:",U.Jv.background.white,";[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",U.Jv.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.iv)("background-color:",U.Jv.background.success.fill40,";color:",U.Jv.text.primary,";&:hover{outline:1px solid ",U.Jv.stroke.success.fill70,";}"+(true?"":0),true?"":0)," ",n&&(0,a.iv)("background-color:",U.Jv.background.white,";outline:1px solid ",r?U.Jv.stroke.success.fill70:U.Jv.stroke.brand,";&:hover{outline:1px solid ",r?U.Jv.stroke.success.fill70:U.Jv.stroke.brand,";}"+(true?"":0),true?"":0)," ",i&&(0,a.iv)("background-color:",U.Jv.stroke.hover,";"+(true?"":0),true?"":0)," ",o&&(0,a.iv)("box-shadow:",U.AF.drag,";"+(true?"":0),true?"":0)," ",U.Uo.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionHeader:function t(e){var r=e.isEditing,n=r===void 0?false:r;return(0,a.iv)("display:grid;grid-template-columns:",!n?"1fr auto 1fr":"1fr",";align-items:center;&:focus-within{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionCounterAndButton:(0,a.iv)(dt.i.display.flex()," gap:",U.W0[8],";place-self:center start;button{padding:0;}"+(true?"":0),true?"":0),optionActions:(0,a.iv)(dt.i.display.flex()," gap:",U.W0[8],";place-self:center end;"+(true?"":0),true?"":0),optionBody:(0,a.iv)(dt.i.display.flex(),";"+(true?"":0),true?"":0),placeholderWrapper:(0,a.iv)(dt.i.display.flex("column")," gap:",U.W0[12],";width:100%;"+(true?"":0),true?"":0),imagePlaceholder:(0,a.iv)(dt.i.flexCenter(),";height:210px;width:100%;background-color:",U.Jv.background["default"],";border-radius:",U.E0.card,";overflow:hidden;svg{color:",U.Jv.icon.hints,";}img{width:100%;height:100%;object-fit:cover;object-position:center;}"+(true?"":0),true?"":0),emptyImageInput:(0,a.iv)("background-color:",U.Jv.background["default"],";height:210px;"+(true?"":0),true?"":0),previewImageInput:true?{name:"be4gwm",styles:"height:210px"}:0,optionPlaceholder:(0,a.iv)(J.c.body(),";color:",U.Jv.text.subdued,";padding-block:",U.W0[4],";"+(true?"":0),true?"":0),optionInputButtons:(0,a.iv)(dt.i.display.flex()," justify-content:flex-end;gap:",U.W0[8],";"+(true?"":0),true?"":0)};function mo(t){"@babel/helpers - typeof";return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mo(t)}function _o(){_o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return _o.apply(this,arguments)}function bo(t){return xo(t)||Zo(t)||Ao(t)||wo()}function wo(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zo(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xo(t){if(Array.isArray(t))return To(t)}function Oo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Eo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oo(Object(r),!0).forEach((function(e){ko(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ko(t,e,r){e=qo(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function qo(t){var e=So(t,"string");return mo(e)==="symbol"?e:String(e)}function So(t,e){if(mo(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(mo(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jo(t,e){return Io(t)||Co(t,e)||Ao(t,e)||Po()}function Po(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ao(t,e){if(!t)return;if(typeof t==="string")return To(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return To(t,e)}function To(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Co(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Io(t){if(Array.isArray(t))return t}var Do=function t(){var e=(0,s.useState)(null),r=jo(e,2),l=r[0],f=r[1];var v=(0,m.Gc)();var h=De(),y=h.activeQuestionIndex,g=h.activeQuestionId,_=h.validationError,b=h.setValidationError;var w=(0,m.qo)({control:v.control,name:"questions.".concat(y,".question_settings.has_multiple_correct_answer"),defaultValue:false});var x=v.watch("questions.".concat(y,".question_type"));var O=(0,m.Dq)({control:v.control,name:"questions.".concat(y,".question_answers")}),E=O.fields,k=O.append,q=O.insert,S=O.remove,j=O.update,P=O.replace,A=O.move;var T=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:o.is}));var C=(0,m.qo)({control:v.control,name:"questions.".concat(y,".question_answers"),defaultValue:[]});var I=(0,s.useMemo)((function(){if(!l){return null}return E.find((function(t){return t.answer_id===l}))}),[l,E]);var D=function t(e,r){if(w){j(e,Eo(Eo(Eo({},r),Ut(r._data_status,St.UPDATE)&&{_data_status:Ut(r._data_status,St.UPDATE)}),{},{is_correct:r.is_correct==="1"?"0":"1"}))}else{var n=C.map((function(t){return Eo(Eo(Eo({},t),Ut(t._data_status,St.UPDATE)&&{_data_status:Ut(t._data_status,St.UPDATE)}),{},{is_correct:t.answer_id===r.answer_id?"1":"0"})}));P(n)}if((_===null||_===void 0?void 0:_.type)==="correct_option"){b(null)}};var L=function t(){k({_data_status:St.NEW,is_saved:false,answer_id:(0,F.x0)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:x,answer_order:E.length,answer_two_gap_match:"",answer_view_format:"text"},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(E.length,".answer_title")});if((_===null||_===void 0?void 0:_.type)==="add_option"){b(null)}};var W=function t(e,r){var n=Eo(Eo({},r),{},{_data_status:St.NEW,is_saved:true,answer_id:(0,F.x0)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var i=e+1;q(i,n)};var z=function t(e,r){S(e);if(r._data_status!==St.NEW){v.setValue("deleted_answer_ids",[].concat(bo(v.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.tZ)("div",{css:Wo.optionWrapper({isOrdering:x==="ordering"})},(0,a.tZ)(n.LB,{sensors:T,collisionDetection:n.pE,modifiers:[i.hg],onDragStart:function t(e){f(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var i=E.findIndex((function(t){return t.answer_id===r.id}));var o=E.findIndex((function(t){return t.answer_id===n.id}));A(i,o)}f(null)}},(0,a.tZ)(o.Fo,{items:E.map((function(t){return Eo(Eo({},t),{},{id:t.answer_id})})),strategy:o.qw},(0,a.tZ)(Rr.Z,{each:E},(function(t,e){return(0,a.tZ)(m.Qr,{key:"".concat(t.answer_id,"-").concat(t.is_correct),control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.tZ)(ho,_o({},n,{onDuplicateOption:function t(r){return W(e,r)},onRemoveOption:function r(){return z(e,t)},onCheckCorrectAnswer:function r(){return D(e,t)},index:e}))}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(Z.Z,{when:I},(function(t){var e=C.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.tZ)(m.Qr,{key:l,control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.tZ)(ho,_o({},r,{onDuplicateOption:F.ZT,onRemoveOption:F.ZT,onCheckCorrectAnswer:F.ZT,index:e,isOverlay:true}))}})}))),document.body)),(0,a.tZ)("div",{css:Wo.addOptionButtonWrapper({isOrdering:x==="ordering"})},(0,a.tZ)(d.Z,{variant:"text",onClick:L,buttonContentCss:Wo.addOptionButton,icon:(0,a.tZ)(p.Z,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const Lo=Do;var Wo={optionWrapper:function t(e){var r=e.isOrdering;return(0,a.iv)(dt.i.display.flex("column"),";gap:",U.W0[12],";",r&&(0,a.iv)("padding-left:",U.W0[40],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},addOptionButtonWrapper:function t(e){var r=e.isOrdering;return(0,a.iv)("margin-left:",U.W0[48],";",r&&(0,a.iv)("margin-left:",U.W0[8],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},addOptionButton:(0,a.iv)("color:",U.Jv.text.brand,";svg{color:",U.Jv.icon.brand,";}"+(true?"":0),true?"":0)};var zo=function t(){return(0,a.tZ)("div",{css:Uo.optionWrapper},(0,a.tZ)(Ke.Z,{icon:"bulb"},(0,u.__)("No options are necessary for this question type","tutor")))};const No=zo;var Uo={optionWrapper:(0,a.iv)("padding-left:",U.W0[40],";",U.Uo.smallMobile,"{padding-left:",U.W0[8],";}"+(true?"":0),true?"":0)};function Jo(){Jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Jo.apply(this,arguments)}var Qo=function t(e){var r;var n=e.field,i=e.onCheckCorrectAnswer,u=e.isOverlay,s=u===void 0?false:u;var c=De(),l=c.activeQuestionId;var d=(r=n.value)!==null&&r!==void 0?r:{answer_id:(0,F.x0)(),answer_title:"",is_correct:"0",belongs_question_id:l,belongs_question_type:"true_false"};var f=(0,o.nB)({id:n.value.answer_id||0,animateLayoutChanges:bn.h}),v=f.attributes,y=f.listeners,g=f.setNodeRef,m=f.transform,_=f.transition,b=f.isDragging;var w={transform:h.ux.Transform.toString(m),transition:_,opacity:b?.3:undefined};return(0,a.tZ)("div",Jo({},v,{css:Mo.option({isSelected:!!Number(n.value.is_correct),isOverlay:s}),tabIndex:-1,ref:g,style:w}),(0,a.tZ)("button",{"data-check-button":true,type:"button",css:dt.i.optionCheckButton,onClick:i},(0,a.tZ)(p.Z,{name:Number(n.value.is_correct)?"checkFilled":"check",height:32,width:32})),(0,a.tZ)("div",{css:Mo.optionLabel({isSelected:!!Number(n.value.is_correct),isDragging:b,isOverlay:s})},(0,a.tZ)("span",null,d.answer_title),(0,a.tZ)("button",Jo({},y,{type:"button",css:dt.i.optionDragButton({isOverlay:s}),"data-visually-hidden":true}),(0,a.tZ)(p.Z,{name:"dragVertical",height:24,width:24}))))};const Fo=Qo;var Mo={option:function t(e){var r=e.isSelected,n=e.isOverlay;return(0,a.iv)(dt.i.display.flex(),";",J.c.caption("medium"),";align-items:center;color:",U.Jv.text.subdued,";gap:",U.W0[10],";height:48px;align-items:center;[data-check-button]{color:",U.Jv.icon["default"],";opacity:0;fill:none;flex-shrink:0;&:focus-visible{opacity:1;}}&:focus-within{[data-check-button]{opacity:1;}}&:hover{[data-check-button]{opacity:",n?0:1,";}}",r&&(0,a.iv)("[data-check-button]{opacity:1;color:",U.Jv.bg.success,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected,n=e.isDragging,i=e.isOverlay;return(0,a.iv)("display:grid;grid-template-columns:1fr auto 1fr;align-items:center;width:100%;border-radius:",U.E0.card,";padding:",U.W0[12]," ",U.W0[16],";background-color:",U.Jv.background.white,";text-transform:capitalize;[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",U.Jv.stroke.hover,";[data-visually-hidden]{opacity:1;}}&:focus-within{[data-visually-hidden]{opacity:1;}}",r&&(0,a.iv)("background-color:",U.Jv.background.success.fill40,";color:",U.Jv.text.primary,";&:hover{outline:1px solid ",U.Jv.stroke.success.fill70,";}"+(true?"":0),true?"":0)," ",n&&(0,a.iv)("background-color:",U.Jv.stroke.hover,";"+(true?"":0),true?"":0)," ",i&&(0,a.iv)("box-shadow:",U.AF.drag,";"+(true?"":0),true?"":0)," ",U.Uo.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)}};function Bo(t){"@babel/helpers - typeof";return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bo(t)}function Go(){Go=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Go.apply(this,arguments)}function Ro(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=oa(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function t(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,a=false,u;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();o=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!o&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function Vo(t){return Yo(t)||Ko(t)||oa(t)||Ho()}function Ho(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ko(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yo(t){if(Array.isArray(t))return aa(t)}function $o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$o(Object(r),!0).forEach((function(e){ta(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ta(t,e,r){e=ea(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function ea(t){var e=ra(t,"string");return Bo(e)==="symbol"?e:String(e)}function ra(t,e){if(Bo(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Bo(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function na(t,e){return sa(t)||ua(t,e)||oa(t,e)||ia()}function ia(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oa(t,e){if(!t)return;if(typeof t==="string")return aa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aa(t,e)}function aa(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ua(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function sa(t){if(Array.isArray(t))return t}var ca=function t(){var e=(0,s.useState)(null),r=na(e,2),u=r[0],l=r[1];var d=(0,m.Gc)();var f=De(),p=f.activeQuestionIndex;var v=(0,m.Dq)({control:d.control,name:"questions.".concat(p,".question_answers")}),h=v.fields,y=v.move,g=v.replace;var _=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:o.is}));var b=(0,m.qo)({control:d.control,name:"questions.".concat(p,".question_answers"),defaultValue:[]});var w=(0,s.useMemo)((function(){if(!u){return null}return h.find((function(t){return t.answer_id===u}))}),[u,h]);var x=function t(e,r){var n=b.map((function(t){return Xo(Xo(Xo({},t),Ut(t._data_status,St.UPDATE)&&{_data_status:Ut(t._data_status,St.UPDATE)}),{},{is_correct:t.answer_id===r.answer_id?"1":"0"})}));g(n)};(0,s.useEffect)((function(){var t=b.filter((function(t){var e=h.findIndex((function(e){return e.answer_id===t.answer_id}));var r=h[e]||{};return t.is_correct!==r.is_correct}));if(t.length===0){return}var e=h.findIndex((function(e){return e.answer_id===t[0].answer_id}));var r=Vo(b);r[e]=Object.assign({},r[e],{is_correct:"1"});var n=Ro(r.entries()),i;try{for(n.s();!(i=n.n()).done;){var o=na(i.value,2),a=o[0],u=o[1];if(a!==e){r[a]=Xo(Xo(Xo({},u),Ut(u._data_status,St.UPDATE)&&{_data_status:Ut(u._data_status,St.UPDATE)}),{},{is_correct:"0"})}}}catch(t){n.e(t)}finally{n.f()}d.setValue("questions.".concat(p,".question_answers"),r)}),[b]);return(0,a.tZ)("div",{css:da.optionWrapper},(0,a.tZ)(n.LB,{sensors:_,collisionDetection:n.pE,modifiers:[i.hg],onDragStart:function t(e){l(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var i=h.findIndex((function(t){return t.answer_id===r.id}));var o=h.findIndex((function(t){return t.answer_id===n.id}));y(i,o)}l(null)}},(0,a.tZ)(o.Fo,{items:h.map((function(t){return Xo(Xo({},t),{},{id:t.answer_id})})),strategy:o.qw},(0,a.tZ)(Rr.Z,{each:h},(function(t,e){return(0,a.tZ)(m.Qr,{key:"".concat(t.answer_id,"-").concat(t.is_correct),control:d.control,name:"questions.".concat(p,".question_answers.").concat(e),render:function r(n){return(0,a.tZ)(Fo,Go({},n,{index:e,onCheckCorrectAnswer:function r(){return x(e,t)}}))}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(Z.Z,{when:w},(function(t){var e=h.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.tZ)(m.Qr,{key:u,control:d.control,name:"questions.".concat(p,".question_answers.").concat(e),render:function t(r){return(0,a.tZ)(Fo,Go({},r,{index:e,onCheckCorrectAnswer:F.ZT,isOverlay:true}))}})}))),document.body)))};const la=ca;var da={optionWrapper:(0,a.iv)(dt.i.display.flex("column"),";gap:",U.W0[12],";"+(true?"":0),true?"":0),option:function t(e){var r=e.isSelected;return(0,a.iv)(dt.i.display.flex(),";",J.c.caption("medium"),";align-items:center;color:",U.Jv.text.subdued,";gap:",U.W0[10],";height:48px;align-items:center;[data-check-icon]{opacity:0;transition:opacity 0.15s ease-in-out;fill:none;flex-shrink:0;}&:hover{[data-check-icon]{opacity:1;}}",r&&(0,a.iv)("[data-check-icon]{opacity:1;color:",U.Jv.bg.success,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected;return(0,a.iv)("display:grid;grid-template-columns:1fr auto 1fr;align-items:center;width:100%;border-radius:",U.E0.card,";padding:",U.W0[12]," ",U.W0[16],";background-color:",U.Jv.background.white,";cursor:pointer;[data-visually-hidden]{opacity:0;}&:hover{box-shadow:0 0 0 1px ",U.Jv.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.iv)("background-color:",U.Jv.background.success.fill40,";color:",U.Jv.text.primary,";&:hover{box-shadow:0 0 0 1px ",U.Jv.stroke.success.fill70,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionDragButton:(0,a.iv)(dt.i.resetButton," ",dt.i.flexCenter()," transform:rotate(90deg);color:",U.Jv.icon["default"],";cursor:grab;place-self:center center;"+(true?"":0),true?"":0)};var fa=r(2460);const pa=r.p+"images/9e5f8c5e5307063e90cc7f2a55e50d8c-quiz-empty-state-2x.webp";const va=r.p+"images/bdb31b4692f8bb5ee2633ce7abb0356d-quiz-empty-state.webp";function ha(){ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return ha.apply(this,arguments)}function ya(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ga=!!z.y.tutor_pro_url;var ma=function t(){var e=De(),r=e.activeQuestionIndex,n=e.activeQuestionId,i=e.validationError,o=e.contentType;var c=(0,fa.D)(n);var l=(0,m.Gc)();var d=(0,s.useRef)(null);var f=l.watch("questions.".concat(r,".question_type"));var p=l.watch("questions")||[];var v=l.watch("questions.".concat(r,"._data_status"));var h={true_false:(0,a.tZ)(la,{key:n}),multiple_choice:(0,a.tZ)(Lo,{key:n}),open_ended:(0,a.tZ)(No,{key:n}),fill_in_the_blank:(0,a.tZ)(yn,{key:n}),short_answer:(0,a.tZ)(No,{key:n}),matching:(0,a.tZ)(Ri,{key:n}),image_answering:(0,a.tZ)(ai,{key:n}),ordering:(0,a.tZ)(Lo,{key:n})};(0,s.useEffect)((function(){if(i&&d.current){d.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}),[i]);if(!n&&!l.formState.isLoading&&p.length===0){return(0,a.tZ)("div",{css:ba.emptyState},(0,a.tZ)("img",{css:ba.emptyStateImage,src:va,srcSet:"".concat(va," 1x, ").concat(pa," 2x"),alt:""}),(0,a.tZ)("p",{css:ba.emptyStateText},(0,u.__)("Enter a quiz title to begin. Choose from a variety of question types to keep things interesting!","tutor")))}return(0,a.tZ)("div",{key:r,css:ba.questionForm(n===c)},(0,a.tZ)("div",{css:ba.questionWithIndex},(0,a.tZ)("div",{css:ba.questionIndex},r+1,"."),(0,a.tZ)("div",{css:ba.questionTitleAndDesc},(0,a.tZ)(m.Qr,{control:l.control,rules:{required:(0,u.__)("Question title is required","tutor")},name:"questions.".concat(r,".question_title"),render:function t(e){var n;return(0,a.tZ)(Mr,ha({},e,{placeholder:(0,u.__)("Write your question here..","tutor"),disabled:o==="tutor_h5p_quiz",onChange:function t(){if(Ut(v,St.UPDATE)){l.setValue("questions.".concat(r,"._data_status"),Ut(v,St.UPDATE))}},selectOnFocus:((n=p[r])===null||n===void 0?void 0:n._data_status)===St.NEW}))}}),(0,a.tZ)(Z.Z,{when:o!=="tutor_h5p_quiz",fallback:(0,a.tZ)("div",null,(0,a.tZ)("div",{css:ba.h5pShortCode},'[h5p id: "'.concat(l.watch("questions.".concat(r,".question_description")),'"]')))},(0,a.tZ)(m.Qr,{control:l.control,name:"questions.".concat(r,".question_description"),render:function t(e){return(0,a.tZ)(wr,ha({},e,{placeholder:(0,u.__)("Description (optional)","tutor"),disabled:o==="tutor_h5p_quiz",onChange:function t(){if(Ut(v,St.UPDATE)){l.setValue("questions.".concat(r,"._data_status"),Ut(v,St.UPDATE))}}}))}})))),(0,a.tZ)(Z.Z,{when:i},(0,a.tZ)("div",{key:Math.random(),ref:d,css:ba.alertWrapper},(0,a.tZ)(Ke.Z,{type:"danger",icon:"warning"},i===null||i===void 0?void 0:i.message))),h[f],(0,a.tZ)(Z.Z,{when:ga&&f!=="h5p"},(0,a.tZ)("div",{css:ba.questionAnswer},(0,a.tZ)(m.Qr,{control:l.control,name:"questions.".concat(r,".answer_explanation"),render:function t(e){return(0,a.tZ)(or,ha({},e,{label:(0,u.__)("Answer Explanation","tutor"),placeholder:(0,u.__)("Write answer explanation...","tutor"),onChange:function t(){if(Ut(v,St.UPDATE)){l.setValue("questions.".concat(r,"._data_status"),Ut(v,St.UPDATE))}}}))}}))))};const _a=ma;var ba={questionForm:function t(e){return(0,a.iv)(dt.i.display.flex("column"),";padding-right:",U.W0[48],";gap:",U.W0[16],";animation:",e?undefined:"fadeIn 0.25s ease-in-out",";@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}",U.Uo.smallMobile,"{padding-right:",U.W0[8],";}"+(true?"":0),true?"":0)},questionWithIndex:(0,a.iv)(dt.i.display.flex("row"),";align-items:flex-start;padding-left:",U.W0[40],";gap:",U.W0[4],";",U.Uo.smallMobile,"{padding-left:",U.W0[8],";}"+(true?"":0),true?"":0),questionIndex:(0,a.iv)("margin-top:",U.W0[10],";",J.c.heading6(),";color:",U.Jv.text.hints,";"+(true?"":0),true?"":0),questionTitleAndDesc:(0,a.iv)(dt.i.display.flex("column"),";gap:",U.W0[8],";width:100%;"+(true?"":0),true?"":0),h5pShortCode:(0,a.iv)("margin-left:",U.W0[8],";padding:",U.W0[4]," ",U.W0[8],";",J.c.caption(),";color:",U.Jv.text.white,";background-color:#2575be;border-radius:",U.E0.card,";width:fit-content;font-family:'Fire Code',monospace;"+(true?"":0),true?"":0),questionAnswer:(0,a.iv)("padding-left:",U.W0[40],";",U.Uo.smallMobile,"{padding-left:",U.W0[8],";}"+(true?"":0),true?"":0),emptyState:(0,a.iv)(dt.i.flexCenter("column"),";padding-left:",U.W0[40],";padding-right:",U.W0[48],";gap:",U.W0[16],";"+(true?"":0),true?"":0),emptyStateImage:true?{name:"vdj5lp",styles:"width:220px;height:auto"}:0,emptyStateText:(0,a.iv)(J.c.small(),";color:",U.Jv.text.subdued,";text-align:center;max-width:330px;"+(true?"":0),true?"":0),alertWrapper:(0,a.iv)("padding-left:",U.W0[40],";animation:shake 0.3s linear;@keyframes shake{0%{transform:translateX(0);}25%{transform:translateX(-5px);}50%{transform:translateX(5px);}75%{transform:translateX(-5px);}100%{transform:translateX(0);}}"+(true?"":0),true?"":0)};var wa=r(3366);function Za(){Za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Za.apply(this,arguments)}function xa(t,e){return Sa(t)||qa(t,e)||Ea(t,e)||Oa()}function Oa(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ea(t,e){if(!t)return;if(typeof t==="string")return ka(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ka(t,e)}function ka(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qa(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Sa(t){if(Array.isArray(t))return t}function ja(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Pa={true_false:"quizTrueFalse",multiple_choice:"quizMultiChoice",open_ended:"quizEssay",fill_in_the_blank:"quizFillInTheBlanks",short_answer:"quizShortAnswer",matching:"quizImageMatching",image_answering:"quizImageAnswer",ordering:"quizOrdering",h5p:"quizH5p"};var Aa=!!z.y.tutor_pro_url;var Ta=function t(e){var r=e.question,n=e.index,i=e.onDuplicateQuestion,c=e.onRemoveQuestion,l=e.isOverlay,d=l===void 0?false:l;var f=De(),v=f.activeQuestionIndex,y=f.activeQuestionId,g=f.validationError,b=f.setActiveQuestionId,w=f.setValidationError,Z=f.contentType;var x=(0,m.Gc)();var O=(0,s.useState)(false),k=xa(O,2),q=k[0],S=k[1];var j=(0,s.useRef)(null);var P=(0,o.nB)({id:r.question_id,animateLayoutChanges:bn.h}),A=P.attributes,T=P.listeners,C=P.setNodeRef,I=P.transform,D=P.transition,L=P.isDragging;var z={transform:h.ux.Transform.toString(I),transition:D,opacity:L?.3:undefined,background:L?U.Jv.stroke.hover:undefined};(0,s.useEffect)((function(){if(y===r.question_id){var t;(t=j.current)===null||t===void 0?void 0:t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}),[y,r.question_id]);return(0,a.tZ)("div",Za({},A,{key:r.question_id,css:Da.questionItem({isActive:String(y)===String(r.question_id),isDragging:d,isThreeDotsOpen:q}),ref:function t(e){C(e);j.current=e},style:z,onClick:function t(){if(y===r.question_id){return}var e=(0,W.aU)(v,x);if(e!==true){w(e);return}w(null);b(r.question_id)},onKeyDown:function t(e){if(e.key==="Enter"||e.key===" "){if(y===r.question_id){return}var n=(0,W.aU)(v,x);if(n!==true){w(n);return}w(null);b(r.question_id)}}}),(0,a.tZ)("div",{css:Da.iconAndSerial({isDragging:d}),"data-icon-serial":true},(0,a.tZ)("span",{"data-serial":true},n+1),(0,a.tZ)("button",Za({"data-drag-icon":true},T,{type:"button",css:dt.i.resetButton}),(0,a.tZ)(p.Z,{"data-drag-icon":true,name:"dragVertical",width:24,height:24})),(0,a.tZ)(p.Z,{name:Pa[r.question_type],width:24,height:24,"data-question-icon":true})),(0,a.tZ)("span",{css:Da.questionTitle({isActive:String(y)===String(r.question_id)})},r.question_title),(0,a.tZ)(E.Z,{isOpen:q,onClick:function t(e){e.stopPropagation();var r=(0,W.aU)(v,x);S(true);if(r!==true){w(r)}},animationType:wa.ru.slideDown,closePopover:function t(){return S(false)},dotsOrientation:"vertical",maxWidth:Aa?"150px":"160px",isInverse:true,arrowPosition:"auto",size:"small",hideArrow:true,"data-three-dots":true},!g&&Z!=="tutor_h5p_quiz"&&(0,a.tZ)(E.Z.Option,{text:(0,a.tZ)("div",{css:Da.duplicate},(0,u.__)("Duplicate","tutor"),!Aa&&(0,a.tZ)(_.Z,{size:"small",content:(0,u.__)("Pro","tutor")})),icon:(0,a.tZ)(p.Z,{name:"duplicate",width:24,height:24}),disabled:!Aa,onClick:function t(e){e.stopPropagation();i(r);S(false)}}),(0,a.tZ)(E.Z.Option,{isTrash:true,text:(0,u.__)("Delete","tutor"),icon:(0,a.tZ)(p.Z,{name:"delete",width:24,height:24}),onClick:function t(e){e.stopPropagation();c();S(false)}})))};const Ca=Ta;var Ia=true?{name:"1c7c6p3",styles:"[data-three-dots]{opacity:1;}"}:0;var Da={questionItem:function t(e){var r=e.isActive,n=r===void 0?false:r,i=e.isDragging,o=i===void 0?false:i,u=e.isThreeDotsOpen,s=u===void 0?false:u;return(0,a.iv)("padding:",U.W0[10]," ",U.W0[8]," ",U.W0[10]," ",U.W0[28],";display:flex;align-items:center;justify-content:space-between;gap:",U.W0[12],";border-bottom:1px solid ",U.Jv.stroke.divider,";cursor:pointer;transition:border 0.3s ease-in-out,background-color 0.3s ease-in-out;[data-three-dots]{opacity:0;background:transparent;svg{color:",U.Jv.icon["default"],";}:focus-visible{opacity:1;}}",n&&(0,a.iv)("color:",U.Jv.text.brand,";background-color:",U.Jv.background.white,";[data-icon-serial]{border-top-right-radius:3px;border-bottom-right-radius:3px;border-color:transparent;}"+(true?"":0),true?"":0)," ",s&&Ia," :hover{background-color:",U.Jv.background.hover,";[data-serial]{display:none;}[data-drag-icon]{display:block;}[data-icon-serial]{border-top-right-radius:3px;border-bottom-right-radius:3px;border-color:transparent;}[data-three-dots]{opacity:1;}}:focus-visible{outline:2px solid ",U.Jv.stroke.brand,";outline-offset:-2px;border-radius:",U.E0.card,";[data-three-dots]{opacity:1;}}",o&&(0,a.iv)("box-shadow:",U.AF.drag,";background-color:",U.Jv.background.white,";border-radius:",U.E0.card,";:hover{background-color:",U.Jv.background.white,";}"+(true?"":0),true?"":0)," ",U.Uo.smallMobile,"{padding:",U.W0[8]," ",U.W0[8]," ",U.W0[8]," ",U.W0[8],";[data-three-dots]{opacity:1;}}"+(true?"":0),true?"":0)},iconAndSerial:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.iv)("display:grid;grid-template-columns:1fr 1fr;align-items:center;border-radius:3px 0 0 3px;width:64px;padding:",U.W0[4]," ",U.W0[8]," ",U.W0[4]," ",U.W0[4],";flex-shrink:0;column-gap:",U.W0[12],";place-items:center center;[data-drag-icon]{display:none;color:",U.Jv.icon.hints,";cursor:",n?"grabbing":"grab",";}[data-question-icon]{flex-shrink:0;}svg{flex-shrink:0;}[data-serial]{width:24px;display:block;",J.c.caption("medium")," text-align:center;flex-grow:1;}"+(true?"":0),true?"":0)},questionTitle:function t(e){var r=e.isActive,n=r===void 0?false:r;return(0,a.iv)(J.c.small(n?"medium":"regular"),";color:",n?U.Jv.text.brand:U.Jv.text.subdued,";flex-grow:1;"+(true?"":0),true?"":0)},duplicate:(0,a.iv)("display:flex;align-items:center;gap:",U.W0[4],";"+(true?"":0),true?"":0)};function La(t){"@babel/helpers - typeof";return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},La(t)}function Wa(t){return Ua(t)||Na(t)||Ha(t)||za()}function za(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Na(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ua(t){if(Array.isArray(t))return Ka(t)}function Ja(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Qa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ja(Object(r),!0).forEach((function(e){Fa(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ja(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fa(t,e,r){e=Ma(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Ma(t){var e=Ba(t,"string");return La(e)==="symbol"?e:String(e)}function Ba(t,e){if(La(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(La(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ga(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ha(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function t(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,a=false,u;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();o=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!o&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function Ra(t,e){return $a(t)||Ya(t,e)||Ha(t,e)||Va()}function Va(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ha(t,e){if(!t)return;if(typeof t==="string")return Ka(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ka(t,e)}function Ka(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ya(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function $a(t){if(Array.isArray(t))return t}var Xa=[{label:(0,u.__)("True/False","tutor"),value:"true_false",icon:"quizTrueFalse",isPro:false},{label:(0,u.__)("Multiple Choice","tutor"),value:"multiple_choice",icon:"quizMultiChoice",isPro:false},{label:(0,u.__)("Open Ended/ Essay","tutor"),value:"open_ended",icon:"quizEssay",isPro:false},{label:(0,u.__)("Fill in the Blanks","tutor"),value:"fill_in_the_blank",icon:"quizFillInTheBlanks",isPro:false},{label:(0,u.__)("Short Answer","tutor"),value:"short_answer",icon:"quizShortAnswer",isPro:true},{label:(0,u.__)("Matching","tutor"),value:"matching",icon:"quizImageMatching",isPro:true},{label:(0,u.__)("Image Answering","tutor"),value:"image_answering",icon:"quizImageAnswer",isPro:true},{label:(0,u.__)("Ordering","tutor"),value:"ordering",icon:"quizOrdering",isPro:true}];var tu=!!z.y.tutor_pro_url;var eu=function t(e){var r=e.isEditing;var l=(0,s.useState)(null),d=Ra(l,2),f=d[0],v=d[1];var h=(0,s.useState)(false),y=Ra(h,2),g=y[0],b=y[1];var x=(0,s.useRef)(null);var E=(0,s.useRef)(null);var k=(0,m.Gc)();var q=De(),S=q.contentType,j=q.activeQuestionIndex,P=q.validationError,A=q.setActiveQuestionId,T=q.setValidationError;var C=(0,m.Dq)({control:k.control,name:"questions"}),I=C.remove,D=C.append,L=C.insert,z=C.move,U=C.fields;var J=(0,w.d)(),Q=J.showModal;var M=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:o.is}));var B=(0,s.useMemo)((function(){if(!f){return null}return U.find((function(t){return t.question_id===f}))}),[f,U]);var G=k.watch("questions")||[];var R=function t(e,r){var n=(0,W.aU)(j,k);if(n!==true){T(n);b(false);return}var i=(0,F.x0)();D({_data_status:St.NEW,question_id:i,question_title:e==="h5p"?r===null||r===void 0?void 0:r.title:(0,u.sprintf)((0,u.__)("Question %d","tutor"),U.length+1),question_description:e==="h5p"?r===null||r===void 0?void 0:r.id:"",question_type:e,question_answers:e==="true_false"?[{answer_id:(0,F.x0)(),_data_status:St.NEW,is_saved:true,answer_title:(0,u.__)("True","tutor"),is_correct:"1",answer_order:1,answer_two_gap_match:"",answer_view_format:"text",belongs_question_id:i,belongs_question_type:"true_false"},{answer_id:(0,F.x0)(),is_saved:true,_data_status:St.NEW,answer_title:(0,u.__)("False","tutor"),is_correct:"0",answer_order:2,answer_two_gap_match:"",answer_view_format:"text",belongs_question_id:i,belongs_question_type:"true_false"}]:e==="fill_in_the_blank"?[{_data_status:St.NEW,is_saved:false,answer_id:(0,F.x0)(),answer_title:"",belongs_question_id:i,belongs_question_type:"fill_in_the_blank",answer_two_gap_match:"",answer_view_format:"",answer_order:0,is_correct:"0"}]:[],answer_explanation:"",question_mark:1,question_order:U.length+1,question_settings:{answer_required:false,question_mark:S==="tutor_h5p_quiz"?0:1,question_type:e,randomize_options:false,show_question_mark:false}});T(null);A(i);b(false)};var V=function t(e){var r=Ga(e),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;R("h5p",i)}}catch(t){r.e(t)}finally{r.f()}};var H=function t(e,r){var n=k.watch("questions.".concat(r));if(!n||P){return}var i=Qa(Qa({},e),{},{question_id:(0,F.x0)(),_data_status:St.NEW,question_title:"".concat(n.question_title," (copy)"),question_answers:n.question_answers.map((function(t){return Qa(Qa({},t),{},{answer_id:(0,F.x0)(),_data_status:St.NEW})}))});var o=r+1;L(o,i)};var K=function t(e,r){I(e);if(j===e){A("");T(null)}if(r._data_status!==St.NEW){k.setValue("deleted_question_ids",[].concat(Wa(k.getValues("deleted_question_ids")),[r.question_id]))}};var Y=function t(e){var r=e.active,n=e.over;if(!n||r.id===n.id){return}var i=U.findIndex((function(t){return t.question_id===r.id}));var o=U.findIndex((function(t){return t.question_id===n.id}));z(i,o)};(0,s.useEffect)((function(){if(x.current){x.current.style.maxHeight="".concat(window.innerHeight-x.current.getBoundingClientRect().top,"px")}}),[x.current,r]);if(!k.getValues("quiz_title")){return null}return(0,a.tZ)("div",null,(0,a.tZ)("div",{css:nu.questionsLabel},(0,a.tZ)("span",null,(0,u.__)("Questions","tutor")),(0,a.tZ)("button",{ref:E,type:"button",onClick:function t(){if(S==="tutor_h5p_quiz"){Q({component:ue,props:{title:(0,u.__)("Select H5P Content","tutor"),onAddContent:function t(e){V(e)},contentType:"tutor_h5p_quiz",addedContentIds:G.map((function(t){return t.question_description}))}})}else{b(true)}}},(0,a.tZ)(p.Z,{name:"plusSquareBrand",width:32,height:32}))),(0,a.tZ)("div",{ref:x,css:nu.questionList},(0,a.tZ)(Z.Z,{when:G.length>0,fallback:(0,a.tZ)("div",{css:nu.emptyQuestionText},(0,u.__)("No questions added yet.","tutor"))},(0,a.tZ)(n.LB,{sensors:M,collisionDetection:n.pE,modifiers:[i.hg],onDragStart:function t(e){v(e.active.id)},onDragEnd:function t(e){return Y(e)}},(0,a.tZ)(o.Fo,{items:G.map((function(t){return Qa(Qa({},t),{},{id:t.question_id})})),strategy:o.qw},(0,a.tZ)(Rr.Z,{each:G},(function(t,e){return(0,a.tZ)(Ca,{key:t.question_id,question:t,index:e,onDuplicateQuestion:function t(r){H(r,e)},onRemoveQuestion:function r(){return K(e,t)}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(Z.Z,{when:B},(function(t){var e=U.findIndex((function(e){return e.question_id===t.question_id}));return(0,a.tZ)(Ca,{key:t.question_id,question:t,index:e,onDuplicateQuestion:F.ZT,onRemoveQuestion:F.ZT,isOverlay:true})}))),document.body))),(0,a.tZ)(O.Z,{gap:4,maxWidth:"240px",arrow:N.iM.isAboveTablet?"top":N.iM.isAboveMobile?"right":"absoluteCenter",triggerRef:E,isOpen:g,closePopover:function t(){return b(false)},animationType:wa.ru.slideUp},(0,a.tZ)("div",{css:nu.questionOptionsWrapper},(0,a.tZ)("span",{css:nu.questionTypeOptionsTitle},(0,u.__)("Select Question Type","tutor")),Xa.map((function(t){return(0,a.tZ)(Z.Z,{key:t.value,when:t.isPro&&!tu,fallback:(0,a.tZ)("button",{key:t.value,type:"button",css:nu.questionTypeOption,onClick:function e(){R(t.value)}},(0,a.tZ)(p.Z,{name:t.icon,width:24,height:24}),(0,a.tZ)("span",null,t.label))},(0,a.tZ)("button",{key:t.value,type:"button",css:nu.questionTypeOption,disabled:true,onClick:F.ZT},(0,a.tZ)(p.Z,{"data-question-icon":true,name:t.icon,width:24,height:24}),(0,a.tZ)("span",null,t.label),(0,a.tZ)(_.Z,{size:"small",content:(0,u.__)("Pro","tutor")})))}))))))};const ru=eu;var nu={questionsLabel:(0,a.iv)("display:flex;gap:",U.W0[4],";align-items:center;justify-content:space-between;border-bottom:1px solid ",U.Jv.stroke.divider,";padding:",U.W0[16]," ",U.W0[16]," ",U.W0[16]," ",U.W0[28],";",J.c.caption("medium"),";color:",U.Jv.text.subdued,";button{",dt.i.resetButton,";width:32px;height:32px;border-radius:",U.E0[6],";svg{color:",U.Jv.action.primary["default"],";width:100%;height:100%;}:focus-visible{outline:2px solid ",U.Jv.stroke.brand,";}}",U.Uo.smallMobile,"{padding:",U.W0[16],";}"+(true?"":0),true?"":0),questionList:(0,a.iv)(dt.i.overflowYAuto,";scrollbar-gutter:auto;padding:",U.W0[8]," 0 ",U.W0[8]," 0;"+(true?"":0),true?"":0),questionTypeOptionsTitle:(0,a.iv)(J.c.caption("medium"),";color:",U.Jv.text.subdued,";padding:",U.W0[8]," ",U.W0[16]," ",U.W0[8]," ",U.W0[20],";border-bottom:1px solid ",U.Jv.stroke.divider,";"+(true?"":0),true?"":0),questionOptionsWrapper:(0,a.iv)("display:flex;flex-direction:column;padding-block:",U.W0[6],";"+(true?"":0),true?"":0),questionTypeOption:(0,a.iv)(dt.i.resetButton,";width:100%;padding:",U.W0[8]," ",U.W0[16]," ",U.W0[8]," ",U.W0[20],";transition:background-color 0.3s ease-in-out;display:flex;align-items:center;gap:",U.W0[4],";border:2px solid transparent;:disabled{cursor:not-allowed;color:",U.Jv.text.primary,";[data-question-icon]{filter:grayscale(100%);}}:hover:enabled{background-color:",U.Jv.background.hover,";color:",U.Jv.text.title,";}:focus:enabled,:active:enabled{border-color:",U.Jv.stroke.brand,";}"+(true?"":0),true?"":0),emptyQuestionText:(0,a.iv)(J.c.small(),";color:",U.Jv.text.subdued,";padding:",U.W0[8]," ",U.W0[16]," ",U.W0[8]," ",U.W0[28],";"+(true?"":0),true?"":0)};var iu=r(3224);function ou(t){"@babel/helpers - typeof";return ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(t)}function au(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function uu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?au(Object(r),!0).forEach((function(e){su(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):au(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function su(t,e,r){e=cu(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function cu(t){var e=lu(t,"string");return ou(e)==="symbol"?e:String(e)}function lu(t,e){if(ou(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(ou(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function du(){du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return du.apply(this,arguments)}var fu=(0,W.zs)();var pu=function t(e){var r=e.contentDripType;var n=De(),i=n.quizId,o=n.contentType;var s=(0,m.Gc)();var c=s.watch("quiz_option.feedback_mode");var l=(0,F.ro)(N.AO.CONTENT_DRIP)&&r==="unlock_sequentially"&&c==="retry";var d=s.watch("quiz_option.content_drip_settings.prerequisites");var f=(0,g.NL)();var v=f.getQueryData(["Topic",fu]);return(0,a.tZ)("div",{css:hu.settings},(0,a.tZ)(iu.Z,{title:(0,u.__)("Basic Settings","tutor"),collapsedAnimationDependencies:[c,d===null||d===void 0?void 0:d.length]},(0,a.tZ)("div",{css:hu.formWrapper},(0,a.tZ)(Z.Z,{when:o!=="tutor_h5p_quiz"},(0,a.tZ)("div",{css:hu.timeWrapper},(0,a.tZ)(m.Qr,{name:"quiz_option.time_limit.time_value",control:s.control,render:function t(e){return(0,a.tZ)(P.Z,du({},e,{type:"number",label:(0,u.__)("Time Limit","tutor"),helpText:(0,u.__)("Set a time limit for this quiz. A value of “0” indicates no time limit","tutor"),selectOnFocus:true}))}}),(0,a.tZ)(m.Qr,{name:"quiz_option.time_limit.time_type",control:s.control,render:function t(e){return(0,a.tZ)(T.Z,du({},e,{options:[{label:(0,u.__)("Seconds","tutor"),value:"seconds"},{label:(0,u.__)("Minutes","tutor"),value:"minutes"},{label:(0,u.__)("Hours","tutor"),value:"hours"},{label:(0,u.__)("Days","tutor"),value:"days"},{label:(0,u.__)("Weeks","tutor"),value:"weeks"}]}))}}))),(0,a.tZ)(Z.Z,{when:o!=="tutor_h5p_quiz"},(0,a.tZ)(m.Qr,{name:"quiz_option.hide_quiz_time_display",control:s.control,render:function t(e){return(0,a.tZ)(ct.Z,du({},e,{label:(0,u.__)("Hide Quiz Time","tutor")}))}}),(0,a.tZ)(m.Qr,{name:"quiz_option.feedback_mode",control:s.control,render:function t(e){return(0,a.tZ)(T.Z,du({},e,{label:(0,u.__)("Feedback Mode","tutor"),leftIcon:(0,a.tZ)(p.Z,{name:"eye",width:32,height:32}),options:[{label:(0,u.__)("Default","tutor"),value:"default",description:(0,u.__)("Answers are shown after finishing the quiz.","tutor")},{label:(0,u.__)("Reveal Mode","tutor"),value:"reveal",description:(0,u.__)("Show answer after attempting the question.","tutor")},{label:(0,u.__)("Retry","tutor"),value:"retry",description:(0,u.__)("Allows students to retake the quiz after their first attempt.","tutor")}]}))}})),(0,a.tZ)(Z.Z,{when:c==="retry"},(0,a.tZ)(m.Qr,{name:"quiz_option.attempts_allowed",control:s.control,rules:{max:20,min:0},render:function t(e){return(0,a.tZ)(P.Z,du({},e,{type:"number",label:(0,u.__)("Attempts Allowed","tutor"),helpText:(0,u.__)('Define how many times a student can retake this quiz. Setting it to "0" allows unlimited attempts',"tutor"),selectOnFocus:true}))}})),(0,a.tZ)(Z.Z,{when:l&&o!=="tutor_h5p_quiz"},(0,a.tZ)(m.Qr,{name:"quiz_option.pass_is_required",control:s.control,render:function t(e){return(0,a.tZ)(ct.Z,du({},e,{label:(0,u.__)("Passing is Required","tutor"),helpText:(0,u.__)("By enabling this option, the student must have to pass it to access the next quiz","tutor")}))}})),(0,a.tZ)(m.Qr,{name:"quiz_option.passing_grade",control:s.control,render:function t(e){return(0,a.tZ)(A.Z,du({},e,{label:(0,u.__)("Passing Grade","tutor"),helpText:(0,u.__)("Set the minimum score percentage required to pass this quiz","tutor"),content:"%",contentPosition:"right",contentCss:dt.i.inputCurrencyStyle}))}}),(0,a.tZ)(Z.Z,{when:o!=="tutor_h5p_quiz"},(0,a.tZ)(m.Qr,{name:"quiz_option.max_questions_for_answer",control:s.control,render:function t(e){return(0,a.tZ)(P.Z,du({},e,{type:"number",label:(0,u.__)("Max Question Allowed to Answer","tutor"),helpText:(0,u.__)("Set the number of quiz questions randomly from your question pool. If the set number exceeds available questions, all questions will be included","tutor"),selectOnFocus:true}))}})),(0,a.tZ)(Z.Z,{when:(0,F.ro)(N.AO.CONTENT_DRIP)&&o!=="tutor_h5p_quiz"},(0,a.tZ)(Z.Z,{when:r==="specific_days"},(0,a.tZ)(m.Qr,{name:"quiz_option.content_drip_settings.after_xdays_of_enroll",control:s.control,render:function t(e){return(0,a.tZ)(P.Z,du({},e,{type:"number",label:(0,a.tZ)("div",{css:hu.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This quiz will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.tZ)(Z.Z,{when:r==="unlock_by_date"},(0,a.tZ)(m.Qr,{name:"quiz_option.content_drip_settings.unlock_date",control:s.control,render:function t(e){return(0,a.tZ)(S.Z,du({},e,{label:(0,a.tZ)("div",{css:hu.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This quiz will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.tZ)(Z.Z,{when:r==="after_finishing_prerequisites"},(0,a.tZ)(m.Qr,{name:"quiz_option.content_drip_settings.prerequisites",control:s.control,render:function t(e){return(0,a.tZ)(C.Z,du({},e,{label:(0,a.tZ)("div",{css:hu.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:v.reduce((function(t,e){t.push(uu(uu({},e),{},{contents:e.contents.filter((function(t){return t.ID!==i}))}));return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))))),(0,a.tZ)(iu.Z,{title:(0,u.__)("Advanced Settings","tutor")},(0,a.tZ)("div",{css:hu.formWrapper},(0,a.tZ)(m.Qr,{name:"quiz_option.quiz_auto_start",control:s.control,render:function t(e){return(0,a.tZ)(ct.Z,du({},e,{label:(0,u.__)("Quiz Auto Start","tutor"),helpText:(0,u.__)("When enabled, the quiz begins immediately as soon as the page loads","tutor")}))}}),(0,a.tZ)("div",{css:hu.questionLayoutAndOrder},(0,a.tZ)(Z.Z,{when:o!=="tutor_h5p_quiz"},(0,a.tZ)(m.Qr,{name:"quiz_option.question_layout_view",control:s.control,render:function t(e){return(0,a.tZ)(T.Z,du({},e,{label:(0,u.__)("Question Layout","tutor"),placeholder:(0,u.__)("Select an option","tutor"),options:[{label:(0,u.__)("Single question","tutor"),value:"single_question"},{label:(0,u.__)("Question pagination","tutor"),value:"question_pagination"},{label:(0,u.__)("Question below each other","tutor"),value:"question_below_each_other"}]}))}})),(0,a.tZ)(m.Qr,{name:"quiz_option.questions_order",control:s.control,render:function t(e){return(0,a.tZ)(T.Z,du({},e,{label:(0,u.__)("Question Order","tutor"),placeholder:(0,u.__)("Select an option","tutor"),options:[{label:(0,u.__)("Random","tutor"),value:"rand"},{label:(0,u.__)("Sorting","tutor"),value:"sorting"},{label:(0,u.__)("Ascending","tutor"),value:"asc"},{label:(0,u.__)("Descending","tutor"),value:"desc"}]}))}})),(0,a.tZ)(Z.Z,{when:o!=="tutor_h5p_quiz"},(0,a.tZ)(m.Qr,{name:"quiz_option.hide_question_number_overview",control:s.control,render:function t(e){return(0,a.tZ)(ct.Z,du({},e,{label:(0,u.__)("Hide Question Number","tutor")}))}}),(0,a.tZ)(m.Qr,{name:"quiz_option.short_answer_characters_limit",control:s.control,render:function t(e){return(0,a.tZ)(P.Z,du({},e,{type:"number",label:(0,u.__)("Set Character Limit for Short Answers","tutor"),selectOnFocus:true}))}}),(0,a.tZ)(m.Qr,{name:"quiz_option.open_ended_answer_characters_limit",control:s.control,render:function t(e){return(0,a.tZ)(P.Z,du({},e,{label:(0,u.__)("Set Character Limit for Open-Ended/Essay Answers","tutor"),selectOnFocus:true}))}})))))};const vu=pu;var hu={settings:(0,a.iv)(dt.i.display.flex("column")," gap:",U.W0[24],";"+(true?"":0),true?"":0),formWrapper:(0,a.iv)(dt.i.display.flex("column")," gap:",U.W0[20],";"+(true?"":0),true?"":0),timeWrapper:(0,a.iv)(dt.i.display.flex()," align-items:flex-end;gap:",U.W0[8],";"+(true?"":0),true?"":0),questionLayoutAndOrder:(0,a.iv)(dt.i.display.flex()," gap:",U.W0[20],";",U.Uo.smallMobile,"{flex-direction:column;}"+(true?"":0),true?"":0),contentDripLabel:(0,a.iv)("display:flex;align-items:center;svg{margin-right:",U.W0[4],";color:",U.Jv.icon.success,";}"+(true?"":0),true?"":0)};var yu=r(7363);function gu(t){"@babel/helpers - typeof";return gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(t)}function mu(){mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return mu.apply(this,arguments)}function _u(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_u=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==gu(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function bu(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function wu(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){bu(o,n,i,a,u,"next",t)}function u(t){bu(o,n,i,a,u,"throw",t)}a(undefined)}))}}function Zu(t,e){return qu(t)||ku(t,e)||Ou(t,e)||xu()}function xu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ou(t,e){if(!t)return;if(typeof t==="string")return Eu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Eu(t,e)}function Eu(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ku(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function qu(t){if(Array.isArray(t))return t}var Su=(0,W.zs)();var ju=function t(e){var r=e.closeModal,n=e.icon,i=e.title,o=e.subtitle,c=e.quizId,l=e.topicId,v=e.contentDripType,h=e.contentType;var y=(0,s.useState)(false),g=Zu(y,2),_=g[0],w=g[1];var x=(0,s.useState)("details"),O=Zu(x,2),E=O[0],k=O[1];var q=(0,s.useState)(!(0,qr.$K)(c)),S=Zu(q,2),j=S[0],A=S[1];var T=(0,s.useRef)(null);var C=Wt();var I=Nt(c||"");var L=(0,b.p)(),z=L.showToast;var U=(0,Q.O)({defaultValues:{quiz_option:{time_limit:{time_value:0,time_type:"minutes"},hide_quiz_time_display:false,feedback_mode:"retry",attempts_allowed:10,passing_grade:80,max_questions_for_answer:h==="tutor_h5p_quiz"?0:10,quiz_auto_start:false,question_layout_view:h==="tutor_h5p_quiz"?"question_below_each_other":"single_question",questions_order:"rand",hide_question_number_overview:false,short_answer_characters_limit:200,open_ended_answer_characters_limit:500,content_drip_settings:{unlock_date:"",after_xdays_of_enroll:0,prerequisites:[]}},questions:[]},shouldFocusError:true});var J=!!Object.values(U.formState.dirtyFields).some((function(t){return t}));(0,s.useEffect)((function(){var t=function t(e){if(J){e.preventDefault();return}U.reset()};window.addEventListener("beforeunload",t);return function(){window.removeEventListener("beforeunload",t)}}),[J]);(0,s.useEffect)((function(){if(!I.data){return}var t=jt(I.data);U.reset(t)}),[I.data]);var F=function(){var t=wu(_u().mark((function t(e,n,i){var o,a,s;return _u().wrap((function t(c){while(1)switch(c.prev=c.next){case 0:if(e.quiz_title){c.next=4;break}k("details");Promise.resolve().then((function(){U.trigger("quiz_title",{shouldFocus:true})}));return c.abrupt("return");case 4:if(!(e.questions.length===0)){c.next=8;break}k("details");z({message:(0,u.__)("Please add a question","tutor"),type:"danger"});return c.abrupt("return");case 8:o=(0,W.aU)(n,U);if(!(o!==true)){c.next=13;break}i(o);k("details");return c.abrupt("return");case 13:A(false);a=Pt(e,l,v,Su);c.next=17;return C.mutateAsync(a);case 17:s=c.sent;if(s.data){A(false);r({action:"CONFIRM"});U.reset()}case 19:case"end":return c.stop()}}),t)})));return function e(r,n,i){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){if(j){U.setFocus("quiz_title")}}),[j]);return(0,a.tZ)(m.RV,U,(0,a.tZ)(Le,{quizId:c||"",contentType:h||"tutor_quiz"},(function(t){var e=t.activeQuestionIndex,s=t.activeQuestionId,l=t.setActiveQuestionId,y=t.setValidationError;return(0,a.tZ)(D.Z,{onClose:function t(){return r({action:"CLOSE"})},icon:J?(0,a.tZ)(p.Z,{name:"warning",width:24,height:24}):n,title:J?N.iM.isAboveDesktop?(0,u.__)("Unsaved Changes","tutor"):"":i,subtitle:N.iM.isAboveSmallMobile?o:"",maxWidth:1218,headerChildren:(0,a.tZ)(qe.Z,{wrapperCss:Au.tabsWrapper,activeTab:E,tabList:[{label:N.iM.isAboveMobile?(0,u.__)("Question Details","tutor"):"",value:"details",icon:!N.iM.isAboveMobile?(0,a.tZ)(p.Z,{name:"text",width:24,height:24}):null},{label:N.iM.isAboveMobile?(0,u.__)("Settings","tutor"):"",value:"settings",icon:!N.iM.isAboveMobile?(0,a.tZ)(p.Z,{name:"settings",width:24,height:24}):null}],onChange:function t(e){return k(e)}}),actions:J&&(0,a.tZ)(yu.Fragment,null,(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){if(J){w(true);return}r()},ref:T},c?N.iM.isAboveSmallMobile?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Discard","tutor"):(0,u.__)("Cancel","tutor")),(0,a.tZ)(Z.Z,{when:E==="settings"||c,fallback:(0,a.tZ)(d.Z,{variant:"primary",size:"small",onClick:function t(){return k("settings")}},(0,u.__)("Next","tutor"))},(0,a.tZ)(d.Z,{loading:C.isPending,variant:"primary",size:"small",onClick:U.handleSubmit((function(t){return F(t,e,y)}))},(0,u.__)("Save","tutor"))))},(0,a.tZ)("div",{css:Au.wrapper({activeTab:E,isH5pQuiz:h==="tutor_h5p_quiz"})},(0,a.tZ)(Z.Z,{when:!I.isLoading,fallback:(0,a.tZ)(f.fz,null)},(0,a.tZ)(Z.Z,{when:E==="details"},(0,a.tZ)("div",{css:Au.left},(0,a.tZ)(Z.Z,{when:E==="details"},(0,a.tZ)("div",{css:Au.quizTitleWrapper},(0,a.tZ)(Z.Z,{when:j,fallback:(0,a.tZ)("div",{role:"button",tabIndex:0,css:Au.quizNameWithButton},(0,a.tZ)("span",{css:Au.quizTitle},U.getValues("quiz_title")),(0,a.tZ)(d.Z,{variant:"text",type:"button",onClick:function t(){return A(true)}},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24})))},(0,a.tZ)("div",{css:Au.quizForm},(0,a.tZ)(m.Qr,{control:U.control,name:"quiz_title",rules:{required:(0,u.__)("Quiz title is required","tutor")},render:function t(e){return(0,a.tZ)(P.Z,mu({},e,{placeholder:(0,u.__)("Add quiz title","tutor"),selectOnFocus:true}))}}),(0,a.tZ)(m.Qr,{control:U.control,name:"quiz_description",render:function t(e){return(0,a.tZ)(Ee.Z,mu({},e,{placeholder:(0,u.__)("Add a summary","tutor"),enableResize:false,rows:2}))}}),(0,a.tZ)("div",{css:Au.quizFormButtonWrapper},(0,a.tZ)(d.Z,{variant:"text",type:"button",onClick:function t(){if(!U.watch("quiz_title")){r()}A(false)},size:"small"},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{loading:C.isPending,variant:"secondary",type:"submit",size:"small",onClick:function t(){if(!U.getValues("quiz_title")){U.trigger("quiz_title");return}A(false)}},(0,u.__)("Ok","tutor")))))),(0,a.tZ)(ru,{isEditing:j})))),(0,a.tZ)("div",{css:Au.content({activeTab:E})},(0,a.tZ)(Z.Z,{when:E==="settings",fallback:(0,a.tZ)(_a,null)},(0,a.tZ)(vu,{contentDripType:v}))),(0,a.tZ)(Z.Z,{when:E==="details"&&h!=="tutor_h5p_quiz"},(0,a.tZ)("div",{css:Au.right},(0,a.tZ)(Ve,null))))),(0,a.tZ)(ke.Z,{isOpen:_,triggerRef:T,closePopover:function t(){return w(false)},maxWidth:"258px",title:(0,u.__)("Your quiz has unsaved changes. If you cancel, you will lose your progress.","tutor"),message:(0,u.__)("Are you sure you want to continue?","tutor"),animationType:wa.ru.slideUp,arrow:N.iM.isAboveMobile?"top":"absoluteCenter",positionModifier:{top:-50,left:c?88:E==="settings"?30:26},hideArrow:true,confirmButton:{text:(0,u.__)("Yes","tutor"),variant:"primary"},cancelButton:{text:(0,u.__)("No","tutor"),variant:"text"},onConfirmation:function t(){var e;U.reset();y(null);if(!((e=I.data)!==null&&e!==void 0&&e.questions.find((function(t){return t.question_id===s})))){l("")}if(!c){r()}}}))})))};const Pu=ju;var Au={wrapper:function t(e){var r=e.activeTab,n=e.isH5pQuiz;return(0,a.iv)("width:100%;display:grid;grid-template-columns:",r==="details"?n?"513px 1fr":"352px 1fr 280px":"1fr",";height:100%;",U.Uo.smallTablet,"{width:100%;grid-template-columns:1fr;height:max-content;}"+(true?"":0),true?"":0)},tabsWrapper:(0,a.iv)("height:",N.oC.HEADER_HEIGHT,"px;",U.Uo.smallMobile,"{button{min-width:auto;}}"+(true?"":0),true?"":0),left:(0,a.iv)("border-right:1px solid ",U.Jv.stroke.divider,";"+(true?"":0),true?"":0),content:function t(e){var r=e.activeTab;return(0,a.iv)(dt.i.overflowYAuto,";padding:",U.W0[32]," 0 ",U.W0[48]," ",U.W0[6],";",r==="settings"&&(0,a.iv)("padding-top:",U.W0[24],";padding-inline:352px 352px;",U.Uo.smallTablet,"{padding:",U.W0[16]," ",U.W0[8]," ",U.W0[24]," ",U.W0[8],";margin:0 auto;}",U.Uo.smallMobile,"{padding-top:",U.W0[8],";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},right:(0,a.iv)(dt.i.overflowYAuto,";",dt.i.display.flex("column"),";gap:",U.W0[16],";border-left:1px solid ",U.Jv.stroke.divider,";"+(true?"":0),true?"":0),quizTitleWrapper:(0,a.iv)(J.c.caption(),";color:",U.Jv.text.subdued,";padding:",U.W0[16]," ",U.W0[32]," ",U.W0[16]," ",U.W0[28],";border-bottom:1px solid ",U.Jv.stroke.divider,";",U.Uo.smallTablet,"{padding:",U.W0[8],";}"+(true?"":0),true?"":0),quizNameWithButton:(0,a.iv)("display:inline-flex;width:100%;transition:all 0.3s ease-in-out;button{display:none;}:hover,:focus-within{button{display:block;}}:focus-visible{outline:2px solid ",U.Jv.stroke.brand,";border-radius:",U.E0[6],";button{display:block;}}",U.Uo.smallTablet,"{button{display:block;}}"+(true?"":0),true?"":0),quizTitle:(0,a.iv)("flex:1;padding:",U.W0[8]," ",U.W0[16]," ",U.W0[8]," ",U.W0[8],";background-color:",U.Jv.background.white,";border-radius:",U.E0[6],";"+(true?"":0),true?"":0),quizForm:(0,a.iv)("display:flex;flex-direction:column;gap:",U.W0[12],";"+(true?"":0),true?"":0),quizFormButtonWrapper:(0,a.iv)("display:flex;justify-content:end;margin-top:",U.W0[4],";gap:",U.W0[8],";"+(true?"":0),true?"":0)};var Tu=r(7363);function Cu(t){"@babel/helpers - typeof";return Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(t)}function Iu(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Uu(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function t(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,a=false,u;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();o=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!o&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function Du(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Du=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==Cu(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function Lu(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function Wu(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Lu(o,n,i,a,u,"next",t)}function u(t){Lu(o,n,i,a,u,"throw",t)}a(undefined)}))}}function zu(t,e){return Fu(t)||Qu(t,e)||Uu(t,e)||Nu()}function Nu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uu(t,e){if(!t)return;if(typeof t==="string")return Ju(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ju(t,e)}function Ju(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qu(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Fu(t){if(Array.isArray(t))return t}function Mu(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Bu=(0,W.zs)();var Gu=!!z.y.tutor_pro_url;var Ru=(0,F.ro)(N.AO.TUTOR_GOOGLE_MEET_INTEGRATION)||(0,F.ro)(N.AO.TUTOR_ZOOM_INTEGRATION);var Vu=function t(e){var r=e.topic;var n=(0,W.Wj)("topic-",r.id);var i=(0,b.p)(),o=i.showToast;var c=(0,w.d)(),l=c.showModal;var f=(0,m.Gc)();var v=(0,s.useState)(null),h=zu(v,2),y=h[0],S=h[1];var j=(0,s.useState)(false),P=zu(j,2),A=P[0],T=P[1];var C=(0,s.useRef)(null);var I=(0,s.useRef)(null);var D=Ct();var L=(0,g.NL)();var z=L.getQueryData(["CourseDetails",Number(Bu)]);var U=(0,x.tZ)({acceptedTypes:[".csv"],onUpload:function(){var t=Wu(Du().mark((function t(e){return Du().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return D.mutateAsync({topic_id:n,csv_file:e[0]});case 2:T(false);case 3:case"end":return r.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),onError:function t(e){var r=Iu(e),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;o({message:i,type:"danger"})}}catch(t){r.e(t)}finally{r.f()}T(false)}}),J=U.fileInputRef,Q=U.handleChange;return(0,a.tZ)(Tu.Fragment,null,(0,a.tZ)("div",{css:Ku.contentButtons},(0,a.tZ)("div",{css:Ku.leftButtons},(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:Ku.contentButton,onClick:function t(){l({component:xe,props:{contentDripType:f.watch("contentDripType"),topicId:n,title:(0,u.__)("Lesson","tutor"),icon:(0,a.tZ)(p.Z,{name:"lesson",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)}})}},(0,u.__)("Lesson","tutor")),(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:Ku.contentButton,onClick:function t(){l({component:Pu,props:{topicId:n,contentDripType:f.watch("contentDripType"),title:(0,u.__)("Quiz","tutor"),icon:(0,a.tZ)(p.Z,{name:"quiz",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)},closeOnEscape:false})}},(0,u.__)("Quiz","tutor")),(0,a.tZ)(Z.Z,{when:!Gu,fallback:(0,a.tZ)(Z.Z,{when:(0,F.ro)(N.AO.H5P_INTEGRATION)},(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:Ku.contentButton,onClick:function t(){l({component:Pu,props:{topicId:n,contentDripType:f.watch("contentDripType"),title:(0,u.__)("Interactive Quiz","tutor"),icon:(0,a.tZ)(p.Z,{name:"interactiveQuiz",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title),contentType:"tutor_h5p_quiz"},closeOnEscape:false})}},(0,u.__)("Interactive Quiz","tutor")))},(0,a.tZ)(_.Z,null,(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:true,onClick:F.ZT},(0,u.__)("Interactive Quiz","tutor")))),(0,a.tZ)(Z.Z,{when:!Gu,fallback:(0,a.tZ)(Z.Z,{when:(0,F.ro)(N.AO.TUTOR_ASSIGNMENTS)},(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:Ku.contentButton,onClick:function t(){l({component:ot,props:{topicId:n,contentDripType:f.watch("contentDripType"),title:(0,u.__)("Assignment","tutor"),icon:(0,a.tZ)(p.Z,{name:"assignment",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)}})}},(0,u.__)("Assignment","tutor")))},(0,a.tZ)(_.Z,null,(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:true,onClick:F.ZT},(0,u.__)("Assignment","tutor"))))),(0,a.tZ)("div",{css:Ku.rightButtons},(0,a.tZ)(Z.Z,{when:!Gu||Ru,fallback:(0,a.tZ)(Z.Z,{when:Gu,fallback:(0,a.tZ)(_.Z,null,(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"import",width:24,height:24}),disabled:true,onClick:F.ZT},(0,u.__)("Import Quiz","tutor")))},(0,a.tZ)(Z.Z,{when:(0,F.ro)(N.AO.QUIZ_EXPORT_IMPORT)},(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"import",width:24,height:24}),disabled:!r.isSaved,buttonCss:Ku.contentButton,onClick:function t(){var e;J===null||J===void 0?void 0:(e=J.current)===null||e===void 0?void 0:e.click()}},(0,u.__)("Import Quiz","tutor"))))},(0,a.tZ)(E.Z,{isOpen:A,onClick:function t(){return T(true)},closePopover:function t(){return T(false)},disabled:!r.isSaved,dotsOrientation:"vertical",maxWidth:Gu?"220px":"240px",isInverse:true,arrowPosition:"auto",hideArrow:true,closeOnEscape:false,size:N.iM.isAboveMobile?"medium":"small"},(0,a.tZ)(Z.Z,{when:!Gu||(0,F.ro)(N.AO.TUTOR_GOOGLE_MEET_INTEGRATION)},(0,a.tZ)(E.Z.Option,{text:(0,a.tZ)("span",{ref:C,css:Ku.threeDotButton},(0,u.__)("Meet live lesson","tutor"),(0,a.tZ)(Z.Z,{when:!Gu},(0,a.tZ)(_.Z,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!Gu,icon:(0,a.tZ)(p.Z,{width:24,height:24,name:"googleMeetColorize",isColorIcon:true}),onClick:function t(){return S("tutor-google-meet")}})),(0,a.tZ)(Z.Z,{when:!Gu||(0,F.ro)(N.AO.TUTOR_ZOOM_INTEGRATION)},(0,a.tZ)(E.Z.Option,{text:(0,a.tZ)("span",{ref:I,css:Ku.threeDotButton},(0,u.__)("Zoom live lesson","tutor"),(0,a.tZ)(Z.Z,{when:!Gu},(0,a.tZ)(_.Z,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!Gu,icon:(0,a.tZ)(p.Z,{width:24,height:24,name:"zoomColorize",isColorIcon:true}),onClick:function t(){return S("tutor_zoom_meeting")}})),(0,a.tZ)(Z.Z,{when:!Gu||(0,F.ro)(N.AO.QUIZ_EXPORT_IMPORT)},(0,a.tZ)(E.Z.Option,{text:(0,a.tZ)("span",{css:Ku.threeDotButton},(0,u.__)("Import Quiz","tutor"),(0,a.tZ)(Z.Z,{when:!Gu},(0,a.tZ)(_.Z,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!Gu,onClick:function t(){var e;J===null||J===void 0?void 0:(e=J.current)===null||e===void 0?void 0:e.click()},icon:(0,a.tZ)(p.Z,{name:"importColorized",width:24,height:24,isColorIcon:true})})))))),(0,a.tZ)("input",{css:dt.i.display.none,type:"file",ref:J,onChange:Q,multiple:false,accept:".csv"}),(0,a.tZ)(O.Z,{triggerRef:C,isOpen:y==="tutor-google-meet",closePopover:F.ZT,maxWidth:"306px",closeOnEscape:false,arrow:N.iM.isAboveMobile?"auto":"absoluteCenter",hideArrow:true},(0,a.tZ)(k.Z,{topicId:n,data:null,onCancel:function t(){S(null);T(false)}})),(0,a.tZ)(O.Z,{triggerRef:I,isOpen:y==="tutor_zoom_meeting",closePopover:F.ZT,maxWidth:"306px",closeOnEscape:false,arrow:N.iM.isAboveMobile?"auto":"absoluteCenter",hideArrow:true},(0,a.tZ)(q.Z,{topicId:n,meetingHost:(z===null||z===void 0?void 0:z.zoom_users)||{},data:null,onCancel:function t(){S(null);T(false)}})))};const Hu=Vu;var Ku={contentButtons:(0,a.iv)(dt.i.display.flex(),";justify-content:space-between;"+(true?"":0),true?"":0),leftButtons:(0,a.iv)(dt.i.display.flex(),";gap:",U.W0[12],";",U.Uo.smallMobile,"{flex-wrap:wrap;}"+(true?"":0),true?"":0),rightButtons:true?{name:"s5xdrg",styles:"display:flex;align-items:center"}:0,threeDotButton:(0,a.iv)("display:flex;align-items:center;gap:",U.W0[4],";"+(true?"":0),true?"":0),contentButton:(0,a.iv)(":hover:not(:disabled){background-color:",U.Jv.background.white,";color:",U.Jv.text.brand,";outline:1px solid ",U.Jv.stroke.brand,";}"+(true?"":0),true?"":0)};var Yu=r(9313);var $u=r(7363);function Xu(t){"@babel/helpers - typeof";return Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(t)}function ts(){ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return ts.apply(this,arguments)}function es(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */es=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==Xu(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function rs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ns(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rs(Object(r),!0).forEach((function(e){is(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function is(t,e,r){e=os(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function os(t){var e=as(t,"string");return Xu(e)==="symbol"?e:String(e)}function as(t,e){if(Xu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Xu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function us(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function ss(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){us(o,n,i,a,u,"next",t)}function u(t){us(o,n,i,a,u,"throw",t)}a(undefined)}))}}function cs(t,e){return vs(t)||ps(t,e)||ds(t,e)||ls()}function ls(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ds(t,e){if(!t)return;if(typeof t==="string")return fs(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fs(t,e)}function fs(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ps(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function vs(t){if(Array.isArray(t))return t}function hs(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ys=(0,W.zs)();var gs=!!z.y.tutor_pro_url;var ms=function t(e){var r=e.topic,n=e.isEdit,i=e.listeners,o=e.isDragging,c=e.onCollapse,l=e.onEdit,v=e.onCopy,h=e.onDelete,g=e.setIsEdit;var b=(0,W.Wj)("topic-",r.id);var w=(0,Q.O)({defaultValues:{title:r.title,summary:r.summary},shouldFocusError:true});var x=(0,s.useState)(false),O=cs(x,2),E=O[0],k=O[1];var q=(0,s.useRef)(null);var S=(0,s.useRef)(null);var j=(0,L.FV)();var A=(0,L.P_)();var T=(0,L.Wn)(ys);var C=(0,Yu.m)({ref:q,isOpen:!r.isCollapsed,heightCalculator:"client"});var I=function(){var t=ss(es().mark((function t(e){var n;return es().wrap((function t(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return j.mutateAsync(ns(ns({},r.isSaved&&{topic_id:b}),{},{course_id:ys,title:e.title,summary:e.summary}));case 2:n=i.sent;if(n.data){g(false)}if(n.status_code===201){l===null||l===void 0?void 0:l("topic-".concat(n.data))}case 5:case"end":return i.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();var D=function(){var t=ss(es().mark((function t(){var e;return es().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return A.mutateAsync({course_id:ys,content_id:b,content_type:"topic"});case 2:e=r.sent;if(e.data){v===null||v===void 0?void 0:v("topic-".concat(e.data))}case 4:case"end":return r.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){if(n){w.setFocus("title")}}),[n]);return(0,a.tZ)($u.Fragment,null,(0,a.tZ)("div",{css:xs.header({isCollapsed:r.isCollapsed,isEdit:n,isDeletePopoverOpen:E,isDragging:o})},(0,a.tZ)("div",{css:xs.headerContent({isSaved:r.isSaved})},(0,a.tZ)("div",{css:xs.grabberInput,onClick:function t(){return c(r.id)},onKeyDown:function t(e){if(e.key==="Enter"){c(r.id)}}},(0,a.tZ)("button",ts({},r.isSaved?i:{},{css:xs.grabButton({isDragging:o}),type:"button",disabled:!r.isSaved}),(0,a.tZ)(p.Z,{name:"dragVertical",width:24,height:24})),(0,a.tZ)(Z.Z,{when:n,fallback:(0,a.tZ)("div",{css:xs.title({isEdit:n}),onDoubleClick:function t(){return g(true)}},w.watch("title"))},(0,a.tZ)("div",{css:xs.title({isEdit:n})},(0,a.tZ)(m.Qr,{control:w.control,name:"title",rules:{required:(0,u.__)("Title is required","tutor")},render:function t(e){return(0,a.tZ)(P.Z,ts({},e,{placeholder:(0,u.__)("Add a title","tutor"),isSecondary:true,selectOnFocus:true}))}})))),(0,a.tZ)("div",{css:xs.actions,"data-visually-hidden":true},(0,a.tZ)(Z.Z,{when:!n},(0,a.tZ)(ut.Z,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:!r.isSaved,onClick:function t(){g(true);if(r.isCollapsed){c===null||c===void 0?void 0:c(r.id)}}},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24})))),(0,a.tZ)(Z.Z,{when:r.isSaved},(0,a.tZ)(Z.Z,{when:!A.isPending,fallback:(0,a.tZ)(f.ZP,{size:24})},(0,a.tZ)(ut.Z,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.tZ)(Z.Z,{when:!gs,fallback:(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:!r.isSaved,onClick:D},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))},(0,a.tZ)(_.Z,{size:"tiny"},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:true,onClick:F.ZT},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))))))),(0,a.tZ)(Z.Z,{when:r.isSaved},(0,a.tZ)(ut.Z,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:!r.isSaved,"data-visually-hidden":true,ref:S,onClick:function t(){k(true)}},(0,a.tZ)(p.Z,{name:"delete",width:24,height:24})))),(0,a.tZ)(Z.Z,{when:r.isSaved},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:!r.isSaved,onClick:function t(){c===null||c===void 0?void 0:c(r.id)},"data-toggle-collapse":true},(0,a.tZ)(p.Z,{name:"chevronDown",width:24,height:24}))))),(0,a.tZ)(Z.Z,{when:n,fallback:(0,a.tZ)(Z.Z,{when:r.summary.length>0},(0,a.tZ)(y.q.div,{style:ns({},C)},(0,a.tZ)("div",{css:xs.description({isEdit:n}),ref:q,onDoubleClick:function t(){return g(true)}},w.watch("summary"))))},(0,a.tZ)("div",{css:xs.description({isEdit:n})},(0,a.tZ)(m.Qr,{control:w.control,name:"summary",render:function t(e){return(0,a.tZ)(Ee.Z,ts({},e,{placeholder:(0,u.__)("Add a summary","tutor"),isSecondary:true,rows:2,enableResize:true}))}}))),(0,a.tZ)(Z.Z,{when:n},(0,a.tZ)("div",{css:xs.footer},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){if(!w.formState.isValid&&!r.isSaved){h===null||h===void 0?void 0:h()}w.reset();g(false)}},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{loading:j.isPending,variant:"secondary",size:"small",onClick:w.handleSubmit(I)},(0,u.__)("Ok","tutor"))))),(0,a.tZ)(ke.Z,{isOpen:E,triggerRef:S,isLoading:T.isPending,closePopover:F.ZT,maxWidth:"258px",title:(0,u.sprintf)((0,u.__)('Delete topic "%s"',"tutor"),r.title),message:(0,u.__)("Are you sure you want to delete this content from your course? This cannot be undone.","tutor"),animationType:wa.ru.slideUp,arrow:"auto",hideArrow:true,confirmButton:{text:(0,u.__)("Delete","tutor"),variant:"text",isDelete:true},cancelButton:{text:(0,u.__)("Cancel","tutor"),variant:"text"},onConfirmation:ss(es().mark((function t(){return es().wrap((function t(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return T.mutateAsync(b);case 2:k(false);h===null||h===void 0?void 0:h();case 4:case"end":return e.stop()}}),t)}))),onCancel:function t(){return k(false)}}))};const _s=ms;var bs=true?{name:"jjyo93",styles:"padding-right:0"}:0;var ws=true?{name:"18g08sj",styles:"padding-bottom:0"}:0;var Zs=true?{name:"21xn5r",styles:"transform:rotate(180deg)"}:0;var xs={header:function t(e){var r=e.isCollapsed,n=e.isEdit,i=e.isDeletePopoverOpen,o=e.isDragging;return(0,a.iv)("padding:",U.W0[12]," ",U.W0[16],";",dt.i.display.flex("column"),";[data-toggle-collapse]{transition:transform 0.3s ease-in-out;",!r&&Zs,";}",!r&&(0,a.iv)("border-bottom:1px solid ",U.Jv.stroke.divider,";"+(true?"":0),true?"":0)," ",!n&&ws," ",!n&&!i&&(0,a.iv)("[data-visually-hidden]{opacity:0;transition:",!o?"opacity 0.3s ease-in-out":"none",";}:hover,:focus-within{[data-visually-hidden]{opacity:",o?0:1,";}}"+(true?"":0),true?"":0)," ",U.Uo.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},headerContent:function t(e){var r=e.isSaved,n=r===void 0?true:r;return(0,a.iv)("display:grid;grid-template-columns:",n?"1fr auto":"1fr",";gap:",U.W0[12],";width:100%;padding-bottom:",U.W0[12],";"+(true?"":0),true?"":0)},grabberInput:(0,a.iv)(dt.i.display.flex(),";align-items:center;gap:",U.W0[8],";svg{color:",U.Jv.color.black[40],";flex-shrink:0;}"+(true?"":0),true?"":0),grabButton:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.iv)(dt.i.resetButton,";",dt.i.flexCenter(),";cursor:",n?"grabbing":"grab",";:disabled{cursor:not-allowed;}&:focus-visible{outline:2px solid ",U.Jv.stroke.brand,";outline-offset:1px;border-radius:",U.E0[2],";}"+(true?"":0),true?"":0)},title:function t(e){var r=e.isEdit;return(0,a.iv)(J.c.body(),";color:",U.Jv.text.hints,";width:100%;",!r&&(0,a.iv)(dt.i.text.ellipsis(1),";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},description:function t(e){var r=e.isEdit;return(0,a.iv)(J.c.caption(),";color:",U.Jv.text.hints,";padding-inline:",U.W0[8],";margin-left:",U.W0[24],";padding-bottom:",U.W0[12],";",!r&&(0,a.iv)(dt.i.text.ellipsis(2),";"+(true?"":0),true?"":0)," ",r&&bs,";"+(true?"":0),true?"":0)},footer:(0,a.iv)("width:100%;text-align:right;",dt.i.display.flex(),";gap:",U.W0[8],";justify-content:end;"+(true?"":0),true?"":0),actions:(0,a.iv)(dt.i.display.flex(),";align-items:start;gap:",U.W0[8],";justify-content:end;"+(true?"":0),true?"":0)};var Os=r(7363);function Es(t){"@babel/helpers - typeof";return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(t)}function ks(){ks=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return ks.apply(this,arguments)}function qs(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */qs=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new E(i||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&r.call(g,o)&&(h=g);var m=v.prototype=f.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(n,o,a,u){var s=l(t[n],t,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==Es(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,u)}),(function(t){i("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,u)}))}u(s.arg)}var o;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){i(r,n,t,e)}))}return o=o?o.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return q()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function Ss(t,e,r,n,i,o,a){try{var u=t[o](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,i)}}function js(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Ss(o,n,i,a,u,"next",t)}function u(t){Ss(o,n,i,a,u,"throw",t)}a(undefined)}))}}function Ps(t,e){return Ds(t)||Is(t,e)||Ts(t,e)||As()}function As(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ts(t,e){if(!t)return;if(typeof t==="string")return Cs(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cs(t,e)}function Cs(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Is(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Ds(t){if(Array.isArray(t))return t}function Ls(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ws(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ls(Object(r),!0).forEach((function(e){zs(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ls(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function zs(t,e,r){e=Ns(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Ns(t){var e=Us(t,"string");return Es(e)==="symbol"?e:String(e)}function Us(t,e){if(Es(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Es(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Js(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Qs={lesson:{name:"lesson",color:U.Jv.icon["default"]},tutor_quiz:{name:"quiz",color:U.Jv.design.warning},tutor_assignments:{name:"assignment",color:U.Jv.icon.processing},tutor_zoom_meeting:{name:"zoomColorize",color:""},"tutor-google-meet":{name:"googleMeetColorize",color:""},tutor_h5p_quiz:{name:"interactiveQuiz",color:"#C984FE"}};var Fs={tutor_assignments:(0,u.__)("Are you sure you want to delete this assignment? All existing assignment submissions will be permanently deleted.","tutor"),tutor_quiz:(0,u.__)("Are you sure you want to delete this quiz? All existing quiz attempts will be permanently deleted.","tutor"),tutor_h5p_quiz:(0,u.__)("Are you sure you want to delete this interactive quiz? All existing quiz attempts will be permanently deleted.","tutor")};var Ms={lesson:xe,tutor_quiz:Pu,tutor_assignments:ot,tutor_h5p_quiz:Pu};var Bs={lesson:(0,u.__)("Lesson","tutor"),tutor_quiz:(0,u.__)("Quiz","tutor"),tutor_assignments:(0,u.__)("Assignment","tutor"),tutor_h5p_quiz:(0,u.__)("Interactive Quiz","tutor")};var Gs={lesson:"lesson",tutor_quiz:"quiz",tutor_assignments:"assignment",tutor_h5p_quiz:"interactiveQuiz"};var Rs=function t(e){return(0,o.cP)(Ws(Ws({},e),{},{wasDragging:true}))};var Vs=!!z.y.tutor_pro_url;var Hs=(0,W.zs)();var Ks=function t(e){var r=e.type,n=e.topic,i=e.content,c=e.onCopy,l=e.onDelete,d=e.isOverlay,v=d===void 0?false:d;var y=(0,W.Wj)("topic-",n.id);var b=(0,W.Wj)("content-",i.id);var x=(0,g.NL)();var E=x.getQueryData(["CourseDetails",Number(Hs)]);var S=(0,m.Gc)();var j=(0,s.useState)(null),P=Ps(j,2),A=P[0],T=P[1];var C=(0,s.useState)(false),I=Ps(C,2),D=I[0],z=I[1];var J=(0,s.useRef)(null);var Q=(0,s.useRef)(null);var M=Qs[r];var B=(0,o.nB)({id:i.id,data:{type:"content"},animateLayoutChanges:Rs}),G=B.attributes,R=B.listeners,V=B.setNodeRef,H=B.transform,K=B.transition,Y=B.isDragging;var $={transform:h.ux.Transform.toString(H),transition:K,opacity:Y?.3:undefined,background:Y?U.Jv.stroke.hover:undefined};var X=(0,w.d)(),tt=X.showModal;var et=(0,L.P_)();var rt=(0,L.PI)();var nt=Gt();var it=(0,L.PI)();var ot=(0,L.PI)();var at=Dt();var st=function t(){var e=r;if(Ms[e]){tt({component:Ms[e],props:Ws({contentDripType:S.watch("contentDripType"),topicId:y,lessonId:b,assignmentId:b,quizId:b,title:Bs[e],subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),n.title),icon:(0,a.tZ)(p.Z,{name:Gs[e],height:24,width:24})},r==="tutor_h5p_quiz"&&{contentType:"tutor_h5p_quiz"}),closeOnEscape:!["tutor_quiz","tutor_h5p_quiz"].includes(r)})}if(r==="tutor_zoom_meeting"){T("tutor_zoom_meeting")}if(r==="tutor-google-meet"){T("tutor-google-meet")}};var ct=function(){var t=js(qs().mark((function t(){return qs().wrap((function t(e){while(1)switch(e.prev=e.next){case 0:if(!["lesson","tutor_assignments"].includes(r)){e.next=5;break}e.next=3;return rt.mutateAsync(b);case 3:e.next=18;break;case 5:if(!["tutor_quiz","tutor_h5p_quiz"].includes(r)){e.next=10;break}e.next=8;return nt.mutateAsync(b);case 8:e.next=18;break;case 10:if(!(r==="tutor-google-meet")){e.next=15;break}e.next=13;return it.mutateAsync(b);case 13:e.next=18;break;case 15:if(!(r==="tutor_zoom_meeting")){e.next=18;break}e.next=18;return ot.mutateAsync(b);case 18:z(false);l===null||l===void 0?void 0:l();case 20:case"end":return e.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();var lt=function t(){var e={lesson:"lesson",tutor_assignments:"assignment",tutor_quiz:"quiz",tutor_h5p_quiz:"quiz"};et.mutateAsync({course_id:Hs,content_id:b,content_type:e[r]});c===null||c===void 0?void 0:c()};return(0,a.tZ)(Os.Fragment,null,(0,a.tZ)("div",ks({},G,{css:Xs.wrapper({isDragging:Y,isOverlay:v,isActive:A===r||D||et.isPending}),ref:V,style:$}),(0,a.tZ)("div",ks({css:Xs.iconAndTitle({isDragging:v})},R),(0,a.tZ)("div",{"data-content-icon":true},(0,a.tZ)(p.Z,{name:M.name,width:24,height:24,style:(0,a.iv)("color:",M.color,";"+(true?"":0),true?"":0)})),(0,a.tZ)("div",{"data-bar-icon":true},(0,a.tZ)(p.Z,{name:"bars",width:24,height:24})),(0,a.tZ)("p",{css:Xs.title,onClick:st,onKeyDown:F.ZT},(0,a.tZ)("span",{dangerouslySetInnerHTML:{__html:i.title}}),(0,a.tZ)(Z.Z,{when:(r==="tutor_quiz"||r==="tutor_h5p_quiz")&&!!i.total_question},(0,a.tZ)("span",{"data-question-count":true},"(",(0,u.sprintf)((0,u.__)("%s Questions","tutor"),i.total_question),")")))),(0,a.tZ)("div",{css:Xs.actions,"data-actions":true},(0,a.tZ)(Z.Z,{when:r==="tutor_quiz"},(0,a.tZ)(ut.Z,{content:(0,u.__)("Export Quiz","tutor"),delay:200},(0,a.tZ)(Z.Z,{when:!Vs,fallback:(0,a.tZ)(Z.Z,{when:(0,F.ro)(N.AO.QUIZ_EXPORT_IMPORT)},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:function t(){at.mutate(b)}},(0,a.tZ)(p.Z,{name:"export",width:24,height:24})))},(0,a.tZ)(_.Z,{size:"tiny"},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:true,onClick:F.ZT},(0,a.tZ)(p.Z,{name:"export",width:24,height:24})))))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.tZ)("button",{ref:J,type:"button",css:dt.i.actionButton,onClick:st},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24}))),(0,a.tZ)(Z.Z,{when:!["tutor_zoom_meeting","tutor_zoom_meeting"].includes(r)},(0,a.tZ)(Z.Z,{when:!et.isPending,fallback:(0,a.tZ)(f.ZP,{size:24})},(0,a.tZ)(ut.Z,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.tZ)(Z.Z,{when:!Vs,fallback:(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:lt},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))},(0,a.tZ)(_.Z,{size:"tiny"},(0,a.tZ)("button",{disabled:true,type:"button",css:dt.i.actionButton,onClick:F.ZT},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))))))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.tZ)("button",{ref:Q,type:"button",css:dt.i.actionButton,onClick:function t(){z(true)}},(0,a.tZ)(p.Z,{name:"delete",width:24,height:24}))))),(0,a.tZ)(O.Z,{triggerRef:J,isOpen:A!==null,closePopover:F.ZT,maxWidth:"306px",closeOnEscape:false,arrow:N.iM.isAboveMobile?"auto":"absoluteCenter",hideArrow:true},(0,a.tZ)(Z.Z,{when:A==="tutor_zoom_meeting"},(0,a.tZ)(q.Z,{data:null,topicId:y,meetingHost:(E===null||E===void 0?void 0:E.zoom_users)||{},onCancel:function t(){return T(null)},meetingId:b})),(0,a.tZ)(Z.Z,{when:A==="tutor-google-meet"},(0,a.tZ)(k.Z,{data:null,topicId:y,onCancel:function t(){return T(null)},meetingId:b}))),(0,a.tZ)(ke.Z,{isOpen:D,isLoading:rt.isPending||nt.isPending||it.isPending||ot.isPending,triggerRef:Q,closePopover:F.ZT,maxWidth:"258px",title:(0,u.sprintf)((0,u.__)('Delete "%s"',"tutor"),i.title),message:Fs[r]||(0,u.__)("Are you sure you want to delete this content from your course? This cannot be undone.","tutor"),animationType:wa.ru.slideUp,arrow:"auto",hideArrow:true,confirmButton:{text:(0,u.__)("Delete","tutor"),variant:"text",isDelete:true},cancelButton:{text:(0,u.__)("Cancel","tutor"),variant:"text"},onConfirmation:ct,onCancel:function t(){return z(false)}}))};const Ys=Ks;var $s=true?{name:"1jfpmb0",styles:"[data-content-icon]{display:none;}[data-bar-icon]{display:block;}cursor:grabbing"}:0;var Xs={wrapper:function t(e){var r=e.isDragging,n=r===void 0?false:r,i=e.isOverlay,o=i===void 0?false:i,u=e.isActive,s=u===void 0?false:u;return(0,a.iv)("width:100%;padding:",U.W0[10]," ",U.W0[8],";border:1px solid transparent;border-radius:",U.E0[6],";display:flex;justify-content:space-between;align-items:center;[data-content-icon],[data-bar-icon]{display:flex;height:24px;}:hover,:focus-within{border-color:",U.Jv.stroke.border,";background-color:",U.Jv.background.white,";[data-content-icon]{display:none;}[data-bar-icon]{display:block;}[data-actions]{opacity:",n?0:1,";}}",s&&(0,a.iv)("border-color:",U.Jv.stroke.border,";background-color:",U.Jv.background.white,";[data-content-icon]{display:flex;}[data-bar-icon]{display:none;}[data-actions]{opacity:1;}"+(true?"":0),true?"":0)," ",o&&(0,a.iv)("box-shadow:",U.AF.drag,";border-color:",U.Jv.stroke.border,";background-color:",U.Jv.background.white,";[data-actions]{opacity:1;}"+(true?"":0),true?"":0)," ",U.Uo.smallTablet,"{[data-actions]{opacity:1;}}"+(true?"":0),true?"":0)},title:(0,a.iv)(J.c.caption(),";color:",U.Jv.text.title,";display:flex;align-items:center;gap:",U.W0[4],";cursor:pointer;span{&:first-of-type{",dt.i.text.ellipsis(2),";}}[data-question-count]{color:",U.Jv.text.hints,";}"+(true?"":0),true?"":0),iconAndTitle:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.iv)("display:flex;align-items:center;gap:",U.W0[8],";cursor:grab;flex-grow:1;[data-bar-icon]{display:none;}",n&&$s,";"+(true?"":0),true?"":0)},actions:(0,a.iv)("display:flex;opacity:0;align-items:start;gap:",U.W0[8],";justify-content:end;"+(true?"":0),true?"":0)};function tc(t){"@babel/helpers - typeof";return tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(t)}function ec(){ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return ec.apply(this,arguments)}function rc(t,e){return uc(t)||ac(t,e)||ic(t,e)||nc()}function nc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ic(t,e){if(!t)return;if(typeof t==="string")return oc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oc(t,e)}function oc(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ac(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function uc(t){if(Array.isArray(t))return t}function sc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function cc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sc(Object(r),!0).forEach((function(e){lc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lc(t,e,r){e=dc(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function dc(t){var e=fc(t,"string");return tc(e)==="symbol"?e:String(e)}function fc(t,e){if(tc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(tc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pc=function t(e){return(0,o.cP)(cc(cc({},e),{},{wasDragging:true}))};var vc=function t(e){var r;var n=e.topic,i=e.onDelete,u=e.onCopy,c=e.onCollapse,l=e.onEdit,d=e.isOverlay,f=d===void 0?false:d;var p=(0,s.useState)(false),v=rc(p,2),g=v[0],m=v[1];var _=(0,s.useState)(!n.isSaved),b=rc(_,2),w=b[0],x=b[1];var O=(0,s.useRef)(null);var E=(0,s.useRef)(null);var k=(0,y.q_)({height:!n.isCollapsed?(r=O.current)===null||r===void 0?void 0:r.scrollHeight:0,opacity:!n.isCollapsed?1:0,overflow:"hidden",config:{duration:300,easing:function t(e){return e*(2-e)}}},[n.contents.length]),q=rc(k,2),S=q[0],j=q[1];(0,s.useEffect)((function(){var t=function t(e){if((0,qr.$K)(E.current)&&!E.current.contains(e.target)){m(false)}};document.addEventListener("click",t);return function(){return document.removeEventListener("click",t)}}),[w]);var P=(0,o.nB)({id:n.id,data:{type:"topic"},animateLayoutChanges:pc}),A=P.attributes,T=P.listeners,C=P.setNodeRef,I=P.transform,D=P.transition,L=P.isDragging;var W=(0,s.useCallback)((function(t){if(t){C(t);E.current=t}}),[C]);var z={transform:h.ux.Transform.toString(I),transition:D,opacity:L?.3:undefined,background:L?U.Jv.stroke.hover:undefined};(0,s.useEffect)((function(){if((0,qr.$K)(O.current)){j.start({height:!n.isCollapsed?O.current.scrollHeight:0,opacity:!n.isCollapsed?1:0})}}),[n.isCollapsed,n.contents.length]);return(0,a.tZ)("div",ec({},n.isSaved?A:{},{css:yc.wrapper({isActive:g||w,isOverlay:f}),onClick:function t(){return m(true)},onKeyDown:F.ZT,tabIndex:-1,ref:W,style:z}),(0,a.tZ)(_s,{isActive:g,isDragging:L,isEdit:w,listeners:T,onCollapse:function t(e){c===null||c===void 0?void 0:c(e)},onDelete:i,onEdit:function t(e){l===null||l===void 0?void 0:l(e)},onCopy:function t(e){u===null||u===void 0?void 0:u(e)},topic:n,setIsEdit:x}),(0,a.tZ)(y.q.div,{style:cc({},S)},(0,a.tZ)("div",{css:yc.content,ref:O},(0,a.tZ)(Z.Z,{when:n.contents.length>0},(0,a.tZ)(o.Fo,{items:n.contents.map((function(t){return cc(cc({},t),{},{id:t.ID})})),strategy:o.qw},(0,a.tZ)("div",null,(0,a.tZ)(Rr.Z,{each:n.contents},(function(t){return(0,a.tZ)(Ys,{key:t.ID,type:t.post_type,topic:n,content:{id:t.ID,title:t.post_title,total_question:t.total_question||0}})}))))),(0,a.tZ)(Hu,{topic:n}))))};const hc=vc;var yc={wrapper:function t(e){var r=e.isActive,n=r===void 0?false:r,i=e.isOverlay,o=i===void 0?false:i;return(0,a.iv)("border:1px solid ",U.Jv.stroke["default"],";border-radius:",U.E0[8],";transition:background-color 0.3s ease-in-out,border-color 0.3s ease-in-out;background-color:",U.Jv.bg.white,";width:100%;",n&&(0,a.iv)("border-color:",U.Jv.stroke.brand,";background-color:",U.Jv.background.hover,";"+(true?"":0),true?"":0)," :hover{background-color:",U.Jv.background.hover,";}",o&&(0,a.iv)("box-shadow:",U.AF.drag,";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},content:(0,a.iv)("padding:",U.W0[16],";",dt.i.display.flex("column"),";gap:",U.W0[12],";"+(true?"":0),true?"":0)};var gc=r(2322);var mc=r(6051);const _c=r.p+"images/7a3f20a77fdf442a94bc38151eadcfcd-curriculum-empty-state-2x.webp";const bc=r.p+"images/986ea3637213dd5da688bb6f1e1319a6-curriculum-empty-state.webp";var wc=function t(e){var r=e.title;return(0,a.tZ)("div",{css:xc.wrapper},(0,a.tZ)(p.Z,{name:"dragVertical",width:24,height:24}),(0,a.tZ)("span",null,r))};const Zc=wc;var xc={wrapper:(0,a.iv)("display:flex;align-items:center;gap:",U.W0[8],";border:1px solid ",U.Jv.stroke["default"],";border-radius:",U.E0[8],";background-color:",U.Jv.background.hover,";padding:",U.W0[12]," ",U.W0[16],";box-shadow:",U.AF.drag,";",J.c.body(),";color:",U.Jv.text.hints,";cursor:grabbing;svg{color:",U.Jv.color.black[40],";flex-shrink:0;}"+(true?"":0),true?"":0)};function Oc(t){"@babel/helpers - typeof";return Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(t)}function Ec(t){return Sc(t)||qc(t)||Lc(t)||kc()}function kc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qc(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Sc(t){if(Array.isArray(t))return Wc(t)}function jc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jc(Object(r),!0).forEach((function(e){Ac(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ac(t,e,r){e=Tc(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Tc(t){var e=Cc(t,"string");return Oc(e)==="symbol"?e:String(e)}function Cc(t,e){if(Oc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Oc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ic(t,e){return Nc(t)||zc(t,e)||Lc(t,e)||Dc()}function Dc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lc(t,e){if(!t)return;if(typeof t==="string")return Wc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wc(t,e)}function Wc(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zc(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Nc(t){if(Array.isArray(t))return t}var Uc=(0,W.zs)();var Jc=function t(){var e=(0,l.s0)();(0,s.useEffect)((function(){if(!Uc){e("/",{replace:true})}}),[e]);var r=(0,s.useState)(true),h=Ic(r,2),y=h[0],g=h[1];var m=(0,s.useState)(null),_=Ic(m,2),b=_[0],w=_[1];var x=(0,s.useState)([]),O=Ic(x,2),E=O[0],k=O[1];var q=(0,s.useRef)([]);var S=(0,L.rM)(Uc);var j=(0,L.AI)();(0,s.useEffect)((function(){if(E.length===0){return}k((function(t){if(y){q.current=[]}if(!y){q.current=t.reduce((function(t,e){if(e.isSaved){t.push(e.id)}return t}),[])}return t.map((function(t){if(!t.isSaved){return t}return Pc(Pc({},t),{},{isCollapsed:y})}))}))}),[y]);(0,s.useEffect)((function(){var t;if(!((t=S.data)!==null&&t!==void 0&&t.length)){return}var e=function t(e){return S.data.map((function(t,r){var n="topic-".concat(t.id);var i=r===0;var o=q.current.includes(n);var a=e.length?!o:!i;if(i&&!e.length){q.current=[n]}return Pc(Pc({},t),{},{id:n,isCollapsed:a,isSaved:true,contents:t.contents.map((function(t){return Pc(Pc({},t),{},{ID:"content-".concat(t.ID)})}))})}))};k(e)}),[S.data]);var P=(0,s.useMemo)((function(){if(!b){return null}var t=b.toString().includes("topic")?"topic":"content";var e=E.flatMap((function(t){return t.contents}));var r=t==="topic"?E.find((function(t){return t.id===b})):e.find((function(t){return t.ID===b}));return r}),[b,E]);var A=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:o.is}));if(!Uc){return null}if(S.isLoading){return(0,a.tZ)(f.fz,null)}var T=function t(e,r){if(r==="topic"){return E.find((function(t){return t.id===e}))}if(r==="content"){return E.find((function(t){return t.contents.find((function(t){return t.ID===e}))}))}};var C=function t(e){var r=e.active,n=e.over;if(!n||!r){return}if(r.id.toString().includes("content")&&n.id.toString().includes("content")&&r.id!==n.id){var i=T(r.id,"content");var o=T(n.id,"content");if(!i||!o)return;var a=E.findIndex((function(t){return t.id===i.id}));var u=E.findIndex((function(t){return t.id===o.id}));if(o.isCollapsed||a===u){return}var s=i.contents.findIndex((function(t){return t.ID===r.id}));var c=o.contents.findIndex((function(t){return t.ID===n.id}));var l=Ec(E);var d=l[a].contents.splice(s,1),f=Ic(d,1),p=f[0];l[u].contents.splice(c,0,p);k(l)}if(r.id.toString().includes("content")&&n!==null&&n!==void 0&&n.id.toString().includes("topic")&&r.id!==n.id){var v=T(r.id,"content");var h=T(n.id,"topic");if(!v||!h||h.contents.length>0||h.isCollapsed){return}var y=E.findIndex((function(t){return t.id===v.id}));var g=E.findIndex((function(t){return t.id===h.id}));if(y===g){return}var m=v.contents.findIndex((function(t){return t.ID===r.id}));var _=Ec(E);var b=_[y].contents.splice(m,1),w=Ic(b,1),Z=w[0];_[g].contents.push(Z);k(_)}};var I=function t(e){var r,n;var i=e.active,o=e.over;if(!o){w(null);return}var a=Ec(E);if(i.id.toString().includes("topic")&&o!==null&&o!==void 0&&o.id.toString().includes("topic")&&i&&i.id!==o.id){var u=E.findIndex((function(t){return t.id===i.id}));var s=E.findIndex((function(t){return t.id===o.id}));a=(0,F.Ao)(a,u,s);k(a)}if(i.id.toString().includes("content")&&o!==null&&o!==void 0&&o.id.toString().includes("content")&&i&&i.id!==o.id){var c=T(i.id,"content");var l=T(o.id,"content");if(!c||!l||l.isCollapsed){return}var d=E.findIndex((function(t){return t.id===c.id}));var f=E.findIndex((function(t){return t.id===l.id}));var p=c.contents.findIndex((function(t){return t.ID===i.id}));var v=l.contents.findIndex((function(t){return t.ID===o.id}));if(d===f){a[d].contents=(0,F.Ao)(a[d].contents,p,v);k(a)}else{var h=a[d].contents.splice(p,1),y=Ic(h,1),g=y[0];a[f].contents.splice(v,0,g);k(a)}}if(i.id.toString().includes("content")&&o.id.toString().includes("topic")&&i&&i.id!==o.id){var m=T(i.id,"content");var _=T(o.id,"topic");if(!m||!_||_.isCollapsed){return}var b=E.findIndex((function(t){return t.id===m.id}));var Z=E.findIndex((function(t){return t.id===_.id}));var x=m.contents.findIndex((function(t){return t.ID===i.id}));var O=a[b].contents.splice(x,1),q=Ic(O,1),P=q[0];a[Z].contents.push(P);k(a)}var A=a.reduce((function(t,e,r){var n=0;t[r]={topic_id:(0,W.Wj)("topic-",e.id),lesson_ids:e.contents.reduce((function(t,e){t[n]=(0,W.Wj)("content-",e.ID);n++;return t}),{})};return t}),{});j.mutate(Pc({tutor_topics_lessons_sorting:A},i.id.toString().includes("content")&&{"content_parent[parent_topic_id]":(r=S.data)===null||r===void 0?void 0:(n=r.find((function(t){return t.contents.find((function(t){return String(t.ID)===(0,W.Wj)("content-",o.id)}))})))===null||n===void 0?void 0:n.id,"content_parent[content_id]":(0,W.Wj)("content-",i.id)}));w(null)};var D=function t(e,r){k((function(t){return t.filter((function(t,r){return r!==e}))}));q.current=q.current.filter((function(t){return t!==r}))};var z=function t(e){k((function(t){return t.map((function(t){if(t.id===e){return Pc(Pc({},t),{},{isCollapsed:!t.isCollapsed})}return t}))}));if(!q.current.includes(e)){q.current=[].concat(Ec(q.current),[e])}else{q.current=q.current.filter((function(t){return t!==e}))}};return(0,a.tZ)("div",{css:Fc.container},(0,a.tZ)("div",{css:Fc.wrapper},(0,a.tZ)(gc.Z,{title:(0,u.__)("Curriculum","tutor"),backUrl:"/basics",rightButton:(0,a.tZ)(Z.Z,{when:E.some((function(t){return t.isSaved}))},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){return g((function(t){return!t}))}},y?(0,u.__)("Expand All","tutor"):(0,u.__)("Collapse All","tutor")))}),(0,a.tZ)("div",{css:Fc.content},(0,a.tZ)(Z.Z,{when:!S.isLoading&&S.data&&(S.data.length>0||E.length>0),fallback:(0,a.tZ)(v.Z,{emptyStateImage:bc,emptyStateImage2x:_c,imageAltText:(0,u.__)("Empty State Illustration","tutor"),title:(0,u.__)("Start building your course!","tutor"),description:(0,u.__)("Add Topics, Lessons, and Quizzes to get started.","tutor"),actions:(0,a.tZ)(d.Z,{variant:"secondary",icon:(0,a.tZ)(p.Z,{name:"plusSquareBrand",width:24,height:25}),onClick:function t(){k((function(){return[{id:(0,F.x0)(),title:"",summary:"",contents:[],isCollapsed:false,isSaved:false}]}))}},(0,u.__)("Add Topic","tutor"))})},(0,a.tZ)("div",{css:Fc.topicWrapper},(0,a.tZ)(n.LB,{sensors:A,collisionDetection:n.ey,measuring:bn.O,modifiers:[i.hg],onDragStart:function t(e){w(e.active.id)},onDragOver:function t(e){return C(e)},onDragEnd:function t(e){return I(e)}},(0,a.tZ)(o.Fo,{items:E.map((function(t){return Pc(Pc({},t),{},{id:t.id})})),strategy:o.qw},(0,a.tZ)(Rr.Z,{each:E},(function(t,e){return t.isSaved&&(0,a.tZ)(hc,{key:t.id,topic:Pc(Pc({},t),{},{isCollapsed:b!==null&&b!==void 0&&b.toString().includes("topic")?true:t.isCollapsed}),onDelete:function r(){return D(e,t.id)},onCollapse:function t(e){return z(e)},onCopy:function t(e){q.current=[e]},onEdit:function t(e){q.current=[e]}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(Z.Z,{when:P},(function(t){return(0,a.tZ)(Zc,{title:b!==null&&b!==void 0&&b.toString().includes("topic")?t.title:t.post_title})}))),document.body)),(0,a.tZ)(Rr.Z,{each:E},(function(t,e){return!t.isSaved&&(0,a.tZ)(hc,{key:t.id,topic:Pc(Pc({},t),{},{isCollapsed:false}),onDelete:function r(){return D(e,t.id)},onCollapse:function t(e){return z(e)},onCopy:function t(e){q.current=[e]},onEdit:function t(e){q.current=[e]}})}))))),(0,a.tZ)(Z.Z,{when:E.length>0},(0,a.tZ)("div",{css:Fc.addButtonWrapper},(0,a.tZ)(d.Z,{variant:"secondary",icon:(0,a.tZ)(p.Z,{name:"plusSquareBrand",width:24,height:24}),onClick:function t(){k((function(t){return[].concat(Ec(t.map((function(t){return Pc(Pc({},t),{},{isCollapsed:true})}))),[{id:(0,F.x0)(),title:"",summary:"",contents:[],isCollapsed:false,isSaved:false}])}));q.current=[]}},(0,u.__)("Add Topic","tutor"))))),(0,a.tZ)(mc.Z,{styleModifier:Fc.navigator}))};const Qc=Jc;var Fc={container:(0,a.iv)("margin-top:",U.W0[32],";width:100%;",U.Uo.smallTablet,"{margin-top:",U.W0[16],";}"+(true?"":0),true?"":0),wrapper:(0,a.iv)("width:100%;",dt.i.display.flex("column"),";gap:",U.W0[16],";margin:0 auto;"+(true?"":0),true?"":0),content:(0,a.iv)("margin-top:",U.W0[16],";",U.Uo.smallMobile,"{margin-top:0;}"+(true?"":0),true?"":0),topicWrapper:(0,a.iv)(dt.i.display.flex("column"),";gap:",U.W0[16],";align-items:center;"+(true?"":0),true?"":0),addButtonWrapper:(0,a.iv)("path{stroke:",U.Jv.icon.brand,";}"+(true?"":0),true?"":0),navigator:(0,a.iv)("margin:",U.W0[40]," auto;"+(true?"":0),true?"":0)}},7692:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/56f20c93d8e28423f724fe4e914fbd21-3d.png"},2663:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/7a53b07b7f13e48b7b7b47dff35d9946-black-and-white.png"},8505:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/9613f2a35fc147cbde38998fc279f6e9-concept.png"},9554:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/ff5a8a3d6c18c02f00d659da3824176b-dreamy.png"},628:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/bff40839481a6e109932774fea006137-filmic.png"},7210:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/dec5e33b385ba1a7c841dde2b6c1a5af-illustration.png"},4246:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/83571e85f649c56b82349466a5b4c844-neon.png"},121:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/9dcf3f4907036dd08b31bf2a7181bed0-none.jpg"},7758:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/fc8edfd709e8f6ed349b59a0f0a00647-painting.png"},4121:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/32925d4873712d856f4abc340b3334cb-photo.png"},4446:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/fb8df26f9102747dfafc31d912d6d074-retro.png"},9463:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/7c935ca7690aecae8c42142d8cec660e-sketch.png"},9502:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/e67e28356e87045281d41cd6583f5c41-generate-image-2x.webp"},8037:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/9c13bda85170ee68f15380378d920fd1-generate-image.webp"}}]);